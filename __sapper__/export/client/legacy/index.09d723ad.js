import{_ as e,a as n,b as t,c as r,d as o,e as c,i as a,s,f as l,S as u,g as f,h as d,j as p,k as h,l as m,m as g,n as v,t as y,o as _,p as b,q as w,r as z,u as k,v as $,w as q,x as C,y as P,z as x,A as S,B as E,C as R,D as I,E as D,F as A,G as O,H as N,I as V,J as T,K as M,L as G,M as L,N as j,O as Y,P as H,Q as U,R as B,T as F,U as W,V as J,W as K,X}from"./client.6001c201.js";import{I as Z,a as Q,P as ee,_ as ne}from"./PlanetCard.6627753f.js";function te(o){return e(o)||n(o)||t(o)||r()}function re(e){return function(){var n,t=G(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=G(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return L(this,n)}}function oe(e,n,t){var r=e.slice();return r[15]=n[t],r}function ie(e){var n,t,r=void 0!==e[5][e[0].type]&&ce(e);return{c:function(){n=d("div"),r&&r.c(),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var t=h(n);r&&r.l(t),t.forEach(m),this.h()},h:function(){g(n,"class","desc svelte-4d9gi8")},m:function(e,o){v(e,n,o),r&&r.m(n,null),t=!0},p:function(e,t){void 0!==e[5][e[0].type]?r?(r.p(e,t),y(r,1)):((r=ce(e)).c(),y(r,1),r.m(n,null)):r&&(b(),w(r,1,1,function(){r=null}),z())},i:function(e){t||(y(r),t=!0)},o:function(e){w(r),t=!1},d:function(e){e&&m(n),r&&r.d()}}}function ce(e){for(var n,t,r=e[5][e[0].type].desc.action.split("<icon>"),o=[],i=0;i<r.length;i+=1)o[i]=le(oe(e,r,i));var c=function(e){return w(o[e],1,1,function(){o[e]=null})};return{c:function(){n=d("p");for(var e=0;e<o.length;e+=1)o[e].c();this.h()},l:function(e){n=p(e,"P",{class:!0});for(var t=h(n),r=0;r<o.length;r+=1)o[r].l(t);t.forEach(m),this.h()},h:function(){g(n,"class","action svelte-4d9gi8")},m:function(e,r){v(e,n,r);for(var i=0;i<o.length;i+=1)o[i].m(n,null);t=!0},p:function(e,t){if(33&t){var i;for(r=e[5][e[0].type].desc.action.split("<icon>"),i=0;i<r.length;i+=1){var a=oe(e,r,i);o[i]?(o[i].p(a,t),y(o[i],1)):(o[i]=le(a),o[i].c(),y(o[i],1),o[i].m(n,null))}for(b(),i=r.length;i<o.length;i+=1)c(i);z()}},i:function(e){if(!t){for(var n=0;n<r.length;n+=1)y(o[n]);t=!0}},o:function(e){o=o.filter(Boolean);for(var n=0;n<o.length;n+=1)w(o[n]);t=!1},d:function(e){e&&m(n),k(o,e)}}}function ae(e){var n,t=e[15]+"";return{c:function(){n=C(t)},l:function(e){n=S(e,t)},m:function(e,t){v(e,n,t)},p:function(e,r){1&r&&t!==(t=e[15]+"")&&V(n,t)},i:Y,o:Y,d:function(e){e&&m(n)}}}function se(e){var n,t=new Q({props:{type:e[15],size:"sm"}});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.type=e[15]),t.$set(r)},i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}function le(e){var n,t,r,o,i,c=[se,ae],a=[];function s(e,t){return 1&t&&(n=!!["survey","warfare","colonize","research","produce","trade"].includes(e[15])),n?0:1}return t=s(e,-1),r=a[t]=c[t](e),{c:function(){r.c(),o=_()},l:function(e){r.l(e),o=_()},m:function(e,n){a[t].m(e,n),v(e,o,n),i=!0},p:function(e,n){var i=t;(t=s(e,n))===i?a[t].p(e,n):(b(),w(a[i],1,1,function(){a[i]=null}),z(),(r=a[t])||(r=a[t]=c[t](e)).c(),y(r,1),r.m(o.parentNode,o))},i:function(e){i||(y(r),i=!0)},o:function(e){w(r),i=!1},d:function(e){a[t].d(e),e&&m(o)}}}function ue(e){for(var n,t,r,o,i,c,a,s,l,u,_,k,M,G=e[0].name+"",L=[e[0].icons],j={},Y=0;Y<L.length;Y+=1)j=f(j,L[Y]);var H=new Z({props:j}),U=!e[2]&&ie(e);return{c:function(){n=d("div"),t=d("div"),$(H.$$.fragment),r=q(),o=d("p"),i=C(G),c=q(),a=d("div"),s=d("img"),u=q(),U&&U.c(),this.h()},l:function(e){n=p(e,"DIV",{class:!0,style:!0});var l=h(n);t=p(l,"DIV",{class:!0});var f=h(t);P(H.$$.fragment,f),r=x(f),o=p(f,"P",{class:!0});var d=h(o);i=S(d,G),d.forEach(m),f.forEach(m),c=x(l),a=p(l,"DIV",{class:!0,style:!0});var g=h(a);s=p(g,"IMG",{src:!0,alt:!0,class:!0}),g.forEach(m),u=x(l),U&&U.l(l),l.forEach(m),this.h()},h:function(){g(o,"class","svelte-4d9gi8"),g(t,"class","title svelte-4d9gi8"),s.src!=="./images/tech.svg"&&g(s,"src","./images/tech.svg"),g(s,"alt",l=e[0].name),g(s,"class","svelte-4d9gi8"),g(a,"class","logo svelte-4d9gi8"),g(a,"style",e[4]),g(n,"class",_="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[2]?"mini":"")+" svelte-4d9gi8"),g(n,"style",e[3])},m:function(l,f,d){v(l,n,f),E(n,t),R(H,t,null),E(t,r),E(t,o),E(o,i),E(n,c),E(n,a),E(a,s),E(n,u),U&&U.m(n,null),k=!0,d&&I(M),M=[D(n,"click",e[9]),D(n,"touch",e[10]),D(n,"touchstart",e[11]),D(n,"touchend",e[12]),D(n,"tap",e[13]),D(n,"touchmove",e[14])]},p:function(e,t){var r=A(t,1)[0],o=1&r?O(L,[N(e[0].icons)]):{};H.$set(o),(!k||1&r)&&G!==(G=e[0].name+"")&&V(i,G),(!k||1&r&&l!==(l=e[0].name))&&g(s,"alt",l),(!k||16&r)&&g(a,"style",e[4]),e[2]?U&&(b(),w(U,1,1,function(){U=null}),z()):U?(U.p(e,r),y(U,1)):((U=ie(e)).c(),y(U,1),U.m(n,null)),(!k||7&r&&_!==(_="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[2]?"mini":"")+" svelte-4d9gi8"))&&g(n,"class",_),(!k||8&r)&&g(n,"style",e[3])},i:function(e){k||(y(H.$$.fragment,e),y(U),k=!0)},o:function(e){w(H.$$.fragment,e),w(U),k=!1},d:function(e){e&&m(n),T(H),U&&U.d(),I(M)}}}function fe(e,n,t){var r=this,o=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return console.log("str",n),console.log("length",n.length),t>=n.length?0:e(n,t+1)+((n.charCodeAt(t)<<5)-n.charCodeAt(t))},i=function(e){var n=(e>>24&255).toString(16)+(e>>16&255).toString(16)+(e>>8&255).toString(16)+(255&e).toString(16);return(n+="000000").substring(0,6)};String.prototype.toHexColour=function(){return i(o(r))};var c,a,s,l=n.card,u=void 0===l?{name:" "}:l,f=n.selectable,d=void 0!==f&&f,p=n.mini,h=void 0!==p&&p;return M(function(){console.log("card name",u.name),c="#"+i(o(u.name)),t(3,a="color:".concat(c,";background-image:linear-gradient( rgb(80,80,80),  rgb(80,80,80) 5vh,  rgb(80,80,80) 5vh,  ").concat(c," 8vh,  ").concat(c," 8vh,  ").concat(c," 12vh,  ").concat(c," 12vh,  rgb(80,80,80) 16vh );")),t(4,s="background-color: ".concat(c,";"))}),e.$set=function(e){"card"in e&&t(0,u=e.card),"selectable"in e&&t(1,d=e.selectable),"mini"in e&&t(2,h=e.mini)},[u,d,h,a,s,{" ":{desc:{role:"",action:""}},survey:{desc:{role:"Look at <icon>survey<icon> -1 planet cards, keep 1 \n Leader: Look at 1 additional card",action:"Draw 3 cards"}},warfare:{desc:{role:"Collect 1 fighter per <icon>warfare<icon> \n Leader: May attack 1 planet instead",action:"Attack 1 planet OR collect 1 fighter"}},colonize:{desc:{action:"Settle 1 planet OR +1 colony",role:"+1 colony per <icon>colonize<icon> \n Leader: May settle 1 planet instead"}},producetrade:{desc:{action:"Produce 1 resource OR Trade 1 resource",role:"Produce 1 resource per <icon>produce<icon> OR Trade 1 resource per <icon>trade<icon> \n Leader: +<icon>produce<icon> OR <icon>trade<icon>"}},research:{desc:{action:"Remove up to 3 cards in your and from the game",role:"Auire 1 technology card after satisfying <icon>research<icon> costs and planet requirements \n Leader: +<icon>research<icon>"}},politics:{desc:{action:"Remove tis card from the game. Place any 1 role card from the stacks into your hand",role:""}},improved_trade:{desc:{action:"Collect 1 influence from the supply",role:""}},improved_research:{desc:{action:"Draw 1 card. Remove up to 3 cards in your hand from the game",role:""}},improved_production:{desc:{action:"Produce 2 resources",role:""}},improved_warfare:{desc:{action:"Collect 2 fighter OR Attack 1 planet",role:""}},improved_colonize:{desc:{action:"Settle 1 planet (optional). \n Settle another planet OR +1 colony",role:""}},improved_survey:{desc:{action:"Draw 3 cards",role:""}},survey_team:{desc:{action:"Take the top card of the planet deck and put it face down into your empire",role:""}},war_path:{desc:{action:"Attack up to 2 planets",role:""}},terraforming:{desc:{action:"Add this card to a planet as 2 colonies. If that fulfills the printed colonize cost, settle the planet \n (ignore colonize cost discounts)",role:""}},genetic_engineering:{desc:{action:"Collect +1 influence for each TYPE of resource you produce this turn",role:""}},"artificial_intelligence'":{desc:{action:"Place any 2 role cards from the stacks into your hand",role:""}},diverse_markets:{desc:{action:"Collect +1 influence for each TYPE of resource you trade this turn",role:""}},specialization:{desc:{action:"Choose 1 resource TYPE. Collect +1 influence for each resource of that TYPE you trade this turn",role:""}},mobilization:{desc:{action:"Collect 2 fighter. You may attack 1 planet after your role phase this turn",role:""}},data_network:{desc:{action:"Draw 2 cards. Remove any number of cards in your hand from the game",role:""}},abundance:{desc:{action:"Planets you settle or attack come into play with all resource slots filled",role:""}},adaptability:{desc:{action:"Your standard research role cards gain all symboles. They can be used to boost or follow any role",role:""}},bureaucracy:{desc:{action:"You may use the leader bonus when following the colonize or warfare roles",role:""}},dissension:{desc:{action:"Draw 1 dditional card when dissenting",role:""}},hyperefficiency:{desc:{action:"You may remove any number of cards in your hand form the game each turn",role:""}},imperialism:{desc:{action:"<icon>survey<icon> <icon>trade<icon> <icon>warfare<icon>",role:""}},logistics:{desc:{action:"Play the action and role phases of your turn in any order",role:""}},productivity:{desc:{action:"You may play an additional card for its action effect during your action phase",role:""}},scorched_earth_policy:{desc:{action:"-2 to our warfare costs. When you attack a planet, leave a fight on it. that planet cannot store resources",role:""}},streamlining:{desc:{action:"You may remove 1 card in your hand from the game each turn",role:""}},weapons_emporium:{desc:{action:"You may trade fighters as if they were resources (fighter is not a resource TYPE)",role:""}},fertile_grounds:{desc:{role:"<icon>colonize<icon> <icon>produce<icon> <icon>research<icon>",action:""}}},c,o,i,function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)}]}var de=function(e){o(t,u);var n=re(t);function t(e){var r;return c(this,t),r=n.call(this),a(l(r),e,fe,ue,s,{card:0,selectable:1,mini:2}),r}return t}();function pe(e){return function(){var n,t=G(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=G(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return L(this,n)}}function he(e,n,t){var r=e.slice();return r[15]=n[t],r}function me(e,n,t){var r=e.slice();return r[15]=n[t],r}function ge(e){var n,t,r,o,i,c,a,s,l,u,f,_,k,$,P,R=[be,_e],A=[];function O(e,n){return e[5]?1:0}r=O(e),o=A[r]=R[r](e);var N=[ze,we],T=[];function M(e,n){return e[5]?1:0}u=M(e),f=T[u]=N[u](e);var G=!e[3]&&ke(e);return{c:function(){n=d("div"),t=d("div"),o.c(),i=q(),c=d("p"),a=C(e[4]),s=q(),l=d("div"),f.c(),_=q(),G&&G.c(),this.h()},l:function(r){n=p(r,"DIV",{class:!0,style:!0});var u=h(n);t=p(u,"DIV",{class:!0});var d=h(t);o.l(d),i=x(d),c=p(d,"P",{class:!0});var g=h(c);a=S(g,e[4]),g.forEach(m),d.forEach(m),s=x(u),l=p(u,"DIV",{class:!0,style:!0});var v=h(l);f.l(v),v.forEach(m),_=x(u),G&&G.l(u),u.forEach(m),this.h()},h:function(){g(c,"class","svelte-103yabx"),g(t,"class","title svelte-103yabx"),g(l,"class","logo svelte-103yabx"),g(l,"style",e[7]),g(n,"class",k="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[3]?"mini":"")+" svelte-103yabx"),g(n,"style",e[6])},m:function(o,f,d){v(o,n,f),E(n,t),A[r].m(t,null),E(t,i),E(t,c),E(c,a),E(n,s),E(n,l),T[u].m(l,null),E(n,_),G&&G.m(n,null),$=!0,d&&I(P),P=[D(n,"click",e[9]),D(n,"touch",e[10]),D(n,"touchstart",e[11]),D(n,"touchend",e[12]),D(n,"tap",e[13]),D(n,"touchmove",e[14])]},p:function(e,c){var s=r;(r=O(e))===s?A[r].p(e,c):(b(),w(A[s],1,1,function(){A[s]=null}),z(),(o=A[r])||(o=A[r]=R[r](e)).c(),y(o,1),o.m(t,i)),(!$||16&c)&&V(a,e[4]);var d=u;(u=M(e))===d?T[u].p(e,c):(b(),w(T[d],1,1,function(){T[d]=null}),z(),(f=T[u])||(f=T[u]=N[u](e)).c(),y(f,1),f.m(l,null)),(!$||128&c)&&g(l,"style",e[7]),e[3]?G&&(b(),w(G,1,1,function(){G=null}),z()):G?(G.p(e,c),y(G,1)):((G=ke(e)).c(),y(G,1),G.m(n,null)),(!$||11&c&&k!==(k="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[3]?"mini":"")+" svelte-103yabx"))&&g(n,"class",k),(!$||64&c)&&g(n,"style",e[6])},i:function(e){$||(y(o),y(f),y(G),$=!0)},o:function(e){w(o),w(f),w(G),$=!1},d:function(e){e&&m(n),A[r].d(),T[u].d(),G&&G.d(),I(P)}}}function ve(e){var n,t=new de({props:{card:e[0],selectable:e[1],mini:e[3]}});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.card=e[0]),2&n&&(r.selectable=e[1]),8&n&&(r.mini=e[3]),t.$set(r)},i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}function ye(e){var n,t=new ee({props:{planet:e[0],selectable:e[1],mini:e[3]}});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.planet=e[0]),2&n&&(r.selectable=e[1]),8&n&&(r.mini=e[3]),t.$set(r)},i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}function _e(e){var n,t=new Q({props:{type:e[0].type,size:"sm"}});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.type=e[0].type),t.$set(r)},i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}function be(e){var n,t,r=new Q({props:{type:"produce",size:"sm"}}),o=new Q({props:{type:"trade",size:"sm"}});return{c:function(){$(r.$$.fragment),n=q(),$(o.$$.fragment)},l:function(e){P(r.$$.fragment,e),n=x(e),P(o.$$.fragment,e)},m:function(e,i){R(r,e,i),v(e,n,i),R(o,e,i),t=!0},p:Y,i:function(e){t||(y(r.$$.fragment,e),y(o.$$.fragment,e),t=!0)},o:function(e){w(r.$$.fragment,e),w(o.$$.fragment,e),t=!1},d:function(e){T(r,e),e&&m(n),T(o,e)}}}function we(e){var n,t;return{c:function(){n=d("img"),this.h()},l:function(e){n=p(e,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){n.src!==(t="./images/"+e[5]+".svg")&&g(n,"src",t),g(n,"alt",e[5]),g(n,"class","svelte-103yabx")},m:function(e,t){v(e,n,t)},p:function(e,r){32&r&&n.src!==(t="./images/"+e[5]+".svg")&&g(n,"src",t),32&r&&g(n,"alt",e[5])},i:Y,o:Y,d:function(e){e&&m(n)}}}function ze(e){var n,t,r,o=new Q({props:{type:"produce",size:"sm"}}),i=new Q({props:{type:"trade",size:"sm"}});return{c:function(){n=d("div"),$(o.$$.fragment),t=q(),$(i.$$.fragment),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var r=h(n);P(o.$$.fragment,r),t=x(r),P(i.$$.fragment,r),r.forEach(m),this.h()},h:function(){U(n,"display","flex"),U(n,"flex-direction","row"),g(n,"class","svelte-103yabx")},m:function(e,c){v(e,n,c),R(o,n,null),E(n,t),R(i,n,null),r=!0},p:Y,i:function(e){r||(y(o.$$.fragment,e),y(i.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),w(i.$$.fragment,e),r=!1},d:function(e){e&&m(n),T(o),T(i)}}}function ke(e){var n,t,r,o,i,c,a=void 0!==e[8][e[0].type]&&$e(e);return{c:function(){n=d("div"),a&&a.c(),t=q(),r=d("div"),o=C(e[2]),i=C(" remaining"),this.h()},l:function(c){n=p(c,"DIV",{class:!0});var s=h(n);a&&a.l(s),s.forEach(m),t=x(c),r=p(c,"DIV",{class:!0});var l=h(r);o=S(l,e[2]),i=S(l," remaining"),l.forEach(m),this.h()},h:function(){g(n,"class","desc svelte-103yabx"),g(r,"class","pilecount svelte-103yabx")},m:function(e,s){v(e,n,s),a&&a.m(n,null),v(e,t,s),v(e,r,s),E(r,o),E(r,i),c=!0},p:function(e,t){void 0!==e[8][e[0].type]?a?(a.p(e,t),y(a,1)):((a=$e(e)).c(),y(a,1),a.m(n,null)):a&&(b(),w(a,1,1,function(){a=null}),z()),(!c||4&t)&&V(o,e[2])},i:function(e){c||(y(a),c=!0)},o:function(e){w(a),c=!1},d:function(e){e&&m(n),a&&a.d(),e&&m(t),e&&m(r)}}}function $e(e){for(var n,t,r,o,i=e[8][e[0].type].desc.action.split("<icon>"),c=[],a=0;a<i.length;a+=1)c[a]=Pe(me(e,i,a));for(var s=function(e){return w(c[e],1,1,function(){c[e]=null})},l=e[8][e[0].type].desc.role.split("<icon>"),u=[],f=0;f<l.length;f+=1)u[f]=Ee(he(e,l,f));var _=function(e){return w(u[e],1,1,function(){u[e]=null})};return{c:function(){n=d("p");for(var e=0;e<c.length;e+=1)c[e].c();t=q(),r=d("p");for(var o=0;o<u.length;o+=1)u[o].c();this.h()},l:function(e){n=p(e,"P",{class:!0});for(var o=h(n),i=0;i<c.length;i+=1)c[i].l(o);o.forEach(m),t=x(e),r=p(e,"P",{class:!0});for(var a=h(r),s=0;s<u.length;s+=1)u[s].l(a);a.forEach(m),this.h()},h:function(){g(n,"class","action svelte-103yabx"),g(r,"class","role svelte-103yabx")},m:function(e,i){v(e,n,i);for(var a=0;a<c.length;a+=1)c[a].m(n,null);v(e,t,i),v(e,r,i);for(var s=0;s<u.length;s+=1)u[s].m(r,null);o=!0},p:function(e,t){if(257&t){var o;for(i=e[8][e[0].type].desc.action.split("<icon>"),o=0;o<i.length;o+=1){var a=me(e,i,o);c[o]?(c[o].p(a,t),y(c[o],1)):(c[o]=Pe(a),c[o].c(),y(c[o],1),c[o].m(n,null))}for(b(),o=i.length;o<c.length;o+=1)s(o);z()}if(257&t){var f;for(l=e[8][e[0].type].desc.role.split("<icon>"),f=0;f<l.length;f+=1){var d=he(e,l,f);u[f]?(u[f].p(d,t),y(u[f],1)):(u[f]=Ee(d),u[f].c(),y(u[f],1),u[f].m(r,null))}for(b(),f=l.length;f<u.length;f+=1)_(f);z()}},i:function(e){if(!o){for(var n=0;n<i.length;n+=1)y(c[n]);for(var t=0;t<l.length;t+=1)y(u[t]);o=!0}},o:function(e){c=c.filter(Boolean);for(var n=0;n<c.length;n+=1)w(c[n]);u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)w(u[t]);o=!1},d:function(e){e&&m(n),k(c,e),e&&m(t),e&&m(r),k(u,e)}}}function qe(e){var n,t=e[15]+"";return{c:function(){n=C(t)},l:function(e){n=S(e,t)},m:function(e,t){v(e,n,t)},p:function(e,r){1&r&&t!==(t=e[15]+"")&&V(n,t)},i:Y,o:Y,d:function(e){e&&m(n)}}}function Ce(e){var n,t=new Q({props:{type:e[15],size:"sm"}});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.type=e[15]),t.$set(r)},i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}function Pe(e){var n,t,r,o,i,c=[Ce,qe],a=[];function s(e,t){return 1&t&&(n=!!["survey","warfare","colonize","research","produce","trade","politics"].includes(e[15])),n?0:1}return t=s(e,-1),r=a[t]=c[t](e),{c:function(){r.c(),o=_()},l:function(e){r.l(e),o=_()},m:function(e,n){a[t].m(e,n),v(e,o,n),i=!0},p:function(e,n){var i=t;(t=s(e,n))===i?a[t].p(e,n):(b(),w(a[i],1,1,function(){a[i]=null}),z(),(r=a[t])||(r=a[t]=c[t](e)).c(),y(r,1),r.m(o.parentNode,o))},i:function(e){i||(y(r),i=!0)},o:function(e){w(r),i=!1},d:function(e){a[t].d(e),e&&m(o)}}}function xe(e){var n,t=e[15]+"";return{c:function(){n=C(t)},l:function(e){n=S(e,t)},m:function(e,t){v(e,n,t)},p:function(e,r){1&r&&t!==(t=e[15]+"")&&V(n,t)},i:Y,o:Y,d:function(e){e&&m(n)}}}function Se(e){var n,t=new Q({props:{type:e[15],size:"sm"}});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.type=e[15]),t.$set(r)},i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}function Ee(e){var n,t,r,o,i,c=[Se,xe],a=[];function s(e,t){return 1&t&&(n=!!["survey","warfare","colonize","research","produce","trade","politics"].includes(e[15])),n?0:1}return t=s(e,-1),r=a[t]=c[t](e),{c:function(){r.c(),o=_()},l:function(e){r.l(e),o=_()},m:function(e,n){a[t].m(e,n),v(e,o,n),i=!0},p:function(e,n){var i=t;(t=s(e,n))===i?a[t].p(e,n):(b(),w(a[i],1,1,function(){a[i]=null}),z(),(r=a[t])||(r=a[t]=c[t](e)).c(),y(r,1),r.m(o.parentNode,o))},i:function(e){i||(y(r),i=!0)},o:function(e){w(r),i=!1},d:function(e){a[t].d(e),e&&m(o)}}}function Re(e){var n,t,r,o,i,c=[ye,ve,ge],a=[];function s(e,t){return"planet"==e[0].type||"advanced"==e[0].type||"metallic"==e[0].type||"fertile"==e[0].type?0:(1&t&&(n=!["survey","warfare","colonize","research","producetrade","politics"].includes(e[0].type)),n?1:2)}return t=s(e,-1),r=a[t]=c[t](e),{c:function(){r.c(),o=_()},l:function(e){r.l(e),o=_()},m:function(e,n){a[t].m(e,n),v(e,o,n),i=!0},p:function(e,n){var i=A(n,1)[0],l=t;(t=s(e,i))===l?a[t].p(e,i):(b(),w(a[l],1,1,function(){a[l]=null}),z(),(r=a[t])||(r=a[t]=c[t](e)).c(),y(r,1),r.m(o.parentNode,o))},i:function(e){i||(y(r),i=!0)},o:function(e){w(r),i=!1},d:function(e){a[t].d(e),e&&m(o)}}}function Ie(e,n,t){var r,o,i,c,a=n.card,s=n.selectable,l=void 0!==s&&s,u=n.pilecount,f=void 0===u?"":u,d=n.mini,p=void 0!==d&&d;return H(function(){t(0,a.type=a.type+"",a)}),e.$set=function(e){"card"in e&&t(0,a=e.card),"selectable"in e&&t(1,l=e.selectable),"pilecount"in e&&t(2,f=e.pilecount),"mini"in e&&t(3,p=e.mini)},e.$$.update=function(){33&e.$$.dirty&&(t(4,r=a.type.charAt(0).toUpperCase()+a.type.slice(1)),t(5,o={producetrade:!1,produce:"pro",trade:"trd",research:"res",politics:"pol",survey:"sur",warfare:"war",colonize:"col"}[a.type]),t(6,i=o?"color:var(--".concat(o,"-color);background-image:linear-gradient( rgb(80,80,80),  rgb(80,80,80) 5vh,  rgb(80,80,80) 5vh,  var(--").concat(o,"-color) 8vh,  var(--").concat(o,"-color) 8vh,  var(--").concat(o,"-color) 12vh,  var(--").concat(o,"-color) 12vh,  rgb(80,80,80) 16vh );"):"color:var(--pro-color);background-image:linear-gradient( rgb(80,80,80),  rgb(80,80,80) 5vh,  rgb(80,80,80) 5vh,  var(--pro-color) 8vh,  var(--pro-color) 8vh,  var(--trd-color) 12vh,  var(--trd-color) 12vh,  rgb(80,80,80) 16vh );"),t(7,c=o?"background-color: var(--".concat(o,"-color);"):"background: var(--pro-trd-clr);"))},[a,l,f,p,r,o,i,c,{survey:{desc:{role:"Look at <icon>survey<icon> -1 planet cards, keep 1 \n Leader: Look at 1 additional card",action:"Draw 3 cards"}},warfare:{desc:{role:"Collect 1 fighter per <icon>warfare<icon> \n Leader: May attack 1 planet instead",action:"Attack 1 planet OR collect 1 fighter"}},colonize:{desc:{action:"Settle 1 planet OR +1 colony",role:"+1 colony per <icon>colonize<icon> \n Leader: May settle 1 planet instead"}},producetrade:{desc:{action:"Produce 1 resource OR Trade 1 resource",role:"Produce 1 resource per <icon>produce<icon> OR Trade 1 resource per <icon>trade<icon> \n Leader: +<icon>produce<icon> OR <icon>trade<icon>"}},research:{desc:{action:"Remove up to 3 cards in your and from the game",role:"Aquire 1 technology card after satisfying <icon>research<icon> costs and planet requirements \n Leader: +<icon>research<icon>"}},politics:{desc:{action:"Remove tis card from the game. Place any 1 role card from the stacks into your hand",role:""}}},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)},function(n){j(e,n)}]}var De=function(e){o(t,u);var n=pe(t);function t(e){var r;return c(this,t),r=n.call(this),a(l(r),e,Ie,Re,s,{card:0,selectable:1,pilecount:2,mini:3}),r}return t}();function Ae(e){return function(){var n,t=G(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=G(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return L(this,n)}}function Oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oe(Object(t),!0).forEach(function(n){ne(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ve(e,n,t){var r=e.slice();return r[177]=n[t],r}function Te(e,n,t){var r=e.slice();return r[183]=n[t],r}function Me(e,n,t){var r=e.slice();return r[183]=n[t],r}function Ge(e,n,t){var r=e.slice();return r[188]=n[t],r}function Le(e,n,t){var r=e.slice();return r[188]=n[t],r}function je(e,n,t){var r=e.slice();return r[183]=n[t],r}function Ye(e,n,t){var r=e.slice();return r[183]=n[t],r}function He(e,n,t){var r=e.slice();return r[197]=n[t],r}function Ue(e,n,t){var r=e.slice();return r[180]=n[t],r}function Be(e,n,t){var r=e.slice();return r[174]=n[t],r}function Fe(e){var n,t,r,o,i=[en,Qe,Ze,Xe,Ke,Je,We],c=[];function a(e,n){return-4==e[0].currentphase?0:-3==e[0].currentphase?1:-2==e[0].currentphase?2:-1==e[0].currentphase?3:e[0].passtoplayer&&!e[1].online?4:e[0].winner?5:6}return n=a(e),t=c[n]=i[n](e),{c:function(){t.c(),r=_()},l:function(e){t.l(e),r=_()},m:function(e,t){c[n].m(e,t),v(e,r,t),o=!0},p:function(e,o){var s=n;(n=a(e))===s?c[n].p(e,o):(b(),w(c[s],1,1,function(){c[s]=null}),z(),(t=c[n])||(t=c[n]=i[n](e)).c(),y(t,1),t.m(r.parentNode,r))},i:function(e){o||(y(t),o=!0)},o:function(e){w(t),o=!1},d:function(e){c[n].d(e),e&&m(r)}}}function We(e){for(var n,t,r,o,i,c=e[0].players,a=[],s=0;s<c.length;s+=1)a[s]=_n(Ue(e,c,s));var l=function(e){return w(a[e],1,1,function(){a[e]=null})},u="options"==e[0].displayinfo.selectionzone&&bn(e);return{c:function(){n=d("div"),t=q(),r=d("div");for(var e=0;e<a.length;e+=1)a[e].c();o=q(),u&&u.c(),this.h()},l:function(e){n=p(e,"DIV",{class:!0}),h(n).forEach(m),t=x(e),r=p(e,"DIV",{id:!0,style:!0,class:!0});for(var i=h(r),c=0;c<a.length;c+=1)a[c].l(i);o=x(i),u&&u.l(i),i.forEach(m),this.h()},h:function(){g(n,"class","stars svelte-iqexfp"),g(r,"id","screen"),U(r,"height","100%"),U(r,"width","100%"),g(r,"class","flex svelte-iqexfp")},m:function(e,c){v(e,n,c),v(e,t,c),v(e,r,c);for(var s=0;s<a.length;s+=1)a[s].m(r,null);E(r,o),u&&u.m(r,null),i=!0},p:function(e,n){if(238075&n[0]){var t;for(c=e[0].players,t=0;t<c.length;t+=1){var i=Ue(e,c,t);a[t]?(a[t].p(i,n),y(a[t],1)):(a[t]=_n(i),a[t].c(),y(a[t],1),a[t].m(r,o))}for(b(),t=c.length;t<a.length;t+=1)l(t);z()}"options"==e[0].displayinfo.selectionzone?u?(u.p(e,n),y(u,1)):((u=bn(e)).c(),y(u,1),u.m(r,null)):u&&(b(),w(u,1,1,function(){u=null}),z())},i:function(e){if(!i){for(var n=0;n<c.length;n+=1)y(a[n]);y(u),i=!0}},o:function(e){a=a.filter(Boolean);for(var n=0;n<a.length;n+=1)w(a[n]);w(u),i=!1},d:function(e){e&&m(n),e&&m(t),e&&m(r),k(a,e),u&&u.d()}}}function Je(e){var n,t,r,o=e[0].winner+"";return{c:function(){n=d("div"),t=C(o),r=C(" WON!!!!"),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var i=h(n);t=S(i,o),r=S(i," WON!!!!"),i.forEach(m),this.h()},h:function(){g(n,"class","passtoplayer svelte-iqexfp")},m:function(e,o){v(e,n,o),E(n,t),E(n,r)},p:function(e,n){1&n[0]&&o!==(o=e[0].winner+"")&&V(t,o)},i:Y,o:Y,d:function(e){e&&m(n)}}}function Ke(e){var n,t,r;return{c:function(){n=d("div"),t=C("pass to next player"),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var r=h(n);t=S(r,"pass to next player"),r.forEach(m),this.h()},h:function(){g(n,"class","passtoplayer svelte-iqexfp")},m:function(o,i,c){v(o,n,i),E(n,t),c&&I(r),r=[D(n,"click",e[138]),D(n,"tap",e[139])]},p:Y,i:Y,o:Y,d:function(e){e&&m(n),I(r)}}}function Xe(e){for(var n,t,r,o,i=e[1].existinggames,c=[],a=0;a<i.length;a+=1)c[a]=$n(Be(e,i,a));return{c:function(){n=d("div"),t=d("p"),r=C("Choose a Game to Join"),o=q();for(var e=0;e<c.length;e+=1)c[e].c();this.h()},l:function(e){n=p(e,"DIV",{class:!0});var i=h(n);t=p(i,"P",{class:!0});var a=h(t);r=S(a,"Choose a Game to Join"),a.forEach(m),o=x(i);for(var s=0;s<c.length;s+=1)c[s].l(i);i.forEach(m),this.h()},h:function(){g(t,"class","svelte-iqexfp"),g(n,"class","playercountselector svelte-iqexfp")},m:function(e,i){v(e,n,i),E(n,t),E(t,r),E(n,o);for(var a=0;a<c.length;a+=1)c[a].m(n,null)},p:function(e,t){if(4098&t[0]){var r;for(i=e[1].existinggames,r=0;r<i.length;r+=1){var o=Be(e,i,r);c[r]?c[r].p(o,t):(c[r]=$n(o),c[r].c(),c[r].m(n,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=i.length}},i:Y,o:Y,d:function(e){e&&m(n),k(c,e)}}}function Ze(e){var n,t,r,o,i,c,a,s,l,u,f,y,_;return{c:function(){n=d("div"),t=d("p"),r=C("Choose your Game's number of Players"),o=q(),i=d("p"),c=C("2"),a=q(),s=d("p"),l=C("3"),u=q(),f=d("p"),y=C("4"),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var d=h(n);t=p(d,"P",{class:!0});var g=h(t);r=S(g,"Choose your Game's number of Players"),g.forEach(m),o=x(d),i=p(d,"P",{class:!0});var v=h(i);c=S(v,"2"),v.forEach(m),a=x(d),s=p(d,"P",{class:!0});var _=h(s);l=S(_,"3"),_.forEach(m),u=x(d),f=p(d,"P",{class:!0});var b=h(f);y=S(b,"4"),b.forEach(m),d.forEach(m),this.h()},h:function(){g(t,"class","svelte-iqexfp"),g(i,"class","svelte-iqexfp"),g(s,"class","svelte-iqexfp"),g(f,"class","svelte-iqexfp"),g(n,"class","playercountselector svelte-iqexfp")},m:function(d,p,h){v(d,n,p),E(n,t),E(t,r),E(n,o),E(n,i),E(i,c),E(n,a),E(n,s),E(s,l),E(n,u),E(n,f),E(f,y),h&&I(_),_=[D(i,"click",e[130]),D(i,"tap",e[131]),D(s,"click",e[132]),D(s,"tap",e[133]),D(f,"click",e[134]),D(f,"tap",e[135])]},p:Y,i:Y,o:Y,d:function(e){e&&m(n),I(_)}}}function Qe(e){var n,t,r,o,i,c,a,s,l,u;return{c:function(){n=d("div"),t=d("p"),r=C("Start a New Online Game"),o=q(),i=d("p"),c=C("Join an Existing Online Game"),a=q(),s=d("p"),l=C("Start a New Offline Game"),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var u=h(n);t=p(u,"P",{class:!0});var f=h(t);r=S(f,"Start a New Online Game"),f.forEach(m),o=x(u),i=p(u,"P",{class:!0});var d=h(i);c=S(d,"Join an Existing Online Game"),d.forEach(m),a=x(u),s=p(u,"P",{class:!0});var g=h(s);l=S(g,"Start a New Offline Game"),g.forEach(m),u.forEach(m),this.h()},h:function(){g(t,"class","svelte-iqexfp"),g(i,"class","svelte-iqexfp"),g(s,"class","svelte-iqexfp"),g(n,"class","playercountselector svelte-iqexfp")},m:function(f,d,p){v(f,n,d),E(n,t),E(t,r),E(n,o),E(n,i),E(i,c),E(n,a),E(n,s),E(s,l),p&&I(u),u=[D(t,"click",e[124]),D(t,"tap",e[125]),D(i,"click",e[126]),D(i,"tap",e[127]),D(s,"click",e[128]),D(s,"tap",e[129])]},p:Y,i:Y,o:Y,d:function(e){e&&m(n),I(u)}}}function en(e){var n,t,r,o,i,c,a,s,l;return{c:function(){n=d("div"),t=d("p"),r=C("Choose your Screen Name"),o=q(),i=d("input"),c=q(),a=d("p"),s=C("Finished"),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var l=h(n);t=p(l,"P",{class:!0});var u=h(t);r=S(u,"Choose your Screen Name"),u.forEach(m),o=x(l),i=p(l,"INPUT",{type:!0,class:!0}),c=x(l),a=p(l,"P",{class:!0});var f=h(a);s=S(f,"Finished"),f.forEach(m),l.forEach(m),this.h()},h:function(){g(t,"class","svelte-iqexfp"),g(i,"type","text"),g(i,"class","svelte-iqexfp"),g(a,"class","svelte-iqexfp"),g(n,"class","playercountselector svelte-iqexfp")},m:function(u,f,d){v(u,n,f),E(n,t),E(t,r),E(n,o),E(n,i),K(i,e[1].screenname),E(n,c),E(n,a),E(a,s),d&&I(l),l=[D(i,"input",e[120]),D(i,"keypress",e[121]),D(a,"click",e[122]),D(a,"tap",e[123])]},p:function(e,n){2&n[0]&&i.value!==e[1].screenname&&K(i,e[1].screenname)},i:Y,o:Y,d:function(e){e&&m(n),I(l)}}}function nn(e){for(var n,t,r,o,i,c,a,s,l,u,f,_,$,P,R,A,O,N,T,M,G,L,j,Y,H,U,B,W,J,K,Z,Q,ee,ne=e[0].displayinfo.center_or_planets?"planets":"center row",te=[],re=new Map,oe=e[0].messagetoplayer[e[0].messagetoplayer.length-1]+"",ie=e[180].deck.length+"",ce=[],ae=new Map,se=e[180].discard.length+"",le=e[0].players,ue=[],fe=0;fe<le.length;fe+=1)ue[fe]=tn(He(e,le,fe));var de=[on,rn],pe=[];function he(e,n){return"research"==e[0].displayinfo.selectionzone?0:e[0].displayinfo.center_or_planets?1:-1}~(u=he(e))&&(f=pe[u]=de[u](e));var me=!e[0].displayinfo.center_or_planets&&sn(e);function ge(e,n){return e[0].displayinfo.showoptiontoskip?dn:fn}for(var ve=ge(e),ye=ve(e),_e=e[0].players[e[0].acting_player_index].limbo,be=function(e){return e[183].id},we=0;we<_e.length;we+=1){var ze=Me(e,_e,we),ke=be(ze);re.set(ke,te[we]=pn(ke,ze))}function $e(e,n){return e[0].passp?vn:e[0].passt?gn:e[0].displayinfo.allowformultipleselections&&e[0].choices.length>0?mn:hn}for(var qe=$e(e),Ce=qe(e),Pe=e[180].hand,xe=function(e){return e[183].id},Se=0;Se<Pe.length;Se+=1){var Ee=Te(e,Pe,Se),Re=xe(Ee);ae.set(Re,ce[Se]=yn(Re,Ee))}return{c:function(){n=d("div"),t=d("div"),r=q(),o=d("div");for(var e=0;e<ue.length;e+=1)ue[e].c();i=q(),c=d("div"),a=C("show "),s=C(ne),l=q(),f&&f.c(),_=q(),me&&me.c(),$=q(),P=d("div"),ye.c(),R=q();for(var u=0;u<te.length;u+=1)te[u].c();A=q(),Ce.c(),O=q(),N=d("div"),T=C(oe),M=q(),G=d("div"),L=d("div"),j=C("cards remaining in deck: "),Y=C(ie),H=q(),U=d("div");for(var p=0;p<ce.length;p+=1)ce[p].c();B=q(),W=d("div"),J=C("cards in discard pile: "),K=C(se),Z=q(),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var u=h(n);t=p(u,"DIV",{id:!0,class:!0}),h(t).forEach(m),r=x(u),o=p(u,"DIV",{class:!0});for(var d=h(o),g=0;g<ue.length;g+=1)ue[g].l(d);d.forEach(m),i=x(u),c=p(u,"DIV",{class:!0});var v=h(c);a=S(v,"show "),s=S(v,ne),v.forEach(m),l=x(u),f&&f.l(u),_=x(u),me&&me.l(u),$=x(u),P=p(u,"DIV",{id:!0,class:!0});var y=h(P);ye.l(y),R=x(y);for(var b=0;b<te.length;b+=1)te[b].l(y);A=x(y),Ce.l(y),y.forEach(m),O=x(u),N=p(u,"DIV",{class:!0});var w=h(N);T=S(w,oe),w.forEach(m),M=x(u),G=p(u,"DIV",{class:!0});var z=h(G);L=p(z,"DIV",{class:!0});var k=h(L);j=S(k,"cards remaining in deck: "),Y=S(k,ie),k.forEach(m),H=x(z),U=p(z,"DIV",{class:!0});for(var q=h(U),C=0;C<ce.length;C+=1)ce[C].l(q);q.forEach(m),B=x(z),W=p(z,"DIV",{class:!0});var E=h(W);J=S(E,"cards in discard pile: "),K=S(E,se),E.forEach(m),z.forEach(m),Z=x(u),u.forEach(m),this.h()},h:function(){g(t,"id","dragged"),g(t,"class","svelte-iqexfp"),g(o,"class","playerinfo bordered svelte-iqexfp"),g(c,"class","svelte-iqexfp"),g(P,"id","playedcards"),g(P,"class","flex zone playedcards svelte-iqexfp"),g(N,"class","messagetoplayer bordered svelte-iqexfp"),g(L,"class","bordered deck svelte-iqexfp"),g(U,"class","hand svelte-iqexfp"),g(W,"class","bordered discard svelte-iqexfp"),g(G,"class","flex zone ownedcards svelte-iqexfp"),g(n,"class","bordered playingfield svelte-iqexfp")},m:function(f,d,p){v(f,n,d),E(n,t),E(n,r),E(n,o);for(var h=0;h<ue.length;h+=1)ue[h].m(o,null);E(n,i),E(n,c),E(c,a),E(c,s),E(n,l),~u&&pe[u].m(n,null),E(n,_),me&&me.m(n,null),E(n,$),E(n,P),ye.m(P,null),E(P,R);for(var m=0;m<te.length;m+=1)te[m].m(P,null);E(P,A),Ce.m(P,null),E(n,O),E(n,N),E(N,T),E(n,M),E(n,G),E(G,L),E(L,j),E(L,Y),E(G,H),E(G,U);for(var g=0;g<ce.length;g+=1)ce[g].m(U,null);E(G,B),E(G,W),E(W,J),E(W,K),E(n,Z),Q=!0,p&&I(ee),ee=[D(c,"click",e[140]),D(c,"tap",e[141])]},p:function(e,t){if(1&t[0]){var r;for(le=e[0].players,r=0;r<le.length;r+=1){var i=He(e,le,r);ue[r]?ue[r].p(i,t):(ue[r]=tn(i),ue[r].c(),ue[r].m(o,null))}for(;r<ue.length;r+=1)ue[r].d(1);ue.length=le.length}(!Q||1&t[0])&&ne!==(ne=e[0].displayinfo.center_or_planets?"planets":"center row")&&V(s,ne);var c=u;if((u=he(e))===c?~u&&pe[u].p(e,t):(f&&(b(),w(pe[c],1,1,function(){pe[c]=null}),z()),~u?((f=pe[u])||(f=pe[u]=de[u](e)).c(),y(f,1),f.m(n,_)):f=null),e[0].displayinfo.center_or_planets?me&&(b(),w(me,1,1,function(){me=null}),z()):me?(me.p(e,t),y(me,1)):((me=sn(e)).c(),y(me,1),me.m(n,$)),ve===(ve=ge(e))&&ye?ye.p(e,t):(ye.d(1),(ye=ve(e))&&(ye.c(),ye.m(P,R))),65&t[0]){var a=e[0].players[e[0].acting_player_index].limbo;b(),te=F(te,t,be,1,e,a,re,P,X,pn,A,Me),z()}if(qe===(qe=$e(e))&&Ce?Ce.p(e,t):(Ce.d(1),(Ce=qe(e))&&(Ce.c(),Ce.m(P,null))),(!Q||1&t[0])&&oe!==(oe=e[0].messagetoplayer[e[0].messagetoplayer.length-1]+"")&&V(T,oe),(!Q||1&t[0])&&ie!==(ie=e[180].deck.length+"")&&V(Y,ie),229401&t[0]){var l=e[180].hand;b(),ce=F(ce,t,xe,1,e,l,ae,U,X,yn,null,Te),z()}(!Q||1&t[0])&&se!==(se=e[180].discard.length+"")&&V(K,se)},i:function(e){if(!Q){y(f),y(me);for(var n=0;n<_e.length;n+=1)y(te[n]);for(var t=0;t<Pe.length;t+=1)y(ce[t]);Q=!0}},o:function(e){w(f),w(me);for(var n=0;n<te.length;n+=1)w(te[n]);for(var t=0;t<ce.length;t+=1)w(ce[t]);Q=!1},d:function(e){e&&m(n),k(ue,e),~u&&pe[u].d(),me&&me.d(),ye.d();for(var t=0;t<te.length;t+=1)te[t].d();Ce.d();for(var r=0;r<ce.length;r+=1)ce[r].d();I(ee)}}}function tn(e){var n,t,r,o,i,c,a,s,l,u,f,y,_,b=e[197].starfighters.small+"",w=e[197].influence.length+"",z=e[197].name+"";return{c:function(){n=d("div"),t=d("div"),r=C("Military Might "),o=C(b),i=q(),c=d("div"),a=C("Galactic Influence "),s=C(w),l=q(),u=d("div"),f=C(z),y=q(),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var d=h(n);t=p(d,"DIV",{style:!0,class:!0});var g=h(t);r=S(g,"Military Might "),o=S(g,b),g.forEach(m),i=x(d),c=p(d,"DIV",{style:!0,class:!0});var v=h(c);a=S(v,"Galactic Influence "),s=S(v,w),v.forEach(m),l=x(d),u=p(d,"DIV",{style:!0,class:!0});var _=h(u);f=S(_,z),_.forEach(m),y=x(d),d.forEach(m),this.h()},h:function(){U(t,"width","33%"),U(t,"text-align","center"),g(t,"class","bordered svelte-iqexfp"),U(c,"width","33%"),U(c,"text-align","center"),g(c,"class","bordered svelte-iqexfp"),U(u,"width","33%"),U(u,"text-align","center"),g(u,"class","bordered svelte-iqexfp"),U(n,"width",100/e[0].number_of_players+"%"),g(n,"class",_="flex "+(void 0!==e[0].players[e[0].acting_player_index]&&e[197].name==e[0].players[e[0].acting_player_index].name?"selectable":"bordered")+" svelte-iqexfp")},m:function(e,d){v(e,n,d),E(n,t),E(t,r),E(t,o),E(n,i),E(n,c),E(c,a),E(c,s),E(n,l),E(n,u),E(u,f),E(n,y)},p:function(e,t){1&t[0]&&b!==(b=e[197].starfighters.small+"")&&V(o,b),1&t[0]&&w!==(w=e[197].influence.length+"")&&V(s,w),1&t[0]&&z!==(z=e[197].name+"")&&V(f,z),1&t[0]&&U(n,"width",100/e[0].number_of_players+"%"),1&t[0]&&_!==(_="flex "+(void 0!==e[0].players[e[0].acting_player_index]&&e[197].name==e[0].players[e[0].acting_player_index].name?"selectable":"bordered")+" svelte-iqexfp")&&g(n,"class",_)},d:function(e){e&&m(n)}}}function rn(e){for(var n,t,r=[],o=new Map,i=e[0].stacks.rolecards,c=function(e){return e[183].name},a=0;a<i.length;a+=1){var s=je(e,i,a),l=c(s);o.set(l,r[a]=cn(l,s))}return{c:function(){n=d("div");for(var e=0;e<r.length;e+=1)r[e].c();this.h()},l:function(e){n=p(e,"DIV",{class:!0});for(var t=h(n),o=0;o<r.length;o+=1)r[o].l(t);t.forEach(m),this.h()},h:function(){g(n,"class","flex zone centerrow svelte-iqexfp")},m:function(e,o){v(e,n,o);for(var i=0;i<r.length;i+=1)r[i].m(n,null);t=!0},p:function(e,t){if(229393&t[0]){var i=e[0].stacks.rolecards;b(),r=F(r,t,c,1,e,i,o,n,X,cn,null,je),z()}},i:function(e){if(!t){for(var n=0;n<i.length;n+=1)y(r[n]);t=!0}},o:function(e){for(var n=0;n<r.length;n+=1)w(r[n]);t=!1},d:function(e){e&&m(n);for(var t=0;t<r.length;t+=1)r[t].d()}}}function on(e){for(var n,t,r=[],o=new Map,i=e[0].research_deck,c=function(e){return e[183].id},a=0;a<i.length;a+=1){var s=Ye(e,i,a),l=c(s);o.set(l,r[a]=an(l,s))}return{c:function(){n=d("div");for(var e=0;e<r.length;e+=1)r[e].c();this.h()},l:function(e){n=p(e,"DIV",{class:!0});for(var t=h(n),o=0;o<r.length;o+=1)r[o].l(t);t.forEach(m),this.h()},h:function(){g(n,"class","zone researchrow svelte-iqexfp")},m:function(e,o){v(e,n,o);for(var i=0;i<r.length;i+=1)r[i].m(n,null);t=!0},p:function(e,t){if(17&t[0]){var i=e[0].research_deck;b(),r=F(r,t,c,1,e,i,o,n,X,an,null,Ye),z()}},i:function(e){if(!t){for(var n=0;n<i.length;n+=1)y(r[n]);t=!0}},o:function(e){for(var n=0;n<r.length;n+=1)w(r[n]);t=!1},d:function(e){e&&m(n);for(var t=0;t<r.length;t+=1)r[t].d()}}}function cn(e,n){var t,r;var o=new De({props:{card:n[183],selectable:"rolecards"==n[0].displayinfo.selectionzone,pilecount:n[0].stacks.pilecount[n[183].type]}});return o.$on("click",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[144].apply(e,[n[183]].concat(r))}),o.$on("tap",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[145].apply(e,[n[183]].concat(r))}),o.$on("touchmove",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[146].apply(e,[n[183]].concat(r))}),o.$on("touchstart",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[147].apply(e,[n[183]].concat(r))}),o.$on("touchend",n[148]),{key:e,first:null,c:function(){t=_(),$(o.$$.fragment),this.h()},l:function(e){t=_(),P(o.$$.fragment,e),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),R(o,e,n),r=!0},p:function(e,t){n=e;var r={};1&t[0]&&(r.card=n[183]),1&t[0]&&(r.selectable="rolecards"==n[0].displayinfo.selectionzone),1&t[0]&&(r.pilecount=n[0].stacks.pilecount[n[183].type]),o.$set(r)},i:function(e){r||(y(o.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),r=!1},d:function(e){e&&m(t),T(o,e)}}}function an(e,n){var t,r;var o=new De({props:{selectable:"research"==n[0].displayinfo.selectionzone,card:n[183]}});return o.$on("click",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[142].apply(e,[n[183]].concat(r))}),o.$on("tap",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[143].apply(e,[n[183]].concat(r))}),{key:e,first:null,c:function(){t=_(),$(o.$$.fragment),this.h()},l:function(e){t=_(),P(o.$$.fragment,e),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),R(o,e,n),r=!0},p:function(e,t){n=e;var r={};1&t[0]&&(r.selectable="research"==n[0].displayinfo.selectionzone),1&t[0]&&(r.card=n[183]),o.$set(r)},i:function(e){r||(y(o.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),r=!1},d:function(e){e&&m(t),T(o,e)}}}function sn(e){for(var n,t,r,o=[],i=new Map,c=[],a=new Map,s=e[180].unsettled_planets,l=function(e){return e[188].id},u=0;u<s.length;u+=1){var f=Le(e,s,u),_=l(f);i.set(_,o[u]=ln(_,f))}for(var k=[].concat(W(e[180].settled_planets),W(e[180].conquered_planets)),$=function(e){return e[188].id},C=0;C<k.length;C+=1){var P=Ge(e,k,C),S=$(P);a.set(S,c[C]=un(S,P))}return{c:function(){n=d("div");for(var e=0;e<o.length;e+=1)o[e].c();t=q();for(var r=0;r<c.length;r+=1)c[r].c();this.h()},l:function(e){n=p(e,"DIV",{class:!0});for(var r=h(n),i=0;i<o.length;i+=1)o[i].l(r);t=x(r);for(var a=0;a<c.length;a+=1)c[a].l(r);r.forEach(m),this.h()},h:function(){g(n,"class","flex zone centerrow svelte-iqexfp")},m:function(e,i){v(e,n,i);for(var a=0;a<o.length;a+=1)o[a].m(n,null);E(n,t);for(var s=0;s<c.length;s+=1)c[s].m(n,null);r=!0},p:function(e,r){if(17&r[0]){var s=e[180].unsettled_planets;b(),o=F(o,r,l,1,e,s,i,n,X,ln,t,Le),z()}if(17&r[0]){var u=[].concat(W(e[180].settled_planets),W(e[180].conquered_planets));b(),c=F(c,r,$,1,e,u,a,n,X,un,null,Ge),z()}},i:function(e){if(!r){for(var n=0;n<s.length;n+=1)y(o[n]);for(var t=0;t<k.length;t+=1)y(c[t]);r=!0}},o:function(e){for(var n=0;n<o.length;n+=1)w(o[n]);for(var t=0;t<c.length;t+=1)w(c[t]);r=!1},d:function(e){e&&m(n);for(var t=0;t<o.length;t+=1)o[t].d();for(var r=0;r<c.length;r+=1)c[r].d()}}}function ln(e,n){var t,r;var o=new ee({props:{planet:n[188]}});return o.$on("click",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[149].apply(e,[n[188]].concat(r))}),o.$on("tap",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[150].apply(e,[n[188]].concat(r))}),{key:e,first:null,c:function(){t=_(),$(o.$$.fragment),this.h()},l:function(e){t=_(),P(o.$$.fragment,e),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),R(o,e,n),r=!0},p:function(e,t){n=e;var r={};1&t[0]&&(r.planet=n[188]),o.$set(r)},i:function(e){r||(y(o.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),r=!1},d:function(e){e&&m(t),T(o,e)}}}function un(e,n){var t,r;var o=new ee({props:{planet:n[188],selected:"settled_&_conquered_planets"==n[0].displayinfo.selectionzone}});return o.$on("click",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[151].apply(e,[n[188]].concat(r))}),o.$on("tap",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[152].apply(e,[n[188]].concat(r))}),{key:e,first:null,c:function(){t=_(),$(o.$$.fragment),this.h()},l:function(e){t=_(),P(o.$$.fragment,e),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),R(o,e,n),r=!0},p:function(e,t){n=e;var r={};1&t[0]&&(r.planet=n[188]),1&t[0]&&(r.selected="settled_&_conquered_planets"==n[0].displayinfo.selectionzone),o.$set(r)},i:function(e){r||(y(o.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),r=!1},d:function(e){e&&m(t),T(o,e)}}}function fn(e){var n,t;return{c:function(){n=d("div"),t=C("[____]"),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var r=h(n);t=S(r,"[____]"),r.forEach(m),this.h()},h:function(){U(n,"margin-right","auto"),g(n,"class","bordered pass svelte-iqexfp")},m:function(e,r){v(e,n,r),E(n,t)},p:Y,d:function(e){e&&m(n)}}}function dn(e){var n,t,r;return{c:function(){n=d("div"),t=C("[Choose None]"),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var r=h(n);t=S(r,"[Choose None]"),r.forEach(m),this.h()},h:function(){U(n,"margin-right","auto"),g(n,"class","selectable pass svelte-iqexfp")},m:function(o,i,c){v(o,n,i),E(n,t),c&&I(r),r=[D(n,"click",e[153]),D(n,"tap",e[154])]},p:Y,d:function(e){e&&m(n),I(r)}}}function pn(e,n){var t,r;var o=new De({props:{mini:!0,card:n[183]}});return o.$on("click",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[155].apply(e,[n[183]].concat(r))}),o.$on("tap",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[156].apply(e,[n[183]].concat(r))}),{key:e,first:null,c:function(){t=_(),$(o.$$.fragment),this.h()},l:function(e){t=_(),P(o.$$.fragment,e),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),R(o,e,n),r=!0},p:function(e,t){n=e;var r={};1&t[0]&&(r.card=n[183]),o.$set(r)},i:function(e){r||(y(o.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),r=!1},d:function(e){e&&m(t),T(o,e)}}}function hn(e){var n,t;return{c:function(){n=d("div"),t=C("[______]"),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var r=h(n);t=S(r,"[______]"),r.forEach(m),this.h()},h:function(){g(n,"class","bordered pass svelte-iqexfp")},m:function(e,r){v(e,n,r),E(n,t)},p:Y,d:function(e){e&&m(n)}}}function mn(e){var n,t,r;return{c:function(){n=d("div"),t=C("[Choose Selected]"),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var r=h(n);t=S(r,"[Choose Selected]"),r.forEach(m),this.h()},h:function(){U(n,"margin-left","auto"),g(n,"class","selectable pass svelte-iqexfp")},m:function(o,i,c){v(o,n,i),E(n,t),c&&I(r),r=[D(n,"click",e[161]),D(n,"tap",e[162])]},p:Y,d:function(e){e&&m(n),I(r)}}}function gn(e){var n,t,r;return{c:function(){n=d("div"),t=C("[End Turn]"),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var r=h(n);t=S(r,"[End Turn]"),r.forEach(m),this.h()},h:function(){U(n,"margin-left","auto"),g(n,"class","selectable pass svelte-iqexfp")},m:function(o,i,c){v(o,n,i),E(n,t),c&&I(r),r=[D(n,"click",e[159]),D(n,"tap",e[160])]},p:Y,d:function(e){e&&m(n),I(r)}}}function vn(e){var n,t,r,o,i;return{c:function(){n=d("div"),t=C("[Pass to "),r=d("br"),o=C(" Next Player]"),this.h()},l:function(e){n=p(e,"DIV",{style:!0,class:!0});var i=h(n);t=S(i,"[Pass to "),r=p(i,"BR",{class:!0}),o=S(i," Next Player]"),i.forEach(m),this.h()},h:function(){g(r,"class","svelte-iqexfp"),U(n,"margin-left","auto"),g(n,"class","selectable pass svelte-iqexfp")},m:function(c,a,s){v(c,n,a),E(n,t),E(n,r),E(n,o),s&&I(i),i=[D(n,"click",e[157]),D(n,"tap",e[158])]},p:Y,d:function(e){e&&m(n),I(i)}}}function yn(e,n){var t,r;var o=new De({props:{card:n[183],mini:!0,selectable:"hand"==n[0].displayinfo.selectionzone}});return o.$on("touchstart",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[163].apply(e,[n[183]].concat(r))}),o.$on("touchend",n[164]),o.$on("touchmove",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[165].apply(e,[n[183]].concat(r))}),o.$on("click",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[166].apply(e,[n[183]].concat(r))}),o.$on("tap",function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[167].apply(e,[n[183]].concat(r))}),{key:e,first:null,c:function(){t=_(),$(o.$$.fragment),this.h()},l:function(e){t=_(),P(o.$$.fragment,e),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),R(o,e,n),r=!0},p:function(e,t){n=e;var r={};1&t[0]&&(r.card=n[183]),1&t[0]&&(r.selectable="hand"==n[0].displayinfo.selectionzone),o.$set(r)},i:function(e){r||(y(o.$$.fragment,e),r=!0)},o:function(e){w(o.$$.fragment,e),r=!1},d:function(e){e&&m(t),T(o,e)}}}function _n(e){var n,t,r=void 0!==e[0].players[e[0].acting_player_index]&&(e[1].screenname==e[180].name&&e[1].online||e[0].players[e[0].acting_player_index].id==e[180].id&&!e[1].online)&&nn(e);return{c:function(){r&&r.c(),n=_()},l:function(e){r&&r.l(e),n=_()},m:function(e,o){r&&r.m(e,o),v(e,n,o),t=!0},p:function(e,t){void 0!==e[0].players[e[0].acting_player_index]&&(e[1].screenname==e[180].name&&e[1].online||e[0].players[e[0].acting_player_index].id==e[180].id&&!e[1].online)?r?(r.p(e,t),y(r,1)):((r=nn(e)).c(),y(r,1),r.m(n.parentNode,n)):r&&(b(),w(r,1,1,function(){r=null}),z())},i:function(e){t||(y(r),t=!0)},o:function(e){w(r),t=!1},d:function(e){r&&r.d(e),e&&m(n)}}}function bn(e){for(var n,t,r,o=[],i=new Map,c=e[0].options,a=function(e){return e[177].name},s=0;s<c.length;s+=1){var l=Ve(e,c,s),u=a(l);i.set(u,o[s]=kn(u,l))}return{c:function(){n=d("div");for(var e=0;e<o.length;e+=1)o[e].c();this.h()},l:function(e){n=p(e,"DIV",{class:!0});for(var t=h(n),r=0;r<o.length;r+=1)o[r].l(t);t.forEach(m),this.h()},h:function(){g(n,"class",t=J(void 0!==e[0].options[0]&&void 0!==e[0].options[0].type?"talloptions":"options")+" svelte-iqexfp")},m:function(e,t){v(e,n,t);for(var i=0;i<o.length;i+=1)o[i].m(n,null);r=!0},p:function(e,c){if(17&c[0]){var s=e[0].options;b(),o=F(o,c,a,1,e,s,i,n,X,kn,null,Ve),z()}(!r||1&c[0]&&t!==(t=J(void 0!==e[0].options[0]&&void 0!==e[0].options[0].type?"talloptions":"options")+" svelte-iqexfp"))&&g(n,"class",t)},i:function(e){if(!r){for(var n=0;n<c.length;n+=1)y(o[n]);r=!0}},o:function(e){for(var n=0;n<o.length;n+=1)w(o[n]);r=!1},d:function(e){e&&m(n);for(var t=0;t<o.length;t+=1)o[t].d()}}}function wn(e){var n,t,r,o,i,c=e[177].name+"";function a(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[172].apply(n,[e[177]].concat(r))}function s(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[173].apply(n,[e[177]].concat(r))}return{c:function(){n=d("div"),t=C(c),r=q(),this.h()},l:function(e){n=p(e,"DIV",{class:!0});var o=h(n);t=S(o,c),r=x(o),o.forEach(m),this.h()},h:function(){g(n,"class",o="pass "+("options"==e[0].displayinfo.selectionzone?e[177].selected?"selected":"selectable":"bordered")+" svelte-iqexfp")},m:function(e,o,c){v(e,n,o),E(n,t),E(n,r),c&&I(i),i=[D(n,"click",a),D(n,"tap",s)]},p:function(r,i){e=r,1&i[0]&&c!==(c=e[177].name+"")&&V(t,c),1&i[0]&&o!==(o="pass "+("options"==e[0].displayinfo.selectionzone?e[177].selected?"selected":"selectable":"bordered")+" svelte-iqexfp")&&g(n,"class",o)},i:Y,o:Y,d:function(e){e&&m(n),I(i)}}}function zn(e){var n,t;var r=new ee({props:{planet:e[177],selectable:"options"==e[0].displayinfo.selectionzone}});r.$on("click",function(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[168].apply(n,[e[177]].concat(r))}),r.$on("tap",function(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[169].apply(n,[e[177]].concat(r))});var o=new ee({props:{planet:Ne({},e[177],{settled:!0}),selectable:"options"==e[0].displayinfo.selectionzone}});return o.$on("click",function(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[170].apply(n,[e[177]].concat(r))}),o.$on("tap",function(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[171].apply(n,[e[177]].concat(r))}),{c:function(){$(r.$$.fragment),n=q(),$(o.$$.fragment)},l:function(e){P(r.$$.fragment,e),n=x(e),P(o.$$.fragment,e)},m:function(e,i){R(r,e,i),v(e,n,i),R(o,e,i),t=!0},p:function(n,t){e=n;var i={};1&t[0]&&(i.planet=e[177]),1&t[0]&&(i.selectable="options"==e[0].displayinfo.selectionzone),r.$set(i);var c={};1&t[0]&&(c.planet=Ne({},e[177],{settled:!0})),1&t[0]&&(c.selectable="options"==e[0].displayinfo.selectionzone),o.$set(c)},i:function(e){t||(y(r.$$.fragment,e),y(o.$$.fragment,e),t=!0)},o:function(e){w(r.$$.fragment,e),w(o.$$.fragment,e),t=!1},d:function(e){T(r,e),e&&m(n),T(o,e)}}}function kn(e,n){var t,r,o,i,c,a=[zn,wn],s=[];function l(e,n){return void 0!==e[177].type?0:1}return r=l(n),o=s[r]=a[r](n),{key:e,first:null,c:function(){t=_(),o.c(),i=_(),this.h()},l:function(e){t=_(),o.l(e),i=_(),this.h()},h:function(){this.first=t},m:function(e,n){v(e,t,n),s[r].m(e,n),v(e,i,n),c=!0},p:function(e,n){var t=r;(r=l(e))===t?s[r].p(e,n):(b(),w(s[t],1,1,function(){s[t]=null}),z(),(o=s[r])||(o=s[r]=a[r](e)).c(),y(o,1),o.m(i.parentNode,i))},i:function(e){c||(y(o),c=!0)},o:function(e){w(o),c=!1},d:function(e){e&&m(t),s[r].d(e),e&&m(i)}}}function $n(e){var n,t,r,o=e[174].label+"'s Game";function i(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[136].apply(n,[e[174]].concat(r))}function c(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e)[137].apply(n,[e[174]].concat(r))}return{c:function(){n=d("p"),t=C(o),this.h()},l:function(e){n=p(e,"P",{class:!0});var r=h(n);t=S(r,o),r.forEach(m),this.h()},h:function(){g(n,"class","svelte-iqexfp")},m:function(e,o,a){v(e,n,o),E(n,t),a&&I(r),r=[D(n,"click",i),D(n,"tap",c)]},p:function(n,r){e=n,2&r[0]&&o!==(o=e[174].label+"'s Game")&&V(t,o)},d:function(e){e&&m(n),I(r)}}}function qn(e){var n,t,r=e[2]&&Fe(e);return{c:function(){r&&r.c(),n=_()},l:function(e){r&&r.l(e),n=_()},m:function(e,o){r&&r.m(e,o),v(e,n,o),t=!0},p:function(e,t){e[2]?r?(r.p(e,t),y(r,1)):((r=Fe(e)).c(),y(r,1),r.m(n.parentNode,n)):r&&(b(),w(r,1,1,function(){r=null}),z())},i:function(e){t||(y(r),t=!0)},o:function(e){w(r),t=!1},d:function(e){r&&r.d(e),e&&m(n)}}}function Cn(e,n,t){var r,o,c,a,s,l=this,u=arguments,f=!1,d=JSON.stringify,p=JSON.parse,h=console.log;H(function(){}),B(function(){console.log(q())}),M(function(){c=[{actn:[I("Choose between Settling or Colonizing a Planet",["colonize"],x(["Colonize","Settle Colonies"])),I("Choose an Unsettled Planet to Settle",["colonize"],function(){return pe(!1,!1,["unsettled_planets"],"subchoices")},["Settle Colonies"]),I("Settling your Planet",["colonize"],function(){return xe(z(),q())},["Settle Colonies"]),I("Choose an Unsettled Planet to Colonize",["colonize"],function(){return pe(!1,!1,["unsettled_planets"],"subchoices")},["Colonize"]),I("Colonizing your Planet",["colonize"],function(){Te(z(),q().limbo,q().limbo.filter(function(e){return"colonize"==e.type})[0]),$(!0)},["Colonize"])],lead:[D("Choose between Settling or Colonizing a Planet",["colonize"],x(["Colonize","Settle Colonies"])),D("Choose an Unsettled Planet to Settle",["colonize"],function(){return g()},["Settle Colonies"]),D("Settling your Planet",["colonize"],function(){xe(z(),q()),$()},["Settle Colonies"]),D("Choose an Unsettled Planet to Colonize",["colonize"],function(){return g()},["Colonize"]),D("Colonizing your Planet",["colonize"],function(){"Skip"==z().name&&$();var e=z();e.hosted_colonies.reduce(function(e,n){return e+n.icons.colonize},0)>=e.settle_cost&&Te(e,q().limbo,q().limbo.filter(function(e){return"colonize"==e.type})[0]),$(!0)},["Colonize"])],fllw:[O("Choose between Settling or Colonizing a Planet",["colonize"],function(){0==q().permanents.filter(function(e){return"bureaucracy"==e.type}).length?(t(0,r.choices=[{name:"Colonize"}],r),$(!0)):P(["Colonize","Settle Colonies"])}),O("Choose an Unsettled Planet to Settle",["colonize"],function(){return g()},["Settle Colonies"]),O("Settling your Planet",["colonize"],function(){xe(z(),q()),$(!0)},["Settle Colonies"]),O("Choose an Unsettled Planet to Colonize",["colonize"],function(){return g()},["Colonize"]),O("Colonizing your Planet",["colonize"],function(){var e=k().find(function(e){return e.hosted_colonies.reduce(function(e,n){return e+n.icons.colonize})>=e.settle_cost});Te(e,q().limbo,q().limbo.filter(function(e){return"colonize"==e.type})[0]),$(!0)},["Colonize"])],clnp:[]},{actn:[I("Choose between Producing or Trading Resources",["producetrade"],x(["produce","trade"])),I("Choose a Planet to Produce Resources on",["producetrade"],function(){return pe(!1,!1,["settled_&_conquered_planets"],"subchoices")},["produce"]),I("Producing a Resource",["producetrade"],function(){Re(k()),$(!0)},["produce"]),I("Choose a Planet to Trade Resources from",["producetrade"],function(){return pe(!1,!1,["settled_&_conquered_planets"],"subchoices")},["trade"]),I("Trading a Resource",["producetrade"],function(){Ie(k(),q()),$()},["trade"])],lead:[D("Choose between Producing or Trading Resources",["producetrade"],function(){return pe(!1,!1,["options",[{name:"produce"},{name:"trade"}]],"choices")}),D("Choose a Planet to Produce Resources on",["producetrade"],function(){return pe(!0,!0,["settled_&_conquered_planets"],"subchoices")},["produce"]),D("Producing a Resource",["producetrade"],function(){q().activerole="produce";var e=Re(k(),q().bstIcons.produce);"genetic_engineering"==y()&&e.forEach(function(e){return[].concat(W(e),[{influence:[].concat(W(e.influence),[r.influence.pop()])}])}),$(!0)},["produce"]),D("Choose a Planet to Trade Resources from",["producetrade"],function(){return pe(!0,!0,["settled_&_conquered_planets"],"subchoices")},["trade"]),D("Trading a Resource",["producetrade"],function(){q().activerole="trade";var e=Ie(k(),q(),q().bstIcons.trade);if("diverse_markets"==y())for(var n in e)e[n]>1&&q().influence.push(r.influence.pop());if("specialization"==y())for(var t in Array.from(e[q().specialization]))q().influence.push(r.influence.pop());$(!0)},["trade"])],fllw:[O("Choose a Planet to Produce Resources on",["produce"],function(){return pe(!0,!0,["settled_&_conquered_planets"],"subchoices")}),O("Producing a Resource",["produce"],function(){var e=r;q().activerole="produce",Re(e.subchoices,e.players[r.acting_player_index].bstIcons.produce),$(!0)}),O("Choose a Planet to Trade Resources from",["trade"],function(){return pe(!0,!0,["settled_&_conquered_planets"],"subchoices")}),O("Trading a Resource",["trade"],function(){var e=r;q().activerole="trade",Ie(e.subchoices,q(),q().bstIcons.trade),$(!0)})],clnp:[]},{actn:[I("Choose a Role Card to Replace Politics with",["politics"],function(){return pe(!1,!1,["rolecards"],"choices")}),I("Swapping the Role Card for your Politics Card",["politics"],function(){De(q().limbo.filter(function(e){return"politics"==e.type})[0],w()[0],q()),$(!0)})],lead:[],fllw:[],clnp:[]},{actn:[I("Choose up to 2 Cards from your Hand to Remove from the Game",["research"],function(){return pe(!1,!0,["hand"],"choices")}),I("Removing your Cards from the Game",["research"],function(){Ae(w(),q()),$(!0)})],lead:[D("Choose a Technology to Research",["research"],function(){return pe(!0,!1,["research"],"choices")}),D("Researching your Technology",["research"],function(){if("Skip"!=b()){var e=w()[0],n={advanced:0,metallic:0,fertile:0};[].concat(W(q().settled_planets),W(q().conquered_planets)).map(function(e){return n[e.type]++}),Object.values(e.planet_requirements).reduce(function(e,t,r){return e?t>n[Object.keys(n)[r]]:e},!0)&&q().bstIcons.research>=e.research_cost&&_e(r.research_deck,e.is_permanent?q().permanents:q().limbo,e.is_permanent?"":"discard",e.id),$(!0)}else $(!0)})],fllw:[O("Choose a Technology to Research",["research"],function(){return pe(!0,!1,["research"],"choices")}),O("Researching your Technology",["survey"],function(){var e=r;if("Skip"!=e.choices[0].name){var n={advanced:0,metallic:0,fertile:0};[].concat(W(e.players[r.acting_player_index].settled_planets),W(e.players[r.acting_player_index].conquered_planets)).map(function(e){n[e.type]++});var t=!0;for(var o in e.choices[0].planet_requirements)e.choices[0].planet_requirements[o]>n[o]&&(t=!1);t&&e.players[r.acting_player_index].bstIcons.research>=e.choices[0].research_cost&&_e(e.research_deck,e.players[r.acting_player_index].limbo,"discard",e.choices[0].id)}$(!0)})],clnp:[]},{actn:[I("Surveying your Empire",["survey"],function(){Ve(q()),$(!0)})],lead:[D("Choose a Planet from your Galaxy to Explore",["survey"],function(){for(var e=0;e<q().bstIcons.survey;e++)Ye(q());pe(!0,!1,["options",r.options],"choices")}),D("Surveying your Empire",["survey"],function(){"Skip"==b()&&$(),He(q()),$(!0)})],fllw:[O("Choose a Planet from your Galaxy to Explore",["survey"],function(){for(var e=r,n=0;n<e.players[r.acting_player_index].bstIcons.survey-1;n++)Ye(e.players[r.acting_player_index]);pe(!0,!1,["options"],"choices")}),O("Surveying your Empire",["survey"],function(){"Skip"==b()&&$(),He(r.players[r.acting_player_index]),$(!0)})],clnp:[{"":function(){}}]},{actn:[I("Choose between Collecting a Starfighter or Conquering a Planet",["warfare"],x(["Conquer a Planet","Collect a Starfighter"])),I("Adding a Starfighter to your Fleet",["warfare"],function(){Me(q()),$(!0)},["Collect a Starfighter"]),I("Choose a Planet to Conquer",["warfare"],function(){return pe(!1,!1,["unsettled_planets"],"subchoices")},["Conquer a Planet"]),I("Conquering your planet",["warfare"],function(){Ge(z(),q()),$(!0)},["Conquer a Planet"])],lead:[D("Choose between Collecting Starfighters or Conquering a Planet",["warfare"],x(["Conquer a Planet","Collect Starfighters"])),D("Adding Starfighters to your Fleet",["warfare"],function(){ce(1,q().bstIcons.warfare).forEach(function(){return Me(q())}),$(!0)},["Collect Starfighters"]),D("Choose a Planet to Conquer",["warfare"],function(){return g()},["Conquer a Planet"]),D("Conquering your planet",["warfare"],function(){Ge(z(),q()),$(!0)},["Conquer a Planet"])],fllw:[O("Choose between Collecting Starfighters or Conquering a Planet",["warfare"],function(){0==r.players[r.acting_player_index].permanents.filter(function(e){return"bureaucracy"==e.type}).length?(r.choices=[{name:"Collect Starfighters"}],$(!0)):pe(!1,!1,["options",[{name:"Conquer a Planet"},{name:"Collect Starfighters"}]],"choices")}),O("Adding Starfighters to your Fleet",["warfare"],function(){for(var e=0;e<r.players[r.acting_player_index].bstIcons.warfare;e++)Me(r.players[r.acting_player_index]);$(!0)},["Collect Starfighters"]),O("Choose a Planet to Conquer",["warfare"],function(){return pe(!1,!1,["unsettled_planets"],"subchoices")},["Conquer a Planet"]),O("Conquering your planet",["warfare"],function(){Ge(r.subchoices[0],r.players[r.acting_player_index]),$(!0)},["Conquer a Planet"])],clnp:[{"":function(){}}]}],a=[I("Choose wether or not to Settle a Planet",["improved_colonize"],function(){return pe(!0,!1,["options",[{name:"settle"},{name:"Skip"}]],"choices")}),I("Choose a Planet to Settle",["improved_colonize"],function(){return g()},["settle"]),I("Settling your Planet",["improved_colonize"],function(){xe(z(),getActvPlyr()),$(!0)},["settle"]),I("Choose between Settling or Colonizing a Planet",["improved_colonize"],x(["Colonize","Settle Colonies"])),I("Choose an Unsettled Planet to Settle",["improved_colonize"],function(){return g()},["Settle Colonies"]),I("Settling your Planet",["improved_colonize"],function(){xe(z(),q()),$(!0)},["Settle Colonies"]),I("Choose an Unsettled Planet to Colonize",["improved_colonize"],function(){return g()},["Colonize"]),I("Colonizing your Planet",["improved_colonize"],function(){Te(z(),q().limbo,q().limbo.filter(function(e){return"improved_colonize"==e.type})[0]),$(!0)},["Colonize"]),I("Choose an empty Production Zone to Produce in",["improved_production"],function(){return pe(!0,!1,["settled_&_conquered_planets"],"choices")}),I("Producing your Resource",["improved_production"],function(){"Skip"==b()&&$(),Re(r.choices),$(!0)}),I("Choose an empty Production Zone to Produce in",["improved_production"],function(){return pe(!0,!1,["settled_&_conquered_planets"],"choices")}),I("Producing your Resource",["improved_production"],function(){"Skip"==b()&&$(),Re(r.choices),$(!0)}),I("Trading your Stocks and Bonds",["improved_trade"],function(){r.players[r.acting_player_index].influence.push(r.influence.pop()),$(!0)}),I("Choose up to 3 Cards from your Hand to Remove from the Game",["improved_research"],function(){ye(q()),pe(!1,!0,["hand"],"choices")}),I("Removing your Cards from the Game",["improved_research"],function(){Ae(w(),q(),3),$(!0)}),I("Drawing your Cards",["improved_survey"],function(){ye(q()),ye(q()),ye(q()),$(!0)}),I("Choose between Collecting a Starfighter or Conquering a Planet",["improved_warfare"],x("Conquer a Planet")),I("Adding a Starfighter to your Fleet",["improved_warfare"],function(){Me(q()),Me(q()),$(!0)},["Collect a Starfighter"]),I("Choose a Planet to Conquer",["improved_warfare"],function(){return g()},["Conquer a Planet"]),I("Conquering your planet",["improved_warfare"],function(){Ge(z(),q()),$(!0)},["Conquer a Planet"]),I("Collecting your Star Fighters",["mobilization"],function(){Me(q()),Me(q()),$(!0)}),I("Adding Top Card of the Planet deck to your Empire",["survey_team"],function(){var e=get(),n=e.game,t=e.game,r=t.acting_player,o=t.planet_deck;r=n.players[n.acting_player_index];var i=o.pop();r.unsettled_planets.push(i),$(!0)}),I("Choose a Planet to Conquer",["war_path"],function(){return g()}),I("Conquering your planet",["war_path"],function(){"Skip"==b()&&$(),Ge(b(),q()),$(!0)}),I("Choose a Planet to Conquer",["war_path"],function(){return g()}),I("Conquering your planet",["war_path"],function(){"Skip"==b()&&$(),Ge(b(),q()),$(!0)}),I("Choose an Unsettled Planet to Terraform",["terraforming"],function(){return g()}),I("Terraforming your Planet",["terraforming"],function(){(Te(b(),q().limbo,q().limbo.filter(function(e){return"terraforming"==e.type})[0]),b().hosted_colonies.length>0)&&(b().hosted_colonies.reduce(function(e,n){return e+n.icons.colonize},0)>=b().settle_cost&&xe(b(),q()));$(!0)},["Colonize"]),I("Engineering Genetics",["genetic_engineering"],$),I("Select a Role Card to take into your Hand",["artificial_intelligence"],function(){return pe(!1,!1,["rolecards"],"choices")}),I("Adding Role Card to your Machine Learning Model",["artificial_intelligence"],function(){var e=get(),n=e.game,t=e.game.acting_player;t=n.players[n.acting_player_index],n.stacks.pilecount[n.choices[0].type]>=1&&(t.hand.push(Object.assign({id:je()},n.stacks.rolecards[n.stacks[n.choices[0].type]])),n.stacks.pilecount[n.choices[0].type]--),$(!0)}),I("Select a Role Card to take into your Hand",["artificial_intelligence"],function(){return pe(!1,!1,["rolecards"],"choices")}),I("Adding Role Card to your Machine Learning Model",["artificial_intelligence"],function(){var e=get(),n=e.game,t=e.game.acting_player;t=n.players[n.acting_player_index],n.stacks.pilecount[n.choices[0].type]>=1&&(t.hand.push(Object.assign({id:je()},n.stacks.rolecards[n.stacks[n.choices[0].type]])),n.stacks.pilecount[n.choices[0].type]--),$(!0)}),I("Diversifying Markets",["diverse_markets"],$),I("Choose a Resource to Specialize in",["specialization"],x("red")),I("Specializaing in your Seleted Resource",["specialization"],function(){q().specialization=b(),$(!0)}),I("Drawing Your Cards",["data_network"],function(){ye(q()),ye(q()),$(!0)}),I("Choose any number of Cards from your Hand to Remove from the Game",["data_network"],function(){return pe(!0,!0,["hand"],"choices")}),I("Removing the Selected Cards from the Game",["data_network"],function(){"Skip"==b()&&$();var e=get(),n=e.game,t=e.game,r=t.choices,o=t.acting_player;o=n.players[n.acting_player_index],Ae(r,o,r.length),$(!0)})];t(0,r={minPlyrs:2,maaxPlyrs:4,passtoplayer:!1,nonce:0,displayinfo:{selectionzone:"",dragged:null,showoptiontoskip:!1,allowformultipleselections:!1,center_or_planets:!0,choicelabel:"choices"},subchoices:[],influence:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],messagetoplayer:["Waiting for other players to join"],options:[],planet_deck:[],currentphase:-4,leading_player_index:0,acting_player_index:0,number_of_players:2,started:!1,gamephases:[{start:[{"set active player":function(){r.started&&(t(0,r.started=!0,r),t(0,r.passt=!1,r),t(0,r.leading_player_index=(r.leading_player_index+1)%r.number_of_players,r),t(0,r.acting_player_index=r.leading_player_index,r),t(0,r.leadingplayer=r.players[r.leading_player_index],r),t(0,r.acting_player=r.players[r.leading_player_index],r),hn()),void 0!==r.leadingplayer&&t(0,r.players[r.leading_player_index].rounds++,r);var e=[].concat(W(r.players[r.leading_player_index].settled_planets),W(r.players[r.leading_player_index].conquered_planets));for(var n in e)V(r.players[r.leading_player_index],e[n]);for(var o in r.players[r.leading_player_index].permanents)V(r.players[r.leading_player_index],permanents[o]);$(!0)}},{Productivity:function(){0!=q().permanents.filter(function(e){return"productivity"==e.type}).length&&(q().actionrolesequence="aar"),$()}},{"Choose an Order to Perform Your Action and Role Phases":function(){if(0!=q().permanents.filter(function(e){return"logistics"==e.type}).length){var e=["Action Phase then Role Phase","Role Phase then Action Phase"];0!=q().permanents.filter(function(e){return"productivity"==e.type}).length&&(e.push("Action Phase then another Action Phase then Role Phase"),e.push("Action Phase then Role Phase then another Action Phase"),e.push("Role Phase then Action Phase then another Action Phase")),P(e)}else $()}},{Logistics:function(){0!=q().permanents.filter(function(e){return"logistics"==e.type}).length?("Action Phase then Role Phase"==b()?q().actionrolesequence="ar":"Role Phase then Action Phase"==b()?q().actionrolesequence="ra":"Action Phase then another Action Phase then Role Phase"==b()?q().actionrolesequence="aar":"Action Phase then Role Phase then another Action Phase"==b()?q().actionrolesequence="ara":"Role Phase then Action Phase then another Action Phase"==b()&&(q().actionrolesequence="raa"),$(!0)):$()}}]},{action:[{"Choose an Action to Play":function(){pe(!0,!1,["hand"],"choices")}},{"Playing your Action":function(){if("Skip"==b())$();else{var e=w()[0],n=q();n.activeaction=e.type,T(n,e),$(!0)}}}].concat(W(S()),W(v()))},{role:[{"Choose a Role Card to Lead with":function(){pe(!1,!1,["rolecards"],"choices")}},{"Performing your Role":function(){var e=w()[0];if(r.stacks.pilecount[e.type]>=1){"producetrade"==e.type?(q().bstIcons.produce++,q().bstIcons.trade++):q().bstIcons[e.type]++;var n=Object.assign({id:je(),finDest:"discard",selected:!0},r.stacks.rolecards[r.stacks[e.type]]);q().limbo=[].concat(W(q().limbo),[n]),t(0,r.stacks.pilecount[e.type]--,r)}else"colonize"!=e.type&&q().bstIcons[e.type]++;q().activerole=e.type,$(!0)}}]},{lead:[{"Choose cards from your hand to Boost the effectiveness of your Role":function(){pe(!0,!0,["hand"],"choices")}},{"Boosting your Role":function(){"Skip"==b()?$():(w().forEach(function(e){Y(q(),e),e.finDest="discard"}),$(!0))}}].concat(W(E()),[{"Pass the device to the Next Player":function(){t(0,r.displayinfo.selectionzone="",r),t(0,r.passp=!0,r)}},{"You passed Priority":function(){t(0,r.passp=!1,r),$(!0)}}])},{follow:[{"Choose between Following or Dissent the Leading Role":function(){P(["dissent",C().activerole])}},{Dissenting:function(){if(q().activerole=b(),"dissent"!=q().activerole){var e=w()[0];if(r.stacks.pilecount[e.name]>=1){q().bstIcons[e.name]++;var n=Object.assign({id:je(),finDest:"discard",selected:!0},r.stacks.rolecards[r.stacks[e.name]]);q().limbo=[].concat(W(q().limbo),[n]),t(0,r.stacks.pilecount[e.name]--,r)}else"colonize"!=e.name&&Y(q(),e);$(!0)}else ye(q()),0!=q().permanents.filter(function(e){return"dissension"==e.type}).length&&ye(q()),$(!0)}},{"Choose cards from your hand to Boost the effectiveness of your Role":function(){"dissent"==q().activerole?$():pe(!0,!0,["hand"],"choices")}},{"Boosting your Role":function(){if("dissent"==q().activerole)$();else if("Skip"==b())$();else{var e=w;for(var n in e)Y(q(),e[n]);$(!0)}}}].concat(W(R()),[{"Pass the device to the Next Player":function(){t(0,r.displayinfo.selectionzone="",r),t(0,r.passp=!0,r)}},{"You passed Priority":function(){t(0,r.passp=!1,r),$(!0)}}])},{discard:[{"Would you like to Mobilize against a Planet":function(){"mobilization"!=q().activeaction?$():pe(!0,!1,["options",[{name:"mobilize"},{name:"skip"}]],"choices")}},{"Choose a Planet to Mobilize Against":function(){"mobilization"!=q().activeaction||"mobilize"!=b()?$():g()}},{"Mobalizing against your Planet":function(){"mobilization"!=q().activeaction?$():(Ge(z(),q()),$(!0))}},{"Would you like to Streamline Your Empire":function(){0==q().permanents.filter(function(e){return"streamlining"==e.type}).length?$():pe(!1,!1,["options",[{name:"Decline"},{name:"Streamline Empire"}]],"choices")}},{"Choose a Card from Your Hand to Remove from the Game":function(){0==q().permanents.filter(function(e){return"streamlining"==e.type}).length||"Streamline Empire"!=b()?$():pe(!0,!1,["hand"],"subchoices")}},{"Streamlining Your Empire":function(){0==q().permanents.filter(function(e){return"streamlining"==e.type}).length||"Streamline Empire"!=b()||"Skip"==b()?$():Ae(w(),q(),1)}},{"Would you like to Utilize Your Empire's Hyperefficiency":function(){0==q().permanents.filter(function(e){return"hyperefficiency"==e.type}).length?$():P(["Decline","Utilize Hyperefficiency"])}},{"Choose a Card from Your Hand to Remove from the Game":function(){0==q().permanents.filter(function(e){return"hyperefficiency"==e.type}).length||"Utilize Hyperefficiency"!=b()?$():pe(!0,!0,["hand"],"subchoices")}},{"Your Empire is Hyperefficient":function(){0==q().permanents.filter(function(e){return"hyperefficiency"==e.type}).length||"Utilize Hyperefficiency"!=b()||"Skip"==b()?$():Ae(w(),q(),w().length)}},{"Choose any Cards you would like to Discard":function(){pe(!0,!0,["hand"],"choices")}},{"Discarding your Selected Cards":function(){"Skip"==b()?$():(w().forEach(function(e){q().discard=[].concat(W(q().discard),[e]),q().limbo=q().limbo.filter(function(n){return n.id!=e.id})}),$(!0))}}]},{cleanup:[{"Drawing up to your Hand Size":function(){qe();var e=q().handsize;for(var n in q().settled_planets)e+=q().settled_planets[n].handsize_modifier;for(var o in q().conquered_planets)e+=q().conquered_planets[o].handsize_modifier;var i=q().hand.length;i<e&&ye(q(),e-i),r.players.forEach(U),r.started&&ve()&&r.players.reduce(function(e,n){return e+n.rounds},0)%r.number_of_players==0&&(me(),t(0,r.nextphase=ge,r)),$(!0)}},{"Pass the device to the Next Player":function(){t(0,r.displayinfo.selectionzone="",r),t(0,r.displayinfo.showoptiontoskip=!1,r),t(0,r.displayinfo.allowformultipleselections=!1,r),t(0,r.passp=!1,r),t(0,r.passt=!0,r)}},{"You passed the Turn":function(){t(0,r.passt=!1,r),$(!0)}}]}],players:[],winner:!1,stacks:{pilecount:{research:20,producetrade:16,colonize:20,warfare:16,survey:20},survey:0,warfare:1,colonize:2,producetrade:3,research:4,rolecards:[N("survey","Survey",{survey:1}),N("warfare","Warfare",{warfare:1}),N("colonize","Colonize",{colonize:1}),N("producetrade","Produce / Trade",{produce:1,trade:1}),N("research","Research",{research:1},{research_deck:[]})]}});var e=location.origin.replace(/^http/,"ws");t(1,o={screenname:"",url:e,sets:["Base Game"],number_of_players:[2,3,4],existinggames:[]}),t(0,r.nonce=0,r),t(2,f=!0)});var m=function(){return t(0,r.options=[],r)},g=function(){return pe(!1,!1,["unsettled_planets"],"subchoices")},v=function(){return a},y=function(){return q().activeaction},_=function(){return q().activerole},b=function(){return r.choices[0].name},w=function(){return r.choices},z=function(){return k()[0]},k=function(){return r.subchoices},$=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ue(e)},q=function(){return r.players[r.acting_player_index]},C=function(){return r.players[r.leading_player_index]},P=function(e){return pe(!1,!1,["options",e.reduce(function(e,n){return[].concat(W(e),[{name:n}])},[])],"choices")},x=function(e){return function(){return P(e)}},S=function(){return c.reduce(function(e,n){return[].concat(W(e),[n.actn])},[]).reduce(function(e,n){return[].concat(W(e),W(n))},[])},E=function(){return c.reduce(function(e,n){return[].concat(W(e),[n.lead])},[]).reduce(function(e,n){return[].concat(W(e),W(n))},[])},R=function(){return c.reduce(function(e,n){return[].concat(W(e),[n.fllw])},[]).reduce(function(e,n){return[].concat(W(e),W(n))},[])},I=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return ne({},e,function(){n.includes(y())&&(0==r.length||r.includes(b()))?t():$(o)})},D=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return ne({},e,function(){n.includes(_())&&(0==r.length||r.includes(b()))?t():$(o)})},O=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return ne({},e,function(){n.includes(_())&&(0==r.length||r.includes(b()))?t():$(o)})},N=function(e,n,t){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ne((ne(r={type:e,selected:!1,name:n},"selected",!1),ne(r,"icons",Ne({},{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:1},{},t)),ne(r,"image",null),r),o)},V=function(e,n){return["survey","warfare","trade","produce","research"].forEach(function(t){return e.icons[t]+=n.icons[t]})},T=function(e,n){L("limbo",e,n,"discard"),j("hand",e,n)},G=function(e,n){L("hand",e,n,""),j("limbo",e,n)},L=function(e,n,t,r){return n[e]=[].concat(W(n[e]),[Ne({},t,{finDest:r})])},j=function(e,n,t){return n[e]=n[e].filter(function(e){return t.id!=e.id})},Y=function(e,n){return Object.keys(n.icons).forEach(function(t){return e.bstIcons[t]+=n.icons[t]})},U=function(e){return e.bstIcons={survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0}},F=function(e){return e.forEach(function(e){return e.selected=!1})},J=function(){return o.screenname==q().name||!o.online},K=function(e){return t(0,r[r.displayinfo.choicelabel]=e,r)},X=function(){return t(0,r.displayinfo.center_or_planets=!1,r)},Z=function(){return t(0,r.displayinfo.center_or_planets=!0,r)},Q=function(){return t(0,r[r.displayinfo.choicelabel]=[],r)},ee=function(e,n,o,i){return t(0,r.displayinfo=Ne({},r.displayinfo,{},{selectionzone:e,allowformultipleselections:n,showoptiontoskip:o,choicelabel:i}),r)},re=function(e){return[].concat(W(e.deck),W(e.discard),W(e.limbo),W(e.hand))},oe=function(e){return"planet"==e.type||"fertile"==e.type||"metallic"==e.type||"advanced"==e.type},ie=function(e){return 0!=q().permanents.filter(function(n){return n.type==e}).length},ce=function e(n,t){return n<=t?[].concat(W(e(n,t-1)),[t]):[]},ae=function(e,n,t){return function(){t(),document.removeEventListener(n,l),e()}},se=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o={blue:0,green:0,purple:0,red:0};return n.forEach(function(n){return n.production_zones.forEach(function(n){!n.filled&&t>0&&(n.filled=e,o[n.type]++,t--,r())})}),o},le=function(e,n){r.displayinfo.selectionzone==n&&J()&&(r.displayinfo.allowformultipleselections?ue(e):fe([e]))},ue=function(e){J()&&(r[r.displayinfo.choicelabel].includes(e)?(e.selected=!1,oe(e)||"Skip"==e.name||(K(r[r.displayinfo.choicelabel].filter(function(n){return n.id!=e.id})),G(q(),e))):(K([].concat(W(r[r.displayinfo.choicelabel]),[e])),e.selected=!0,oe(e)||"Skip"==e.name||T(q(),e)))},fe=function(e){J()&&(m(),F(e),K(e),$())},de=function(e){J()&&r[r.displayinfo.choicelabel].includes(e)&&(e.selected=!1,K(r[r.displayinfo.choicelabel].filter(function(n){return n.id!=e.id})),G(q(),e))},pe=function(e,n,t,o,i){var c=A(t,2),a=c[0],s=c[1];switch(ee(a,n,e,o),a){case"hand":s=q().hand;break;case"research":s=r.research_deck;break;case"discard":s=q().discard;break;case"planets":s=r.planet_deck;break;case"rolecards":s=r.stacks.rolecards,Z();break;case"unsettled_planets":s=q().unsettled_planets,X();break;case"settled_planets":s=q().settled_planets,X();break;case"conquered_planets":s=q().conquered_planets,X();break;case"settled_&_conquered_planets":s=[].concat(W(q().settled_planets),W(q().conquered_planets)),X()}Q(),Pe(s),en()},he=function(e,n,t){var r=e.find(function(e){return t==e.id});n=[].concat(W(n),[r]),e=e.filter(function(e){return e.id!=r.id})},me=function(){r.players.forEach(function(e){e.influence=e.influence.reduce(function(e,n){return e+n},0)+re(e).reduce(function(e,n){return e+n.influence})})},ge=function(){var e=r.players.map(function(e){return e.influence}),n=e[0];r.players.map(function(e){n<e.influence&&(e.name,n=e.influence)})},ve=function(){var e=r.stacks.pilecount.reduce(function(e,n){return e+(n<1)?1:0},0);return(1==r.number_of_players||2==r.number_of_players?1:2)<=e||0==r.influence.length},ye=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=0;t<n;t++){if(0==e.deck.length){if(0==e.discard.length)return e;e.deck=sn(W(e.discard)),e.discard=[]}e.hand=[].concat(W(e.hand),[e.deck.pop()]),e.deck=e.deck}return e},_e=function(e,n,t,r){var o=e.find(function(e){return r==e.id});n=[].concat(W(n),[Ne({},o,{finDest:t})]),e=e.filter(function(e){return e.id!=o.id})},be=function(e){var n;return n={name:e,type:e,id:je(),icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0},planet_requirements:{advanced:0,metallic:0,fertile:0},research_cost:0,action:function(){},is_permanent:!1,is_doublesided:!1,imgurl:"/images/",Influence_value:0,img:function(e){return this.imgurl+=e,this},influence:function(e){return this.influence_value=e,this},metallic:function(e){return this.planet_requirements.metallic=e,this},advanced:function(e){return this.planet_requirements.advanced=e,this},fertile:function(e){return this.planet_requirements.fertile=e,this},research:function(e){return this.research_cost=e,this},permanent:function(){return this.is_permanent=!0,this},doubleside:function(){return this.is_doublesided=!0,this}},ne(n,"icons",function(e){return this.icons=Object.assign(this.icons,e),this}),ne(n,"improved_colonize",function(){return this.research(3),this.imgurl+="improvedcolonize",this}),ne(n,"improved_survey",function(){return this.research(3),this.imgurl+="improvedsurvey",this}),ne(n,"improved_research",function(){return this.research(3),this.imgurl+="improvedresearch",this}),ne(n,"improved_warfare",function(){return this.research(3),this.imgurl+="improvedwarfare",this}),ne(n,"improved_production",function(){return this.research(3),this.imgurl+="improvedproduction",this}),ne(n,"improved_trade",function(){return this.research(3),this.imgurl+="improvedtrade",this}),ne(n,"surveyteam",function(){return this.research(5).metallic(2).influence(2).icons({survey:2}).img("surveyteam")}),ne(n,"warpath",function(){return this.research(5).metallic(2).influence(2).icons({warfare:2}).img("warpath")}),ne(n,"terraforming",function(){return this.research(5).fertile(2).influence(2).icons({colonize:2}).img("terraforming")}),ne(n,"geneticengineering",function(){return this.research(5).fertile(2).influence(2).icons({produce:2}).img("geneticengineering")}),ne(n,"artificialintelligence",function(){return this.research(5).fertile(2).influence(2).icons({colonize:1,produce:1}).img("artificialintelligence")}),ne(n,"diversemarkets",function(){return this.research(5).advanced(2).influence(2).icons({research:1,trade:1}).img("diversemarkets")}),ne(n,"specialization",function(){return this.research(5).advanced(2).influence(2).icons({trade:2}).img("specialization")}),ne(n,"mobilization",function(){return this.research(5).metallic(2).influence(2).icons({survey:1,warfare:1}).img("mobilization")}),ne(n,"datanetwork",function(){return this.research(5).advanced(2).influence(2).icons({research:2}).img("datanetwork")}),ne(n,"abundance",function(){return this.research(5),this.imgurl+="abundance",this.is_doublesided=!0,this.is_permanent=!0,this.fertile(2).influence(2)}),ne(n,"adaptability",function(){return this.research(7),this.imgurl+="adaptability",this.is_doublesided=!0,this.is_permanent=!0,this.advanced(3).influence(5)}),ne(n,"bureaucracy",function(){return this.research(7),this.imgurl+="bureaucracy",this.is_doublesided=!0,this.is_permanent=!0,this.fertile(3).influence(5)}),ne(n,"dissension",function(){return this.research(7).fertile(3).influence(5).permanent().doubleside().img("dissension")}),ne(n,"hyperefficiency",function(){return this.research(7).advanced(3).influence(5).permanent().doubleside().img("hyperefficiency")}),ne(n,"imperialism",function(){return this.research(5).metallic(2).influence(2).permanent().doubleside().img("imperialism").icons({survey:1,trade:1,warfare:1})}),ne(n,"logistics",function(){return this.research(7).metallic(3).influence(5).permanent().doubleside().img("logistics")}),ne(n,"productivity",function(){return this.research(7).metallic(3).influence(5).permanent().doubleside().img("productivity")}),ne(n,"scorchedearthpolicy",function(){return this.research(5).metallic(2).influence(2).permanent().doubleside().img("scorchedearthpolicy")}),ne(n,"streamlining",function(){return this.research(5).advanced(2).influence(2).permanent().doubleside().img("streamlining")}),ne(n,"weaponsemporium",function(){return this.research(5).advanced(2).influence(2).permanent().doubleside().img("weaponemporium")}),ne(n,"fertilegrounds",function(){return this.research(5).fertile(2).influence(2).permanent().doubleside().img("fertilegrounds").icons({research:1,colonize:1,produce:1})}),n},we=function(){t(0,r.research_deck=[be("improved_production").metallic(1).icons({warfare:1,produce:1}).improved_production().img("wp.png"),be("improved_production").metallic(1).icons({survey:1,produce:1}).improved_production().img("sp.png"),be("improved_trade").metallic(1).icons({survey:1,trade:1}).improved_trade().img("st.png"),be("improved_trade").metallic(1).icons({warfare:1,trade:1}).improved_trade().img("wt.png"),be("improved_research").metallic(1).icons({warfare:1,research:1}).improved_research().img("wr.png"),be("improved_research").metallic(1).icons({survey:1,research:1}).improved_research().img("sr.png"),be("improved_colonize").metallic(1).icons({warfare:1,colonize:1}).improved_colonize().img("wc.png"),be("improved_colonize").metallic(1).icons({survey:1,colonize:1}).improved_colonize().img("sc.png"),be("improved_warfare").fertile(1).icons({produce:1,warfare:1}).improved_warfare().img("pw.png"),be("improved_warfare").fertile(1).icons({colonize:1,warfare:1}).improved_warfare().img("cw.png"),be("improved_trade").fertile(1).icons({produce:1,trade:1}).improved_trade().img("pt.png"),be("improved_trade").fertile(1).icons({colonize:1,trade:1}).improved_trade().img("ct.png"),be("improved_research").fertile(1).icons({produce:1,research:1}).improved_research().img("pr.png"),be("improved_research").fertile(1).icons({colonize:1,research:1}).improved_research().img("cr.png"),be("improved_survey").fertile(1).icons({produce:1,survey:1}).improved_survey().img("ps.png"),be("improved_survey").fertile(1).icons({colonize:1,survey:1}).improved_survey().img("cs.png"),be("improved_production").advanced(1).icons({research:1,produce:1}).improved_production().img("rp.png"),be("improved_production").advanced(1).icons({trade:1,produce:1}).improved_production().img("tp.png"),be("improved_warfare").advanced(1).icons({warfare:1,trade:1}).improved_warfare().img("tw.png"),be("improved_warfare").advanced(1).icons({research:1,warfare:1}).improved_warfare().img("rw.png"),be("improved_colonize").advanced(1).icons({colonize:1,trade:1}).improved_colonize().img("tc.png"),be("improved_colonize").advanced(1).icons({research:1,colonize:1}).improved_colonize().img("rc.png"),be("improved_survey").advanced(1).icons({trade:1,survey:1}).improved_survey().img("ts.png"),be("improved_survey").advanced(1).icons({research:1,survey:1}).improved_survey().img("rs.png"),be("survey_team").surveyteam().img(".png"),be("war_path").warpath().img(".png"),be("terraforming").terraforming().img(".png"),be("genetic_engineering").geneticengineering().img(".png"),be("artificial_intelligence").artificialintelligence().img(".png"),be("diverse_markets").diversemarkets().img(".png"),be("specialization").specialization().img(".png"),be("mobilization").mobilization().img(".png"),be("data_network").datanetwork().img(".png"),be("abundance").abundance().img(".png"),be("adaptability").adaptability().img(".png"),be("bureaucracy").bureaucracy().img(".png"),be("dissension").dissension().img(".png"),be("hyperefficiency").hyperefficiency().img(".png"),be("imperialism").imperialism().img(".png"),be("logistics").logistics().img(".png"),be("productivity").productivity().img(".png"),be("scorched_earth_policy").scorchedearthpolicy().img(".png"),be("streamlining").streamlining().img(".png"),be("weapons_emporium").weaponsemporium().img(".png"),be("fertile_grounds").fertilegrounds().img(".png")],r)},ze=function(e){var n,o=(n={id:e,actionrolesequence:"ar",specialization:"",available:!0,rounds:0,limbo:[],deck:sn(We()),hand:[],permanents:[],discard:[],handsize:5,activeaction:null,activerole:""},ne(n,"handsize",5),ne(n,"bstIcons",{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0}),ne(n,"unsettled_planets",[r.stacks.startingplanets.pop()]),ne(n,"settled_planets",[]),ne(n,"conquered_planets",[]),ne(n,"starfighters",{small:0,medium:0,large:0}),ne(n,"combatvalue",0),ne(n,"influence",[]),n);ye(o,o.handsize),t(0,r.players=[].concat(W(r.players),[o]),r)},ke=function(e){return{id:je(),name:e,type:"planet",settle_cost:2,settled:!1,conquer_cost:2,production_zones:[],influence_value:2,icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0},handsize_modifier:0,hosted_colonies:[],metallic:function(){return this.type="metallic",this},advanced:function(){return this.type="advanced",this},fertile:function(){return this.type="fertile",this},icon:function(e){return this.icons[e]++,this},handsize:function(e){return this.handsize_modifier=e,this},influence:function(e){return this.influence_value=e,this},settle:function(e){return this.settle_cost=e,this},conquer:function(e){return this.conquer_cost=e,this},zone:function(e){return this.production_zones.push({type:e,filled:!1}),this}}},$e=function(){t(0,r.planet_deck=sn([ke("MISHBURR ITO-A").fertile().settle(5).conquer(4).zone("food").influence(3).icon("produce"),ke("STYKU").fertile().settle(4).conquer(5).zone("water").influence(3).icon("colonize"),ke("ANGUS DUFFY").fertile().settle(3).conquer(6).zone("food").zone("water").influence(3),ke("GERDLAND").fertile().settle(4).conquer(5).zone("water").influence(3).icon("produce"),ke("MIK-MIK").fertile().settle(5).conquer(4).zone("food").influence(3).icon("colonize"),ke("NELOS IV").fertile().settle(5).conquer(4).zone("food").influence(2).handsize(1),ke("SPIELBANY VI").fertile().settle(4).conquer(5).zone("water").influence(2).handsize(1),ke("NEW TEXAS").fertile().settle(3).conquer(6).zone("food").zone("water").influence(2).icon("colonize"),ke("ARTIGAS GNS-111").fertile().settle(3).conquer(6).zone("food").zone("water").influence(2).icon("produce"),ke("HANOJ - T").advanced().settle(5).conquer(4).influence(3).zone("silicon").icon("trade"),ke("OKNOW").advanced().settle(4).conquer(5).influence(2).zone("silicon").handsize(1),ke("SROD AVEIN N2").advanced().settle(3).conquer(6).influence(4).icon("research"),ke("RAL GAI'GAW").advanced().settle(4).conquer(5).influence(3).zone("silicon").icon("trade"),ke("ECHO ROSE").advanced().settle(5).conquer(4).influence(3).zone("silicon").icon("research"),ke("SHOLMICAN").advanced().settle(3).conquer(6).influence(4).zone("silicon"),ke("ZEPHAN").advanced().settle(3).conquer(6).influence(4).icon("trade"),ke("SIMA-07C").advanced().settle(5).conquer(4).influence(2).zone("silicon").handsize(1),ke("LYTTLE").advanced().settle(4).conquer(5).influence(3).zone("silicon").icon("research"),ke("KYRIE & JUNO").metallic().settle(3).conquer(6).influence(4).icon("survey"),ke("MARGHANNAH PRIME").metallic().settle(4).conquer(5).influence(3).handsize(1),ke("TANKAHSHIN").metallic().settle(4).conquer(5).influence(3).zone("metallic").icon("warfare"),ke("VOSON").metallic().settle(4).conquer(5).influence(3).zone("metallic").icon("survey"),ke("PINK SONAR").metallic().settle(5).conquer(4).influence(3).zone("metallic").icon("survey"),ke("OVERLORD BETZEL'S DOMAIN").metallic().settle(3).conquer(6).influence(4).icon("warfare"),ke("8910 SPIELEN").metallic().settle(4).conquer(5).influence(2).zone("metallic").handsize(1),ke("IDROYOS").metallic().settle(3).conquer(6).influence(5),ke("ERKAM-W").metallic().settle(5).conquer(4).influence(3).zone("metallic").icon("warfare")]),r),t(0,r.stacks.startingplanets=sn([ke("MESIA SEDNIM").fertile().settle(2).conquer(2).influence(2).zone("water"),ke("DRAWDE").fertile().settle(2).conquer(2).influence(2).zone("food"),ke("LIAGIBA").advanced().settle(2).conquer(2).influence(2).zone("silicon"),ke("POMERENE").advanced().settle(2).conquer(2).influence(2).zone("silicon"),ke("CHRISPEN").metallic().settle(2).conquer(2).influence(2).zone("metallic"),ke("PIEDRA SECA").metallic().settle(2).conquer(2).influence(2).zone("metallic")]),r)},qe=function(){q().limbo.forEach(function(e){q()[e.finDest]=[].concat(W(q()[e.finDest]),[e])})},Ce=function(e,n){return n.finDest="exile",e.filter(function(e){return e.id!=n.id})},Pe=function(e){return t(0,r.options=e,r)},xe=function(e,n){var t=[].concat(W(n.settled_planets),W(n.conquered_planets)),r=[].concat(W(t),W(C().permanents)).reduce(function(e,n){return e+n.icons.colonize},0);e.settle_cost-r<=e.hosted_colonies.length&&(ie("abundance")&&0!=e.production_zones.length&&(e.production_zones=e.production_zones.map(function(e){return{type:e.type,filled:!0}})),n.discard=[].concat(W(n.discard),W(e.hosted_colonies)),e.hosted_colonies=[],e.settled=!0,he(n.unsettled_planets,n.settled_planets,e.id))},Se=function(){o.online&&o.screenname!=q().name||(t(0,r.passt=!1,r),t(0,r.acting_player_index=t(0,r.leading_player_index=(r.leading_player_index+1)%r.number_of_players,r),r),t(0,r.leadingplayer=r.players[r.leading_player_index],r),t(0,r.acting_player=r.players[r.leading_player_index],r),$())},Ee=function(){J()&&(t(0,r.passp=!1,r),t(0,r.acting_player_index=(r.acting_player_index+1)%r.number_of_players,r),t(0,r.acting_player=q(),r),$())},Re=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return se(!0,e,n)},Ie=function(e,n,o){var i={blue:0,green:0,purple:0,red:0};if(o<1)return i;for(var c=0;c<e.length;c++)for(var a=0;a<e[c].production_zones.length;a++)o>0&&e[c].production_zones[a].filled&&(1!=r.influence.length&&t(0,r.influence=r.influence.slice(1),r),e[c].production_zones[a].filled=!1,i[e[c].production_zones[a].type]++,n.influence=[].concat(W(n.influence),[1]),o--);return i},De=function(e,n,o){e.finDest="exile",r.stacks.pilecount[n.type]>=1&&(o.hand=[].concat(W(o.hand),[Ne({},r.stacks.rolecards[r.stacks[n.type]],{id:je()})]),t(0,r.stacks.pilecount[n.type]--,r))},Ae=function(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=0;r<e.length&&r<t;r++)q().limbo=Ce(q().limbo,e[r])},Oe=function(e,n){return e.forEach(function(e){return Y(n,e)})},Ve=function(e){return ye(e,2)},Te=function(e,n,t){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?q().bstIcons.colonize:1,o=function(r){var o=n.find(function(e){return t.type==e.type&&"exile"!=e.finDest});e.hosted_colonies=[].concat(W(e.hosted_colonies),[o]),n=n.filter(function(e,n){return e.id!=o.id})},i=0;i<r;i++)o()},Me=function(e){return e.starfighters.small++},Ge=function(e,n){ie("scorched_earth_policy")&&(e.production_zones=[],e.conquer_cost-=2,e.conquer_cost<0&&(e.conquer_cost=0)),n.starfighters.small>=e.conquer_cost&&(ie("abundance")&&0!=e.production_zones.length&&(e.production_zones=e.production_zones.map(function(e){return{type:e.type,filled:!0}})),n.starfighters.small-=e.conquer_cost,(e=Le(n.unsettled_planets,e.id)).conquered=!0,n.conquered_planets.push(e))},Le=function(e,n){var t=e.find(function(e){return e.id==n});return e=e.filter(function(e){return e.id!=n}),t},je=function(){return t(0,r.nonce++,r),r.nonce},Ye=function(e){var n=r.planet_deck.pop();e.limbo=[].concat(W(e.limbo),[Ne({},n,{finDest:"planetdeck"})]),t(0,r.options=[].concat(W(r.options),[n]),r)},He=function(e){t(0,r.choices[0].finDest="unsetttled",r),e.unsettled_planets=[].concat(W(e.unsettled_planets),[r.choices[0]]),e.limbo=e.limbo.filter(function(e){return e.id!=r.choices[0].id}),e.limbo.filter(function(e){return"planetdeck"==e.finDest}).forEach(function(n){return he(e.limbo,r.planet_deck,n.id)})},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(0,r.currentphase=(r.currentphase+1)%r.gamesequence.length,r);var n,o,i=r.gamesequence[r.currentphase];for(var c in i)o=c,n=i[c];r.nextphase!==ge&&(t(0,r.nextphase=n,r),r.messagetoplayer.push(o)),e&&en(),r.nextphase()},Be=function(){var e=[];e=Fe(W(r.gamephases[0].start),e),e=Fe(W(r.gamephases[1].action),e,function(){return"aar"==q().actionrolesequence}),e=Fe(W(r.gamephases[1].action),e,function(){return"aar"==q().actionrolesequence||"ar"==q().actionrolesequence}),e=Fe(W(r.gamephases[2].role),e),e=Fe(W(r.gamephases[3].lead),e);for(var n=1;n<r.number_of_players;n++)e=Fe(W(r.gamephases[4].follow),e);e=Fe(W(r.gamephases[1].action),e,function(){return"raa"==q().actionrolesequence||"ara"==q().actionrolesequence}),e=Fe(W(r.gamephases[1].action),e,function(){return"raa"==q().actionrolesequence}),e=Fe(W(r.gamephases[5].discard),e),e=Fe(W(r.gamephases[6].cleanup),e),t(0,r.gamesequence=e,r)},Fe=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r in e)t?function(){var o=e[r],i=void 0,c=void 0,a={};for(c in o)i=o[c];a[c]=function(){t()?i():$()},n.push(a)}():n.push(e[r]);return n},We=function(){return[Object.assign({id:je()},r.stacks.rolecards[r.stacks.survey]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.survey]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.warfare]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.producetrade]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.producetrade]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.colonize]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.colonize]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.research]),Object.assign({id:je()},r.stacks.rolecards[r.stacks.research]),{id:je(),type:"politics",selected:!1,action:function(e){t(0,r.displayinfo.center_or_planets=!0,r),t(0,r.displayinfo.selectionzone="rolecards",r),t(0,r.displayinfo.allowformultipleselections=!1,r),t(0,r.displayinfo.showoptiontoskip=!1,r),r.messagetoplayer.push("choose a card from the center row to add to your hand"),document.addEventListener("choicemade",function n(){document.removeEventListener("choicemade",n),De(q().activeaction,r.choices[0],q()),e()}),Pe(r.stacks.rolecards)},role:null,icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0,politics:1},name:"Politics",image:null}]},Je=function(){return t(0,r.currentphase++,r)},Ke=function(e){t(1,o.online=!0,o),tn(e),Xe(function(){return s.emit("message",d({header:"newgame",game:r,sets:o.sets,number_of_players:r.players.length}))})},Xe=function(e){(s=io()).on("connect",function(){h("connected"),s.on("id",function(e){h("id"),h(p(e)),t(0,r=Ne({},r,{game_id:p(e),hader:"",currentphase:r.currentphase+1})),t(1,o=Ne({},o,{existinggames:[].concat(W(o.existinggames),[r]),online:!0})),nn()}),s.on("fetch",function(e){h("fetch"),h(p(e)),t(0,r.currentphase=-1,r),t(1,o=Ne({},o,{existinggames:p(e).map(function(e){return e.game}).filter(function(e){return e.players.filter(function(e){return e.available}).length>0}),online:!0}))}),s.on("enter",function(e){h("enter"),h(p(e)),t(0,r=Ne({},p(e),{phasse:r.phases,gamesequence:r.gamesequence})),t(1,o=Ne({},o,{online:!0,player_id:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10)}))}),s.on("join",function(e){h("join"),e=p(e),h(e),t(0,r.players[e.slot]=e.player,r),h("available slots: ",r.players.reduce(function(e,n){return e+n.available?1:0},0)),0==r.players.reduce(function(e,n){return e+n.available?1:0},0)&&$()}),s.on("set",function(e){h(p(e)),t(0,r=Ne({},p(e),{phasse:r.phases,gamesequence:r.gamesequence}))}),e(),function e(){setTimeout(function(){s.emit("message",d({header:"ping"})),e()},2e3)}()})},Ze=function(){return Xe(function(){return s.emit("message",d({header:"fetchexisting"}))})},Qe=function(e){var n=e.players.findIndex(function(e){return e.available});o.init||tn(e.number_of_players),s.emit("message",d({header:"enterexisting",game_id:e.game_id,player_name:o.screename,slot:n}))},en=function(){return o.online&&s.emit("message",d(Ne({},r,{header:"set",sender:o.player_id})))},nn=function(){return s.emit("message",d(Ne({},r,{header:"register",sender:o.player_id})))},tn=function(e){t(0,r.label=o.screenname,r),t(1,o.init=!0,o),$e();for(var n=0;n<e;n++)ze(n);we(),Be(),o.online||(an(),rn())},rn=function(){return r.players.forEach(function(e,n){return e.name="Player "+(n+1)})},on=function(){return t(0,r.displayinfo.center_or_planets=!r.displayinfo.center_or_planets,r)},cn=function(){t(0,r.passtoplayer=!r.passtoplayer,r),hn()},an=function(){t(0,r.game_id="",r),t(0,r.game_id+=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10),r)},sn=function(e){for(var n,t,r=e.length;0!==r;)t=Math.floor(Math.random()*r),n=e[r-=1],e[r]=e[t],e[t]=n;return e},ln=function(e,n){return function(){return t(0,r.displayinfo.dragged=n,r)}},un=function(e,n){return function(){var t=document.getElementById("playedcards").getBoundingClientRect();e.changedTouches[0].clientX>t.left&&e.changedTouches[0].clientX<t.left+t.width&&e.changedTouches[0].clientY<t.top+t.height&&e.changedTouches[0].clientY>t.top&&(null!==r.displayinfo.dragged&&le(r.displayinfo.dragged,n),r.displayinfo.dragged),document.querySelector("#dragged").style.visibility="hidden"}},fn=function(e,n){return function(){var t=e.targetTouches[0],r=document.querySelector("#dragged");r.style.position="absolute",r.style.visibility="visible",r.style.top=t.pageY-75+"px",r.style.left=t.pageX-50+"px",r.style.width="100px",r.style.height="137px",r.style.zIndex="4",r.style.backgroundImage="url('"+n+"')"}},dn=function(){t(1,o.online=!1,o),t(0,r.currentphase=0,r),tn(2),$()},pn=function(e){t(1,o.screename=e,o),Je()},hn=function(){var e=document.getElementById("screen");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()};return[r,o,f,h,le,fe,de,Se,Ee,Je,Ke,Ze,Qe,on,cn,ln,un,fn,dn,pn,c,a,s,void 0,d,p,m,g,v,y,_,b,w,z,k,$,q,C,P,x,S,E,R,I,D,O,N,V,function(e,n){j("limbo",e,n),T(e,n)},T,G,L,j,Y,U,F,J,K,function(){return t(0,r.options=[],r)},X,Z,Q,ee,re,oe,ie,ce,ae,se,ue,pe,he,me,ge,ve,ye,_e,be,we,ze,ke,$e,qe,function(e,n,t,r){var o=e.find(function(e){return r==e.id});n=[].concat(W(n),[Ne({},o,{finDest:t})]),e=e.filter(function(e){return e.id!=o.id})},Ce,Pe,xe,function(e){document.addEventListener("choicemade",ae(e,"choicemade",function(){return t(0,r.number_of_players=r.choices,r)})),Pe(ce(r.minPlyrs,r.maxPlyrs))},Re,Ie,De,Ae,Oe,Ve,Te,Me,Ge,function(e){t(0,r.displayinfo.selectionzone="hand",r),t(0,r.displayinfo.allowformultipleselections=!0,r),t(0,r.displayinfo.showoptiontoskip=!0,r),Pe(e.hand),document.addEventListener("choicemade",ae(function(){},"choicemade",function(){return Oe(r.choices,e)}))},Le,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};"Skip"!=e[0].name&&(e.forEach(function(e){Y(q(),e),_e(q().hand,q().limbo,"discard",cards[i].id)}),n())},je,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return q().activerole.role.role.leader(e)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;q().activerole.set(r.players[r.leading_player_index].activerole.role),q().activerole.role.role.follower(e)},Ye,He,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=e[0];q().activerole.set(o),r.stacks.pilecount[o.type]>=1&&(q().bstIcons[o.type]++,q().limbo.push(Object.assign({id:je(),finDest:"discard"},r.stacks.rolecards[r.stacks[o.type]])),t(0,r.stacks.pilecount[o.type]--,r)),n(o,te(u).slice(2))},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"Skip"!=e[0].name&&e.forEach(function(e){return he(q().hand,q().discard,e.id)}),n(e,te(u).slice(2))},Ue,Be,Fe,We,Xe,en,nn,tn,rn,function(e,n){return r.displayinfo.selectionzone==e?n.selected?"selected":"selectable":"bordered"},an,sn,hn,function(){o.screenname=this.value,t(1,o)},function(e){"Enter"==e.key&&pn(o.screenname)},function(){return pn(o.screenname)},function(){return pn(o.screenname)},function(){return Je()},function(){return Je()},function(){return Ze()},function(){return Ze()},function(){return dn()},function(){return dn()},function(e){return Ke(2)},function(e){return Ke(2)},function(e){return Ke(3)},function(e){return Ke(3)},function(e){return Ke(4)},function(e){return Ke(4)},function(e){return Qe(e)},function(e){return Qe(e)},function(){return cn()},function(){return cn()},function(){return on()},function(){return on()},function(e){return le(e,"research")},function(e){return le(e,"research")},function(e){return le(e,"rolecards")},function(e){return le(e,"rolecards")},function(e,n){return fn(n,"/images/"+e.type+".png")},function(e,n){return ln(0,e)},function(e){return un(e,"rolecards")},function(e){return le(e,"unsettled_planets")},function(e){return le(e,"unsettled_planets")},function(e){return le(e,"settled_&_conquered_planets")},function(e){return le(e,"settled_&_conquered_planets")},function(){return fe([{name:"Skip"}])},function(){return fe([{name:"Skip"}])},function(e){return de(e)},function(e){return de(e)},function(){return Ee()},function(){return Ee()},function(){return Se()},function(){return Se()},function(){return fe(r[r.displayinfo.choicelabel])},function(){return fe(r[r.displayinfo.choicelabel])},function(e,n){return ln(0,e)},function(e){return un(e,"hand")},function(e,n){return fn(n,e.imgurl)},function(e){h(e),le(e,"hand")},function(e){return le(e,"hand")},function(e){return le(e,"options")},function(e){return le(e,"options")},function(e){return le(e,"options")},function(e){return le(e,"options")},function(e){return le(e,"options")},function(e){return le(e,"options")}]}var Pn=function(e){o(t,u);var n=Ae(t);function t(e){var r;return c(this,t),r=n.call(this),a(l(r),e,Cn,qn,s,{},[-1,-1,-1,-1,-1,-1,-1]),r}return t}();function xn(e){return function(){var n,t=G(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=G(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return L(this,n)}}function Sn(e){var n,t=new Pn({});return{c:function(){$(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,r){R(t,e,r),n=!0},p:Y,i:function(e){n||(y(t.$$.fragment,e),n=!0)},o:function(e){w(t.$$.fragment,e),n=!1},d:function(e){T(t,e)}}}export default(function(e){o(t,u);var n=xn(t);function t(e){var r;return c(this,t),r=n.call(this),a(l(r),e,null,Sn,s,{}),r}return t}());
