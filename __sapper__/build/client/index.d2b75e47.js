import{S as e,i as t,s as n,C as r,b as o,c as l,f as a,d as s,g as c,a as d,w as p,e as u,z as h,x as f,A as m,B as g,p as y,j as v,t as _,q as b,k as z,l as w,h as $,r as k,D as q,E as C,u as P,v as x,o as E,y as S,F as I,G as R,n as D,H as A,m as O,I as N,J as V,K as T,L as M,M as G}from"./client.2d90b757.js";import{I as L,a as Y,P as H}from"./PlanetCard.f86f4338.js";function j(e,t,n){const r=e.slice();return r[15]=t[n],r}function U(e){let t,n,r=void 0!==e[5][e[0].type]&&B(e);return{c(){t=o("div"),r&&r.c(),this.h()},l(e){t=l(e,"DIV",{class:!0});var n=a(t);r&&r.l(n),n.forEach(s),this.h()},h(){c(t,"class","desc svelte-4d9gi8")},m(e,o){d(e,t,o),r&&r.m(t,null),n=!0},p(e,n){void 0!==e[5][e[0].type]?r?(r.p(e,n),p(r,1)):((r=B(e)).c(),p(r,1),r.m(t,null)):r&&(h(),f(r,1,1,()=>{r=null}),m())},i(e){n||(p(r),n=!0)},o(e){f(r),n=!1},d(e){e&&s(t),r&&r.d()}}}function B(e){let t,n,r=e[5][e[0].type].desc.action.split("<icon>"),i=[];for(let t=0;t<r.length;t+=1)i[t]=J(j(e,r,t));const u=e=>f(i[e],1,1,()=>{i[e]=null});return{c(){t=o("p");for(let e=0;e<i.length;e+=1)i[e].c();this.h()},l(e){t=l(e,"P",{class:!0});var n=a(t);for(let e=0;e<i.length;e+=1)i[e].l(n);n.forEach(s),this.h()},h(){c(t,"class","action svelte-4d9gi8")},m(e,r){d(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,n){if(33&n){let o;for(r=e[5][e[0].type].desc.action.split("<icon>"),o=0;o<r.length;o+=1){const l=j(e,r,o);i[o]?(i[o].p(l,n),p(i[o],1)):(i[o]=J(l),i[o].c(),p(i[o],1),i[o].m(t,null))}for(h(),o=r.length;o<i.length;o+=1)u(o);m()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)p(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)f(i[e]);n=!1},d(e){e&&s(t),g(i,e)}}}function F(e){let t,n=e[15]+"";return{c(){t=_(n)},l(e){t=w(e,n)},m(e,n){d(e,t,n)},p(e,r){1&r&&n!==(n=e[15]+"")&&E(t,n)},i:D,o:D,d(e){e&&s(t)}}}function W(e){let t;const n=new Y({props:{type:e[15],size:"sm"}});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.type=e[15]),n.$set(r)},i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}function J(e){let t,n,r,o,i;const l=[W,F],a=[];function c(e,n){return 1&n&&(t=!!["survey","warfare","colonize","research","produce","trade"].includes(e[15])),t?0:1}return n=c(e,-1),r=a[n]=l[n](e),{c(){r.c(),o=u()},l(e){r.l(e),o=u()},m(e,t){a[n].m(e,t),d(e,o,t),i=!0},p(e,t){let i=n;(n=c(e,t))===i?a[n].p(e,t):(h(),f(a[i],1,1,()=>{a[i]=null}),m(),(r=a[n])||(r=a[n]=l[n](e)).c(),p(r,1),r.m(o.parentNode,o))},i(e){i||(p(r),i=!0)},o(e){f(r),i=!1},d(e){a[n].d(e),e&&s(o)}}}function K(e){let t,n,i,u,g,I,R,D,A,O,N,V,T,M,G=e[0].name+"";const Y=[e[0].icons];let H={};for(let e=0;e<Y.length;e+=1)H=r(H,Y[e]);const j=new L({props:H});let B=!e[2]&&U(e);return{c(){t=o("div"),n=o("div"),y(j.$$.fragment),i=v(),u=o("p"),g=_(G),I=v(),R=o("div"),D=o("img"),N=v(),B&&B.c(),this.h()},l(e){t=l(e,"DIV",{class:!0,style:!0});var r=a(t);n=l(r,"DIV",{class:!0});var o=a(n);b(j.$$.fragment,o),i=z(o),u=l(o,"P",{class:!0});var c=a(u);g=w(c,G),c.forEach(s),o.forEach(s),I=z(r),R=l(r,"DIV",{class:!0,style:!0});var d=a(R);D=l(d,"IMG",{src:!0,alt:!0,class:!0}),d.forEach(s),N=z(r),B&&B.l(r),r.forEach(s),this.h()},h(){c(u,"class","svelte-4d9gi8"),c(n,"class","title svelte-4d9gi8"),D.src!==(A="./images/tech.svg")&&c(D,"src","./images/tech.svg"),c(D,"alt",O=e[0].name),c(D,"class","svelte-4d9gi8"),c(R,"class","logo svelte-4d9gi8"),c(R,"style",e[4]),c(t,"class",V="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[2]?"mini":"")+" svelte-4d9gi8"),c(t,"style",e[3])},m(r,o,l){d(r,t,o),$(t,n),k(j,n,null),$(n,i),$(n,u),$(u,g),$(t,I),$(t,R),$(R,D),$(t,N),B&&B.m(t,null),T=!0,l&&q(M),M=[C(t,"click",e[9]),C(t,"touch",e[10]),C(t,"touchstart",e[11]),C(t,"touchend",e[12]),C(t,"tap",e[13]),C(t,"touchmove",e[14])]},p(e,[n]){const r=1&n?P(Y,[x(e[0].icons)]):{};j.$set(r),(!T||1&n)&&G!==(G=e[0].name+"")&&E(g,G),(!T||1&n&&O!==(O=e[0].name))&&c(D,"alt",O),(!T||16&n)&&c(R,"style",e[4]),e[2]?B&&(h(),f(B,1,1,()=>{B=null}),m()):B?(B.p(e,n),p(B,1)):((B=U(e)).c(),p(B,1),B.m(t,null)),(!T||7&n&&V!==(V="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[2]?"mini":"")+" svelte-4d9gi8"))&&c(t,"class",V),(!T||8&n)&&c(t,"style",e[3])},i(e){T||(p(j.$$.fragment,e),p(B),T=!0)},o(e){f(j.$$.fragment,e),f(B),T=!1},d(e){e&&s(t),S(j),B&&B.d(),q(M)}}}function X(e,t,n){let r=(e,t=0)=>(console.log("str",e),console.log("length",e.length),t>=e.length?0:r(e,t+1)+((e.charCodeAt(t)<<5)-e.charCodeAt(t))),o=e=>{let t=(e>>24&255).toString(16)+(e>>16&255).toString(16)+(e>>8&255).toString(16)+(255&e).toString(16);return(t+="000000").substring(0,6)};String.prototype.toHexColour=(()=>o(r(this)));let i,l,a,{card:s={name:" "}}=t,{selectable:c=!1}=t,{mini:d=!1}=t;return I(()=>{console.log("card name",s.name),i="#"+o(r(s.name)),n(3,l=`color:${i};background-image:linear-gradient( rgb(80,80,80),  rgb(80,80,80) 5vh,  rgb(80,80,80) 5vh,  ${i} 8vh,  ${i} 8vh,  ${i} 12vh,  ${i} 12vh,  rgb(80,80,80) 16vh );`),n(4,a=`background-color: ${i};`)}),e.$set=(e=>{"card"in e&&n(0,s=e.card),"selectable"in e&&n(1,c=e.selectable),"mini"in e&&n(2,d=e.mini)}),[s,c,d,l,a,{" ":{desc:{role:"",action:""}},survey:{desc:{role:"Look at <icon>survey<icon> -1 planet cards, keep 1 \n Leader: Look at 1 additional card",action:"Draw 3 cards"}},warfare:{desc:{role:"Collect 1 fighter per <icon>warfare<icon> \n Leader: May attack 1 planet instead",action:"Attack 1 planet OR collect 1 fighter"}},colonize:{desc:{action:"Settle 1 planet OR +1 colony",role:"+1 colony per <icon>colonize<icon> \n Leader: May settle 1 planet instead"}},producetrade:{desc:{action:"Produce 1 resource OR Trade 1 resource",role:"Produce 1 resource per <icon>produce<icon> OR Trade 1 resource per <icon>trade<icon> \n Leader: +<icon>produce<icon> OR <icon>trade<icon>"}},research:{desc:{action:"Remove up to 3 cards in your and from the game",role:"Auire 1 technology card after satisfying <icon>research<icon> costs and planet requirements \n Leader: +<icon>research<icon>"}},politics:{desc:{action:"Remove tis card from the game. Place any 1 role card from the stacks into your hand",role:""}},improved_trade:{desc:{action:"Collect 1 influence from the supply",role:""}},improved_research:{desc:{action:"Draw 1 card. Remove up to 3 cards in your hand from the game",role:""}},improved_production:{desc:{action:"Produce 2 resources",role:""}},improved_warfare:{desc:{action:"Collect 2 fighter OR Attack 1 planet",role:""}},improved_colonize:{desc:{action:"Settle 1 planet (optional). \n Settle another planet OR +1 colony",role:""}},improved_survey:{desc:{action:"Draw 3 cards",role:""}},survey_team:{desc:{action:"Take the top card of the planet deck and put it face down into your empire",role:""}},war_path:{desc:{action:"Attack up to 2 planets",role:""}},terraforming:{desc:{action:"Add this card to a planet as 2 colonies. If that fulfills the printed colonize cost, settle the planet \n (ignore colonize cost discounts)",role:""}},genetic_engineering:{desc:{action:"Collect +1 influence for each TYPE of resource you produce this turn",role:""}},"artificial_intelligence'":{desc:{action:"Place any 2 role cards from the stacks into your hand",role:""}},diverse_markets:{desc:{action:"Collect +1 influence for each TYPE of resource you trade this turn",role:""}},specialization:{desc:{action:"Choose 1 resource TYPE. Collect +1 influence for each resource of that TYPE you trade this turn",role:""}},mobilization:{desc:{action:"Collect 2 fighter. You may attack 1 planet after your role phase this turn",role:""}},data_network:{desc:{action:"Draw 2 cards. Remove any number of cards in your hand from the game",role:""}},abundance:{desc:{action:"Planets you settle or attack come into play with all resource slots filled",role:""}},adaptability:{desc:{action:"Your standard research role cards gain all symboles. They can be used to boost or follow any role",role:""}},bureaucracy:{desc:{action:"You may use the leader bonus when following the colonize or warfare roles",role:""}},dissension:{desc:{action:"Draw 1 dditional card when dissenting",role:""}},hyperefficiency:{desc:{action:"You may remove any number of cards in your hand form the game each turn",role:""}},imperialism:{desc:{action:"<icon>survey<icon> <icon>trade<icon> <icon>warfare<icon>",role:""}},logistics:{desc:{action:"Play the action and role phases of your turn in any order",role:""}},productivity:{desc:{action:"You may play an additional card for its action effect during your action phase",role:""}},scorched_earth_policy:{desc:{action:"-2 to our warfare costs. When you attack a planet, leave a fight on it. that planet cannot store resources",role:""}},streamlining:{desc:{action:"You may remove 1 card in your hand from the game each turn",role:""}},weapons_emporium:{desc:{action:"You may trade fighters as if they were resources (fighter is not a resource TYPE)",role:""}},fertile_grounds:{desc:{role:"<icon>colonize<icon> <icon>produce<icon> <icon>research<icon>",action:""}}},i,r,o,function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)}]}class Z extends e{constructor(e){super(),t(this,e,X,K,n,{card:0,selectable:1,mini:2})}}function Q(e,t,n){const r=e.slice();return r[15]=t[n],r}function ee(e,t,n){const r=e.slice();return r[15]=t[n],r}function te(e){let t,n,r,i,u,g,y,b,k,P,x,S,I,R,D;const A=[ie,oe],O=[];function N(e,t){return e[5]?1:0}r=N(e),i=O[r]=A[r](e);const V=[ae,le],T=[];function M(e,t){return e[5]?1:0}P=M(e),x=T[P]=V[P](e);let G=!e[3]&&se(e);return{c(){t=o("div"),n=o("div"),i.c(),u=v(),g=o("p"),y=_(e[4]),b=v(),k=o("div"),x.c(),S=v(),G&&G.c(),this.h()},l(r){t=l(r,"DIV",{class:!0,style:!0});var o=a(t);n=l(o,"DIV",{class:!0});var c=a(n);i.l(c),u=z(c),g=l(c,"P",{class:!0});var d=a(g);y=w(d,e[4]),d.forEach(s),c.forEach(s),b=z(o),k=l(o,"DIV",{class:!0,style:!0});var p=a(k);x.l(p),p.forEach(s),S=z(o),G&&G.l(o),o.forEach(s),this.h()},h(){c(g,"class","svelte-103yabx"),c(n,"class","title svelte-103yabx"),c(k,"class","logo svelte-103yabx"),c(k,"style",e[7]),c(t,"class",I="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[3]?"mini":"")+" svelte-103yabx"),c(t,"style",e[6])},m(o,i,l){d(o,t,i),$(t,n),O[r].m(n,null),$(n,u),$(n,g),$(g,y),$(t,b),$(t,k),T[P].m(k,null),$(t,S),G&&G.m(t,null),R=!0,l&&q(D),D=[C(t,"click",e[9]),C(t,"touch",e[10]),C(t,"touchstart",e[11]),C(t,"touchend",e[12]),C(t,"tap",e[13]),C(t,"touchmove",e[14])]},p(e,o){let l=r;(r=N(e))===l?O[r].p(e,o):(h(),f(O[l],1,1,()=>{O[l]=null}),m(),(i=O[r])||(i=O[r]=A[r](e)).c(),p(i,1),i.m(n,u)),(!R||16&o)&&E(y,e[4]);let a=P;(P=M(e))===a?T[P].p(e,o):(h(),f(T[a],1,1,()=>{T[a]=null}),m(),(x=T[P])||(x=T[P]=V[P](e)).c(),p(x,1),x.m(k,null)),(!R||128&o)&&c(k,"style",e[7]),e[3]?G&&(h(),f(G,1,1,()=>{G=null}),m()):G?(G.p(e,o),p(G,1)):((G=se(e)).c(),p(G,1),G.m(t,null)),(!R||11&o&&I!==(I="mdc-card "+(e[1]?e[0].selected?"selected":"selectable":"bordered")+" "+(e[3]?"mini":"")+" svelte-103yabx"))&&c(t,"class",I),(!R||64&o)&&c(t,"style",e[6])},i(e){R||(p(i),p(x),p(G),R=!0)},o(e){f(i),f(x),f(G),R=!1},d(e){e&&s(t),O[r].d(),T[P].d(),G&&G.d(),q(D)}}}function ne(e){let t;const n=new Z({props:{card:e[0],selectable:e[1],mini:e[3]}});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.card=e[0]),2&t&&(r.selectable=e[1]),8&t&&(r.mini=e[3]),n.$set(r)},i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}function re(e){let t;const n=new H({props:{planet:e[0],selectable:e[1],mini:e[3]}});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.planet=e[0]),2&t&&(r.selectable=e[1]),8&t&&(r.mini=e[3]),n.$set(r)},i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}function oe(e){let t;const n=new Y({props:{type:e[0].type,size:"sm"}});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.type=e[0].type),n.$set(r)},i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}function ie(e){let t,n;const r=new Y({props:{type:"produce",size:"sm"}}),o=new Y({props:{type:"trade",size:"sm"}});return{c(){y(r.$$.fragment),t=v(),y(o.$$.fragment)},l(e){b(r.$$.fragment,e),t=z(e),b(o.$$.fragment,e)},m(e,i){k(r,e,i),d(e,t,i),k(o,e,i),n=!0},p:D,i(e){n||(p(r.$$.fragment,e),p(o.$$.fragment,e),n=!0)},o(e){f(r.$$.fragment,e),f(o.$$.fragment,e),n=!1},d(e){S(r,e),e&&s(t),S(o,e)}}}function le(e){let t,n;return{c(){t=o("img"),this.h()},l(e){t=l(e,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){t.src!==(n="./images/"+e[5]+".svg")&&c(t,"src",n),c(t,"alt",e[5]),c(t,"class","svelte-103yabx")},m(e,n){d(e,t,n)},p(e,r){32&r&&t.src!==(n="./images/"+e[5]+".svg")&&c(t,"src",n),32&r&&c(t,"alt",e[5])},i:D,o:D,d(e){e&&s(t)}}}function ae(e){let t,n,r;const i=new Y({props:{type:"produce",size:"sm"}}),u=new Y({props:{type:"trade",size:"sm"}});return{c(){t=o("div"),y(i.$$.fragment),n=v(),y(u.$$.fragment),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var r=a(t);b(i.$$.fragment,r),n=z(r),b(u.$$.fragment,r),r.forEach(s),this.h()},h(){O(t,"display","flex"),O(t,"flex-direction","row"),c(t,"class","svelte-103yabx")},m(e,o){d(e,t,o),k(i,t,null),$(t,n),k(u,t,null),r=!0},p:D,i(e){r||(p(i.$$.fragment,e),p(u.$$.fragment,e),r=!0)},o(e){f(i.$$.fragment,e),f(u.$$.fragment,e),r=!1},d(e){e&&s(t),S(i),S(u)}}}function se(e){let t,n,r,i,u,g,y=void 0!==e[8][e[0].type]&&ce(e);return{c(){t=o("div"),y&&y.c(),n=v(),r=o("div"),i=_(e[2]),u=_(" remaining"),this.h()},l(o){t=l(o,"DIV",{class:!0});var c=a(t);y&&y.l(c),c.forEach(s),n=z(o),r=l(o,"DIV",{class:!0});var d=a(r);i=w(d,e[2]),u=w(d," remaining"),d.forEach(s),this.h()},h(){c(t,"class","desc svelte-103yabx"),c(r,"class","pilecount svelte-103yabx")},m(e,o){d(e,t,o),y&&y.m(t,null),d(e,n,o),d(e,r,o),$(r,i),$(r,u),g=!0},p(e,n){void 0!==e[8][e[0].type]?y?(y.p(e,n),p(y,1)):((y=ce(e)).c(),p(y,1),y.m(t,null)):y&&(h(),f(y,1,1,()=>{y=null}),m()),(!g||4&n)&&E(i,e[2])},i(e){g||(p(y),g=!0)},o(e){f(y),g=!1},d(e){e&&s(t),y&&y.d(),e&&s(n),e&&s(r)}}}function ce(e){let t,n,r,i,u=e[8][e[0].type].desc.action.split("<icon>"),y=[];for(let t=0;t<u.length;t+=1)y[t]=ue(ee(e,u,t));const _=e=>f(y[e],1,1,()=>{y[e]=null});let b=e[8][e[0].type].desc.role.split("<icon>"),w=[];for(let t=0;t<b.length;t+=1)w[t]=me(Q(e,b,t));const $=e=>f(w[e],1,1,()=>{w[e]=null});return{c(){t=o("p");for(let e=0;e<y.length;e+=1)y[e].c();n=v(),r=o("p");for(let e=0;e<w.length;e+=1)w[e].c();this.h()},l(e){t=l(e,"P",{class:!0});var o=a(t);for(let e=0;e<y.length;e+=1)y[e].l(o);o.forEach(s),n=z(e),r=l(e,"P",{class:!0});var i=a(r);for(let e=0;e<w.length;e+=1)w[e].l(i);i.forEach(s),this.h()},h(){c(t,"class","action svelte-103yabx"),c(r,"class","role svelte-103yabx")},m(e,o){d(e,t,o);for(let e=0;e<y.length;e+=1)y[e].m(t,null);d(e,n,o),d(e,r,o);for(let e=0;e<w.length;e+=1)w[e].m(r,null);i=!0},p(e,n){if(257&n){let r;for(u=e[8][e[0].type].desc.action.split("<icon>"),r=0;r<u.length;r+=1){const o=ee(e,u,r);y[r]?(y[r].p(o,n),p(y[r],1)):(y[r]=ue(o),y[r].c(),p(y[r],1),y[r].m(t,null))}for(h(),r=u.length;r<y.length;r+=1)_(r);m()}if(257&n){let t;for(b=e[8][e[0].type].desc.role.split("<icon>"),t=0;t<b.length;t+=1){const o=Q(e,b,t);w[t]?(w[t].p(o,n),p(w[t],1)):(w[t]=me(o),w[t].c(),p(w[t],1),w[t].m(r,null))}for(h(),t=b.length;t<w.length;t+=1)$(t);m()}},i(e){if(!i){for(let e=0;e<u.length;e+=1)p(y[e]);for(let e=0;e<b.length;e+=1)p(w[e]);i=!0}},o(e){y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)f(y[e]);w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)f(w[e]);i=!1},d(e){e&&s(t),g(y,e),e&&s(n),e&&s(r),g(w,e)}}}function de(e){let t,n=e[15]+"";return{c(){t=_(n)},l(e){t=w(e,n)},m(e,n){d(e,t,n)},p(e,r){1&r&&n!==(n=e[15]+"")&&E(t,n)},i:D,o:D,d(e){e&&s(t)}}}function pe(e){let t;const n=new Y({props:{type:e[15],size:"sm"}});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.type=e[15]),n.$set(r)},i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}function ue(e){let t,n,r,o,i;const l=[pe,de],a=[];function c(e,n){return 1&n&&(t=!!["survey","warfare","colonize","research","produce","trade","politics"].includes(e[15])),t?0:1}return n=c(e,-1),r=a[n]=l[n](e),{c(){r.c(),o=u()},l(e){r.l(e),o=u()},m(e,t){a[n].m(e,t),d(e,o,t),i=!0},p(e,t){let i=n;(n=c(e,t))===i?a[n].p(e,t):(h(),f(a[i],1,1,()=>{a[i]=null}),m(),(r=a[n])||(r=a[n]=l[n](e)).c(),p(r,1),r.m(o.parentNode,o))},i(e){i||(p(r),i=!0)},o(e){f(r),i=!1},d(e){a[n].d(e),e&&s(o)}}}function he(e){let t,n=e[15]+"";return{c(){t=_(n)},l(e){t=w(e,n)},m(e,n){d(e,t,n)},p(e,r){1&r&&n!==(n=e[15]+"")&&E(t,n)},i:D,o:D,d(e){e&&s(t)}}}function fe(e){let t;const n=new Y({props:{type:e[15],size:"sm"}});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.type=e[15]),n.$set(r)},i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}function me(e){let t,n,r,o,i;const l=[fe,he],a=[];function c(e,n){return 1&n&&(t=!!["survey","warfare","colonize","research","produce","trade","politics"].includes(e[15])),t?0:1}return n=c(e,-1),r=a[n]=l[n](e),{c(){r.c(),o=u()},l(e){r.l(e),o=u()},m(e,t){a[n].m(e,t),d(e,o,t),i=!0},p(e,t){let i=n;(n=c(e,t))===i?a[n].p(e,t):(h(),f(a[i],1,1,()=>{a[i]=null}),m(),(r=a[n])||(r=a[n]=l[n](e)).c(),p(r,1),r.m(o.parentNode,o))},i(e){i||(p(r),i=!0)},o(e){f(r),i=!1},d(e){a[n].d(e),e&&s(o)}}}function ge(e){let t,n,r,o,i;const l=[re,ne,te],a=[];function c(e,n){return"planet"==e[0].type||"advanced"==e[0].type||"metallic"==e[0].type||"fertile"==e[0].type?0:(1&n&&(t=!["survey","warfare","colonize","research","producetrade","politics"].includes(e[0].type)),t?1:2)}return n=c(e,-1),r=a[n]=l[n](e),{c(){r.c(),o=u()},l(e){r.l(e),o=u()},m(e,t){a[n].m(e,t),d(e,o,t),i=!0},p(e,[t]){let i=n;(n=c(e,t))===i?a[n].p(e,t):(h(),f(a[i],1,1,()=>{a[i]=null}),m(),(r=a[n])||(r=a[n]=l[n](e)).c(),p(r,1),r.m(o.parentNode,o))},i(e){i||(p(r),i=!0)},o(e){f(r),i=!1},d(e){a[n].d(e),e&&s(o)}}}function ye(e,t,n){let r,o,i,l,{card:a}=t,{selectable:s=!1}=t,{pilecount:c=""}=t,{mini:d=!1}=t;return A(()=>{n(0,a.type=a.type+"",a)}),e.$set=(e=>{"card"in e&&n(0,a=e.card),"selectable"in e&&n(1,s=e.selectable),"pilecount"in e&&n(2,c=e.pilecount),"mini"in e&&n(3,d=e.mini)}),e.$$.update=(()=>{33&e.$$.dirty&&(n(4,r=a.type.charAt(0).toUpperCase()+a.type.slice(1)),n(5,o={producetrade:!1,produce:"pro",trade:"trd",research:"res",politics:"pol",survey:"sur",warfare:"war",colonize:"col"}[a.type]),n(6,i=o?`color:var(--${o}-color);background-image:linear-gradient( rgb(80,80,80),  rgb(80,80,80) 5vh,  rgb(80,80,80) 5vh,  var(--${o}-color) 8vh,  var(--${o}-color) 8vh,  var(--${o}-color) 12vh,  var(--${o}-color) 12vh,  rgb(80,80,80) 16vh );`:"color:var(--pro-color);background-image:linear-gradient( rgb(80,80,80),  rgb(80,80,80) 5vh,  rgb(80,80,80) 5vh,  var(--pro-color) 8vh,  var(--pro-color) 8vh,  var(--trd-color) 12vh,  var(--trd-color) 12vh,  rgb(80,80,80) 16vh );"),n(7,l=o?`background-color: var(--${o}-color);`:"background: var(--pro-trd-clr);"))}),[a,s,c,d,r,o,i,l,{survey:{desc:{role:"Look at <icon>survey<icon> -1 planet cards, keep 1 \n Leader: Look at 1 additional card",action:"Draw 3 cards"}},warfare:{desc:{role:"Collect 1 fighter per <icon>warfare<icon> \n Leader: May attack 1 planet instead",action:"Attack 1 planet OR collect 1 fighter"}},colonize:{desc:{action:"Settle 1 planet OR +1 colony",role:"+1 colony per <icon>colonize<icon> \n Leader: May settle 1 planet instead"}},producetrade:{desc:{action:"Produce 1 resource OR Trade 1 resource",role:"Produce 1 resource per <icon>produce<icon> OR Trade 1 resource per <icon>trade<icon> \n Leader: +<icon>produce<icon> OR <icon>trade<icon>"}},research:{desc:{action:"Remove up to 3 cards in your and from the game",role:"Aquire 1 technology card after satisfying <icon>research<icon> costs and planet requirements \n Leader: +<icon>research<icon>"}},politics:{desc:{action:"Remove tis card from the game. Place any 1 role card from the stacks into your hand",role:""}}},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)},function(t){R(e,t)}]}class ve extends e{constructor(e){super(),t(this,e,ye,ge,n,{card:0,selectable:1,pilecount:2,mini:3})}}function _e(e,t,n){const r=e.slice();return r[177]=t[n],r}function be(e,t,n){const r=e.slice();return r[183]=t[n],r}function ze(e,t,n){const r=e.slice();return r[183]=t[n],r}function we(e,t,n){const r=e.slice();return r[188]=t[n],r}function $e(e,t,n){const r=e.slice();return r[188]=t[n],r}function ke(e,t,n){const r=e.slice();return r[183]=t[n],r}function qe(e,t,n){const r=e.slice();return r[183]=t[n],r}function Ce(e,t,n){const r=e.slice();return r[197]=t[n],r}function Pe(e,t,n){const r=e.slice();return r[180]=t[n],r}function xe(e,t,n){const r=e.slice();return r[174]=t[n],r}function Ee(e){let t,n,r,o;const i=[Ne,Oe,Ae,De,Re,Ie,Se],l=[];function a(e,t){return-4==e[0].currentphase?0:-3==e[0].currentphase?1:-2==e[0].currentphase?2:-1==e[0].currentphase?3:e[0].passtoplayer&&!e[1].online?4:e[0].winner?5:6}return t=a(e),n=l[t]=i[t](e),{c(){n.c(),r=u()},l(e){n.l(e),r=u()},m(e,n){l[t].m(e,n),d(e,r,n),o=!0},p(e,o){let s=t;(t=a(e))===s?l[t].p(e,o):(h(),f(l[s],1,1,()=>{l[s]=null}),m(),(n=l[t])||(n=l[t]=i[t](e)).c(),p(n,1),n.m(r.parentNode,r))},i(e){o||(p(n),o=!0)},o(e){f(n),o=!1},d(e){l[t].d(e),e&&s(r)}}}function Se(e){let t,n,r,i,u,y=e[0].players,_=[];for(let t=0;t<y.length;t+=1)_[t]=et(Pe(e,y,t));const b=e=>f(_[e],1,1,()=>{_[e]=null});let w="options"==e[0].displayinfo.selectionzone&&tt(e);return{c(){t=o("div"),n=v(),r=o("div");for(let e=0;e<_.length;e+=1)_[e].c();i=v(),w&&w.c(),this.h()},l(e){t=l(e,"DIV",{class:!0}),a(t).forEach(s),n=z(e),r=l(e,"DIV",{id:!0,style:!0,class:!0});var o=a(r);for(let e=0;e<_.length;e+=1)_[e].l(o);i=z(o),w&&w.l(o),o.forEach(s),this.h()},h(){c(t,"class","stars svelte-iqexfp"),c(r,"id","screen"),O(r,"height","100%"),O(r,"width","100%"),c(r,"class","flex svelte-iqexfp")},m(e,o){d(e,t,o),d(e,n,o),d(e,r,o);for(let e=0;e<_.length;e+=1)_[e].m(r,null);$(r,i),w&&w.m(r,null),u=!0},p(e,t){if(238075&t[0]){let n;for(y=e[0].players,n=0;n<y.length;n+=1){const o=Pe(e,y,n);_[n]?(_[n].p(o,t),p(_[n],1)):(_[n]=et(o),_[n].c(),p(_[n],1),_[n].m(r,i))}for(h(),n=y.length;n<_.length;n+=1)b(n);m()}"options"==e[0].displayinfo.selectionzone?w?(w.p(e,t),p(w,1)):((w=tt(e)).c(),p(w,1),w.m(r,null)):w&&(h(),f(w,1,1,()=>{w=null}),m())},i(e){if(!u){for(let e=0;e<y.length;e+=1)p(_[e]);p(w),u=!0}},o(e){_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)f(_[e]);f(w),u=!1},d(e){e&&s(t),e&&s(n),e&&s(r),g(_,e),w&&w.d()}}}function Ie(e){let t,n,r,i=e[0].winner+"";return{c(){t=o("div"),n=_(i),r=_(" WON!!!!"),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=w(o,i),r=w(o," WON!!!!"),o.forEach(s),this.h()},h(){c(t,"class","passtoplayer svelte-iqexfp")},m(e,o){d(e,t,o),$(t,n),$(t,r)},p(e,t){1&t[0]&&i!==(i=e[0].winner+"")&&E(n,i)},i:D,o:D,d(e){e&&s(t)}}}function Re(e){let t,n,r;return{c(){t=o("div"),n=_("pass to next player"),this.h()},l(e){t=l(e,"DIV",{class:!0});var r=a(t);n=w(r,"pass to next player"),r.forEach(s),this.h()},h(){c(t,"class","passtoplayer svelte-iqexfp")},m(o,i,l){d(o,t,i),$(t,n),l&&q(r),r=[C(t,"click",e[138]),C(t,"tap",e[139])]},p:D,i:D,o:D,d(e){e&&s(t),q(r)}}}function De(e){let t,n,r,i,p=e[1].existinggames,u=[];for(let t=0;t<p.length;t+=1)u[t]=it(xe(e,p,t));return{c(){t=o("div"),n=o("p"),r=_("Choose a Game to Join"),i=v();for(let e=0;e<u.length;e+=1)u[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=l(o,"P",{class:!0});var c=a(n);r=w(c,"Choose a Game to Join"),c.forEach(s),i=z(o);for(let e=0;e<u.length;e+=1)u[e].l(o);o.forEach(s),this.h()},h(){c(n,"class","svelte-iqexfp"),c(t,"class","playercountselector svelte-iqexfp")},m(e,o){d(e,t,o),$(t,n),$(n,r),$(t,i);for(let e=0;e<u.length;e+=1)u[e].m(t,null)},p(e,n){if(4098&n[0]){let r;for(p=e[1].existinggames,r=0;r<p.length;r+=1){const o=xe(e,p,r);u[r]?u[r].p(o,n):(u[r]=it(o),u[r].c(),u[r].m(t,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=p.length}},i:D,o:D,d(e){e&&s(t),g(u,e)}}}function Ae(e){let t,n,r,i,p,u,h,f,m,g,y,b,k;return{c(){t=o("div"),n=o("p"),r=_("Choose your Game's number of Players"),i=v(),p=o("p"),u=_("2"),h=v(),f=o("p"),m=_("3"),g=v(),y=o("p"),b=_("4"),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=l(o,"P",{class:!0});var c=a(n);r=w(c,"Choose your Game's number of Players"),c.forEach(s),i=z(o),p=l(o,"P",{class:!0});var d=a(p);u=w(d,"2"),d.forEach(s),h=z(o),f=l(o,"P",{class:!0});var v=a(f);m=w(v,"3"),v.forEach(s),g=z(o),y=l(o,"P",{class:!0});var _=a(y);b=w(_,"4"),_.forEach(s),o.forEach(s),this.h()},h(){c(n,"class","svelte-iqexfp"),c(p,"class","svelte-iqexfp"),c(f,"class","svelte-iqexfp"),c(y,"class","svelte-iqexfp"),c(t,"class","playercountselector svelte-iqexfp")},m(o,l,a){d(o,t,l),$(t,n),$(n,r),$(t,i),$(t,p),$(p,u),$(t,h),$(t,f),$(f,m),$(t,g),$(t,y),$(y,b),a&&q(k),k=[C(p,"click",e[130]),C(p,"tap",e[131]),C(f,"click",e[132]),C(f,"tap",e[133]),C(y,"click",e[134]),C(y,"tap",e[135])]},p:D,i:D,o:D,d(e){e&&s(t),q(k)}}}function Oe(e){let t,n,r,i,p,u,h,f,m,g;return{c(){t=o("div"),n=o("p"),r=_("Start a New Online Game"),i=v(),p=o("p"),u=_("Join an Existing Online Game"),h=v(),f=o("p"),m=_("Start a New Offline Game"),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=l(o,"P",{class:!0});var c=a(n);r=w(c,"Start a New Online Game"),c.forEach(s),i=z(o),p=l(o,"P",{class:!0});var d=a(p);u=w(d,"Join an Existing Online Game"),d.forEach(s),h=z(o),f=l(o,"P",{class:!0});var g=a(f);m=w(g,"Start a New Offline Game"),g.forEach(s),o.forEach(s),this.h()},h(){c(n,"class","svelte-iqexfp"),c(p,"class","svelte-iqexfp"),c(f,"class","svelte-iqexfp"),c(t,"class","playercountselector svelte-iqexfp")},m(o,l,a){d(o,t,l),$(t,n),$(n,r),$(t,i),$(t,p),$(p,u),$(t,h),$(t,f),$(f,m),a&&q(g),g=[C(n,"click",e[124]),C(n,"tap",e[125]),C(p,"click",e[126]),C(p,"tap",e[127]),C(f,"click",e[128]),C(f,"tap",e[129])]},p:D,i:D,o:D,d(e){e&&s(t),q(g)}}}function Ne(e){let t,n,r,i,p,u,h,f,m;return{c(){t=o("div"),n=o("p"),r=_("Choose your Screen Name"),i=v(),p=o("input"),u=v(),h=o("p"),f=_("Finished"),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=l(o,"P",{class:!0});var c=a(n);r=w(c,"Choose your Screen Name"),c.forEach(s),i=z(o),p=l(o,"INPUT",{type:!0,class:!0}),u=z(o),h=l(o,"P",{class:!0});var d=a(h);f=w(d,"Finished"),d.forEach(s),o.forEach(s),this.h()},h(){c(n,"class","svelte-iqexfp"),c(p,"type","text"),c(p,"class","svelte-iqexfp"),c(h,"class","svelte-iqexfp"),c(t,"class","playercountselector svelte-iqexfp")},m(o,l,a){d(o,t,l),$(t,n),$(n,r),$(t,i),$(t,p),M(p,e[1].screenname),$(t,u),$(t,h),$(h,f),a&&q(m),m=[C(p,"input",e[120]),C(p,"keypress",e[121]),C(h,"click",e[122]),C(h,"tap",e[123])]},p(e,t){2&t[0]&&p.value!==e[1].screenname&&M(p,e[1].screenname)},i:D,o:D,d(e){e&&s(t),q(m)}}}function Ve(e){let t,n,r,i,u,y,b,k,P,x,S,I,R,D,A,O,N,T,M,L,Y,H,j,U,B,F,W,J,K,X,Z,Q,ee,te=e[0].displayinfo.center_or_planets?"planets":"center row",ne=[],re=new Map,oe=e[0].messagetoplayer[e[0].messagetoplayer.length-1]+"",ie=e[180].deck.length+"",le=[],ae=new Map,se=e[180].discard.length+"",ce=e[0].players,de=[];for(let t=0;t<ce.length;t+=1)de[t]=Te(Ce(e,ce,t));const pe=[Ge,Me],ue=[];function he(e,t){return"research"==e[0].displayinfo.selectionzone?0:e[0].displayinfo.center_or_planets?1:-1}~(x=he(e))&&(S=ue[x]=pe[x](e));let fe=!e[0].displayinfo.center_or_planets&&He(e);function me(e,t){return e[0].displayinfo.showoptiontoskip?Fe:Be}let ge=me(e),ye=ge(e),ve=e[0].players[e[0].acting_player_index].limbo;const _e=e=>e[183].id;for(let t=0;t<ve.length;t+=1){let n=ze(e,ve,t),r=_e(n);re.set(r,ne[t]=We(r,n))}function we(e,t){return e[0].passp?Ze:e[0].passt?Xe:e[0].displayinfo.allowformultipleselections&&e[0].choices.length>0?Ke:Je}let $e=we(e),ke=$e(e),qe=e[180].hand;const Pe=e=>e[183].id;for(let t=0;t<qe.length;t+=1){let n=be(e,qe,t),r=Pe(n);ae.set(r,le[t]=Qe(r,n))}return{c(){t=o("div"),n=o("div"),r=v(),i=o("div");for(let e=0;e<de.length;e+=1)de[e].c();u=v(),y=o("div"),b=_("show "),k=_(te),P=v(),S&&S.c(),I=v(),fe&&fe.c(),R=v(),D=o("div"),ye.c(),A=v();for(let e=0;e<ne.length;e+=1)ne[e].c();O=v(),ke.c(),N=v(),T=o("div"),M=_(oe),L=v(),Y=o("div"),H=o("div"),j=_("cards remaining in deck: "),U=_(ie),B=v(),F=o("div");for(let e=0;e<le.length;e+=1)le[e].c();W=v(),J=o("div"),K=_("cards in discard pile: "),X=_(se),Z=v(),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=l(o,"DIV",{id:!0,class:!0}),a(n).forEach(s),r=z(o),i=l(o,"DIV",{class:!0});var c=a(i);for(let e=0;e<de.length;e+=1)de[e].l(c);c.forEach(s),u=z(o),y=l(o,"DIV",{class:!0});var d=a(y);b=w(d,"show "),k=w(d,te),d.forEach(s),P=z(o),S&&S.l(o),I=z(o),fe&&fe.l(o),R=z(o),D=l(o,"DIV",{id:!0,class:!0});var p=a(D);ye.l(p),A=z(p);for(let e=0;e<ne.length;e+=1)ne[e].l(p);O=z(p),ke.l(p),p.forEach(s),N=z(o),T=l(o,"DIV",{class:!0});var h=a(T);M=w(h,oe),h.forEach(s),L=z(o),Y=l(o,"DIV",{class:!0});var f=a(Y);H=l(f,"DIV",{class:!0});var m=a(H);j=w(m,"cards remaining in deck: "),U=w(m,ie),m.forEach(s),B=z(f),F=l(f,"DIV",{class:!0});var g=a(F);for(let e=0;e<le.length;e+=1)le[e].l(g);g.forEach(s),W=z(f),J=l(f,"DIV",{class:!0});var v=a(J);K=w(v,"cards in discard pile: "),X=w(v,se),v.forEach(s),f.forEach(s),Z=z(o),o.forEach(s),this.h()},h(){c(n,"id","dragged"),c(n,"class","svelte-iqexfp"),c(i,"class","playerinfo bordered svelte-iqexfp"),c(y,"class","svelte-iqexfp"),c(D,"id","playedcards"),c(D,"class","flex zone playedcards svelte-iqexfp"),c(T,"class","messagetoplayer bordered svelte-iqexfp"),c(H,"class","bordered deck svelte-iqexfp"),c(F,"class","hand svelte-iqexfp"),c(J,"class","bordered discard svelte-iqexfp"),c(Y,"class","flex zone ownedcards svelte-iqexfp"),c(t,"class","bordered playingfield svelte-iqexfp")},m(o,l,a){d(o,t,l),$(t,n),$(t,r),$(t,i);for(let e=0;e<de.length;e+=1)de[e].m(i,null);$(t,u),$(t,y),$(y,b),$(y,k),$(t,P),~x&&ue[x].m(t,null),$(t,I),fe&&fe.m(t,null),$(t,R),$(t,D),ye.m(D,null),$(D,A);for(let e=0;e<ne.length;e+=1)ne[e].m(D,null);$(D,O),ke.m(D,null),$(t,N),$(t,T),$(T,M),$(t,L),$(t,Y),$(Y,H),$(H,j),$(H,U),$(Y,B),$(Y,F);for(let e=0;e<le.length;e+=1)le[e].m(F,null);$(Y,W),$(Y,J),$(J,K),$(J,X),$(t,Z),Q=!0,a&&q(ee),ee=[C(y,"click",e[140]),C(y,"tap",e[141])]},p(e,n){if(1&n[0]){let t;for(ce=e[0].players,t=0;t<ce.length;t+=1){const r=Ce(e,ce,t);de[t]?de[t].p(r,n):(de[t]=Te(r),de[t].c(),de[t].m(i,null))}for(;t<de.length;t+=1)de[t].d(1);de.length=ce.length}(!Q||1&n[0])&&te!==(te=e[0].displayinfo.center_or_planets?"planets":"center row")&&E(k,te);let r=x;if((x=he(e))===r?~x&&ue[x].p(e,n):(S&&(h(),f(ue[r],1,1,()=>{ue[r]=null}),m()),~x?((S=ue[x])||(S=ue[x]=pe[x](e)).c(),p(S,1),S.m(t,I)):S=null),e[0].displayinfo.center_or_planets?fe&&(h(),f(fe,1,1,()=>{fe=null}),m()):fe?(fe.p(e,n),p(fe,1)):((fe=He(e)).c(),p(fe,1),fe.m(t,R)),ge===(ge=me(e))&&ye?ye.p(e,n):(ye.d(1),(ye=ge(e))&&(ye.c(),ye.m(D,A))),65&n[0]){const t=e[0].players[e[0].acting_player_index].limbo;h(),ne=V(ne,n,_e,1,e,t,re,D,G,We,O,ze),m()}if($e===($e=we(e))&&ke?ke.p(e,n):(ke.d(1),(ke=$e(e))&&(ke.c(),ke.m(D,null))),(!Q||1&n[0])&&oe!==(oe=e[0].messagetoplayer[e[0].messagetoplayer.length-1]+"")&&E(M,oe),(!Q||1&n[0])&&ie!==(ie=e[180].deck.length+"")&&E(U,ie),229401&n[0]){const t=e[180].hand;h(),le=V(le,n,Pe,1,e,t,ae,F,G,Qe,null,be),m()}(!Q||1&n[0])&&se!==(se=e[180].discard.length+"")&&E(X,se)},i(e){if(!Q){p(S),p(fe);for(let e=0;e<ve.length;e+=1)p(ne[e]);for(let e=0;e<qe.length;e+=1)p(le[e]);Q=!0}},o(e){f(S),f(fe);for(let e=0;e<ne.length;e+=1)f(ne[e]);for(let e=0;e<le.length;e+=1)f(le[e]);Q=!1},d(e){e&&s(t),g(de,e),~x&&ue[x].d(),fe&&fe.d(),ye.d();for(let e=0;e<ne.length;e+=1)ne[e].d();ke.d();for(let e=0;e<le.length;e+=1)le[e].d();q(ee)}}}function Te(e){let t,n,r,i,p,u,h,f,m,g,y,b,k,q=e[197].starfighters.small+"",C=e[197].influence.length+"",P=e[197].name+"";return{c(){t=o("div"),n=o("div"),r=_("Military Might "),i=_(q),p=v(),u=o("div"),h=_("Galactic Influence "),f=_(C),m=v(),g=o("div"),y=_(P),b=v(),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var o=a(t);n=l(o,"DIV",{style:!0,class:!0});var c=a(n);r=w(c,"Military Might "),i=w(c,q),c.forEach(s),p=z(o),u=l(o,"DIV",{style:!0,class:!0});var d=a(u);h=w(d,"Galactic Influence "),f=w(d,C),d.forEach(s),m=z(o),g=l(o,"DIV",{style:!0,class:!0});var v=a(g);y=w(v,P),v.forEach(s),b=z(o),o.forEach(s),this.h()},h(){O(n,"width","33%"),O(n,"text-align","center"),c(n,"class","bordered svelte-iqexfp"),O(u,"width","33%"),O(u,"text-align","center"),c(u,"class","bordered svelte-iqexfp"),O(g,"width","33%"),O(g,"text-align","center"),c(g,"class","bordered svelte-iqexfp"),O(t,"width",100/e[0].number_of_players+"%"),c(t,"class",k="flex "+(void 0!==e[0].players[e[0].acting_player_index]&&e[197].name==e[0].players[e[0].acting_player_index].name?"selectable":"bordered")+" svelte-iqexfp")},m(e,o){d(e,t,o),$(t,n),$(n,r),$(n,i),$(t,p),$(t,u),$(u,h),$(u,f),$(t,m),$(t,g),$(g,y),$(t,b)},p(e,n){1&n[0]&&q!==(q=e[197].starfighters.small+"")&&E(i,q),1&n[0]&&C!==(C=e[197].influence.length+"")&&E(f,C),1&n[0]&&P!==(P=e[197].name+"")&&E(y,P),1&n[0]&&O(t,"width",100/e[0].number_of_players+"%"),1&n[0]&&k!==(k="flex "+(void 0!==e[0].players[e[0].acting_player_index]&&e[197].name==e[0].players[e[0].acting_player_index].name?"selectable":"bordered")+" svelte-iqexfp")&&c(t,"class",k)},d(e){e&&s(t)}}}function Me(e){let t,n,r=[],i=new Map,u=e[0].stacks.rolecards;const g=e=>e[183].name;for(let t=0;t<u.length;t+=1){let n=ke(e,u,t),o=g(n);i.set(o,r[t]=Le(o,n))}return{c(){t=o("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var n=a(t);for(let e=0;e<r.length;e+=1)r[e].l(n);n.forEach(s),this.h()},h(){c(t,"class","flex zone centerrow svelte-iqexfp")},m(e,o){d(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,n){if(229393&n[0]){const o=e[0].stacks.rolecards;h(),r=V(r,n,g,1,e,o,i,t,G,Le,null,ke),m()}},i(e){if(!n){for(let e=0;e<u.length;e+=1)p(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)f(r[e]);n=!1},d(e){e&&s(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function Ge(e){let t,n,r=[],i=new Map,u=e[0].research_deck;const g=e=>e[183].id;for(let t=0;t<u.length;t+=1){let n=qe(e,u,t),o=g(n);i.set(o,r[t]=Ye(o,n))}return{c(){t=o("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var n=a(t);for(let e=0;e<r.length;e+=1)r[e].l(n);n.forEach(s),this.h()},h(){c(t,"class","zone researchrow svelte-iqexfp")},m(e,o){d(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,n){if(17&n[0]){const o=e[0].research_deck;h(),r=V(r,n,g,1,e,o,i,t,G,Ye,null,qe),m()}},i(e){if(!n){for(let e=0;e<u.length;e+=1)p(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)f(r[e]);n=!1},d(e){e&&s(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function Le(e,t){let n,r;const o=new ve({props:{card:t[183],selectable:"rolecards"==t[0].displayinfo.selectionzone,pilecount:t[0].stacks.pilecount[t[183].type]}});return o.$on("click",function(...e){return t[144](t[183],...e)}),o.$on("tap",function(...e){return t[145](t[183],...e)}),o.$on("touchmove",function(...e){return t[146](t[183],...e)}),o.$on("touchstart",function(...e){return t[147](t[183],...e)}),o.$on("touchend",t[148]),{key:e,first:null,c(){n=u(),y(o.$$.fragment),this.h()},l(e){n=u(),b(o.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){d(e,n,t),k(o,e,t),r=!0},p(e,n){t=e;const r={};1&n[0]&&(r.card=t[183]),1&n[0]&&(r.selectable="rolecards"==t[0].displayinfo.selectionzone),1&n[0]&&(r.pilecount=t[0].stacks.pilecount[t[183].type]),o.$set(r)},i(e){r||(p(o.$$.fragment,e),r=!0)},o(e){f(o.$$.fragment,e),r=!1},d(e){e&&s(n),S(o,e)}}}function Ye(e,t){let n,r;const o=new ve({props:{selectable:"research"==t[0].displayinfo.selectionzone,card:t[183]}});return o.$on("click",function(...e){return t[142](t[183],...e)}),o.$on("tap",function(...e){return t[143](t[183],...e)}),{key:e,first:null,c(){n=u(),y(o.$$.fragment),this.h()},l(e){n=u(),b(o.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){d(e,n,t),k(o,e,t),r=!0},p(e,n){t=e;const r={};1&n[0]&&(r.selectable="research"==t[0].displayinfo.selectionzone),1&n[0]&&(r.card=t[183]),o.$set(r)},i(e){r||(p(o.$$.fragment,e),r=!0)},o(e){f(o.$$.fragment,e),r=!1},d(e){e&&s(n),S(o,e)}}}function He(e){let t,n,r,i=[],u=new Map,g=[],y=new Map,_=e[180].unsettled_planets;const b=e=>e[188].id;for(let t=0;t<_.length;t+=1){let n=$e(e,_,t),r=b(n);u.set(r,i[t]=je(r,n))}let w=[...e[180].settled_planets,...e[180].conquered_planets];const k=e=>e[188].id;for(let t=0;t<w.length;t+=1){let n=we(e,w,t),r=k(n);y.set(r,g[t]=Ue(r,n))}return{c(){t=o("div");for(let e=0;e<i.length;e+=1)i[e].c();n=v();for(let e=0;e<g.length;e+=1)g[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var r=a(t);for(let e=0;e<i.length;e+=1)i[e].l(r);n=z(r);for(let e=0;e<g.length;e+=1)g[e].l(r);r.forEach(s),this.h()},h(){c(t,"class","flex zone centerrow svelte-iqexfp")},m(e,o){d(e,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);$(t,n);for(let e=0;e<g.length;e+=1)g[e].m(t,null);r=!0},p(e,r){if(17&r[0]){const o=e[180].unsettled_planets;h(),i=V(i,r,b,1,e,o,u,t,G,je,n,$e),m()}if(17&r[0]){const n=[...e[180].settled_planets,...e[180].conquered_planets];h(),g=V(g,r,k,1,e,n,y,t,G,Ue,null,we),m()}},i(e){if(!r){for(let e=0;e<_.length;e+=1)p(i[e]);for(let e=0;e<w.length;e+=1)p(g[e]);r=!0}},o(e){for(let e=0;e<i.length;e+=1)f(i[e]);for(let e=0;e<g.length;e+=1)f(g[e]);r=!1},d(e){e&&s(t);for(let e=0;e<i.length;e+=1)i[e].d();for(let e=0;e<g.length;e+=1)g[e].d()}}}function je(e,t){let n,r;const o=new H({props:{planet:t[188]}});return o.$on("click",function(...e){return t[149](t[188],...e)}),o.$on("tap",function(...e){return t[150](t[188],...e)}),{key:e,first:null,c(){n=u(),y(o.$$.fragment),this.h()},l(e){n=u(),b(o.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){d(e,n,t),k(o,e,t),r=!0},p(e,n){t=e;const r={};1&n[0]&&(r.planet=t[188]),o.$set(r)},i(e){r||(p(o.$$.fragment,e),r=!0)},o(e){f(o.$$.fragment,e),r=!1},d(e){e&&s(n),S(o,e)}}}function Ue(e,t){let n,r;const o=new H({props:{planet:t[188],selected:"settled_&_conquered_planets"==t[0].displayinfo.selectionzone}});return o.$on("click",function(...e){return t[151](t[188],...e)}),o.$on("tap",function(...e){return t[152](t[188],...e)}),{key:e,first:null,c(){n=u(),y(o.$$.fragment),this.h()},l(e){n=u(),b(o.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){d(e,n,t),k(o,e,t),r=!0},p(e,n){t=e;const r={};1&n[0]&&(r.planet=t[188]),1&n[0]&&(r.selected="settled_&_conquered_planets"==t[0].displayinfo.selectionzone),o.$set(r)},i(e){r||(p(o.$$.fragment,e),r=!0)},o(e){f(o.$$.fragment,e),r=!1},d(e){e&&s(n),S(o,e)}}}function Be(e){let t,n;return{c(){t=o("div"),n=_("[____]"),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var r=a(t);n=w(r,"[____]"),r.forEach(s),this.h()},h(){O(t,"margin-right","auto"),c(t,"class","bordered pass svelte-iqexfp")},m(e,r){d(e,t,r),$(t,n)},p:D,d(e){e&&s(t)}}}function Fe(e){let t,n,r;return{c(){t=o("div"),n=_("[Choose None]"),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var r=a(t);n=w(r,"[Choose None]"),r.forEach(s),this.h()},h(){O(t,"margin-right","auto"),c(t,"class","selectable pass svelte-iqexfp")},m(o,i,l){d(o,t,i),$(t,n),l&&q(r),r=[C(t,"click",e[153]),C(t,"tap",e[154])]},p:D,d(e){e&&s(t),q(r)}}}function We(e,t){let n,r;const o=new ve({props:{mini:!0,card:t[183]}});return o.$on("click",function(...e){return t[155](t[183],...e)}),o.$on("tap",function(...e){return t[156](t[183],...e)}),{key:e,first:null,c(){n=u(),y(o.$$.fragment),this.h()},l(e){n=u(),b(o.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){d(e,n,t),k(o,e,t),r=!0},p(e,n){t=e;const r={};1&n[0]&&(r.card=t[183]),o.$set(r)},i(e){r||(p(o.$$.fragment,e),r=!0)},o(e){f(o.$$.fragment,e),r=!1},d(e){e&&s(n),S(o,e)}}}function Je(e){let t,n;return{c(){t=o("div"),n=_("[______]"),this.h()},l(e){t=l(e,"DIV",{class:!0});var r=a(t);n=w(r,"[______]"),r.forEach(s),this.h()},h(){c(t,"class","bordered pass svelte-iqexfp")},m(e,r){d(e,t,r),$(t,n)},p:D,d(e){e&&s(t)}}}function Ke(e){let t,n,r;return{c(){t=o("div"),n=_("[Choose Selected]"),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var r=a(t);n=w(r,"[Choose Selected]"),r.forEach(s),this.h()},h(){O(t,"margin-left","auto"),c(t,"class","selectable pass svelte-iqexfp")},m(o,i,l){d(o,t,i),$(t,n),l&&q(r),r=[C(t,"click",e[161]),C(t,"tap",e[162])]},p:D,d(e){e&&s(t),q(r)}}}function Xe(e){let t,n,r;return{c(){t=o("div"),n=_("[End Turn]"),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var r=a(t);n=w(r,"[End Turn]"),r.forEach(s),this.h()},h(){O(t,"margin-left","auto"),c(t,"class","selectable pass svelte-iqexfp")},m(o,i,l){d(o,t,i),$(t,n),l&&q(r),r=[C(t,"click",e[159]),C(t,"tap",e[160])]},p:D,d(e){e&&s(t),q(r)}}}function Ze(e){let t,n,r,i,p;return{c(){t=o("div"),n=_("[Pass to "),r=o("br"),i=_(" Next Player]"),this.h()},l(e){t=l(e,"DIV",{style:!0,class:!0});var o=a(t);n=w(o,"[Pass to "),r=l(o,"BR",{class:!0}),i=w(o," Next Player]"),o.forEach(s),this.h()},h(){c(r,"class","svelte-iqexfp"),O(t,"margin-left","auto"),c(t,"class","selectable pass svelte-iqexfp")},m(o,l,a){d(o,t,l),$(t,n),$(t,r),$(t,i),a&&q(p),p=[C(t,"click",e[157]),C(t,"tap",e[158])]},p:D,d(e){e&&s(t),q(p)}}}function Qe(e,t){let n,r;const o=new ve({props:{card:t[183],mini:!0,selectable:"hand"==t[0].displayinfo.selectionzone}});return o.$on("touchstart",function(...e){return t[163](t[183],...e)}),o.$on("touchend",t[164]),o.$on("touchmove",function(...e){return t[165](t[183],...e)}),o.$on("click",function(...e){return t[166](t[183],...e)}),o.$on("tap",function(...e){return t[167](t[183],...e)}),{key:e,first:null,c(){n=u(),y(o.$$.fragment),this.h()},l(e){n=u(),b(o.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){d(e,n,t),k(o,e,t),r=!0},p(e,n){t=e;const r={};1&n[0]&&(r.card=t[183]),1&n[0]&&(r.selectable="hand"==t[0].displayinfo.selectionzone),o.$set(r)},i(e){r||(p(o.$$.fragment,e),r=!0)},o(e){f(o.$$.fragment,e),r=!1},d(e){e&&s(n),S(o,e)}}}function et(e){let t,n,r=void 0!==e[0].players[e[0].acting_player_index]&&(e[1].screenname==e[180].name&&e[1].online||e[0].players[e[0].acting_player_index].id==e[180].id&&!e[1].online)&&Ve(e);return{c(){r&&r.c(),t=u()},l(e){r&&r.l(e),t=u()},m(e,o){r&&r.m(e,o),d(e,t,o),n=!0},p(e,n){void 0!==e[0].players[e[0].acting_player_index]&&(e[1].screenname==e[180].name&&e[1].online||e[0].players[e[0].acting_player_index].id==e[180].id&&!e[1].online)?r?(r.p(e,n),p(r,1)):((r=Ve(e)).c(),p(r,1),r.m(t.parentNode,t)):r&&(h(),f(r,1,1,()=>{r=null}),m())},i(e){n||(p(r),n=!0)},o(e){f(r),n=!1},d(e){r&&r.d(e),e&&s(t)}}}function tt(e){let t,n,r,i=[],u=new Map,g=e[0].options;const y=e=>e[177].name;for(let t=0;t<g.length;t+=1){let n=_e(e,g,t),r=y(n);u.set(r,i[t]=ot(r,n))}return{c(){t=o("div");for(let e=0;e<i.length;e+=1)i[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var n=a(t);for(let e=0;e<i.length;e+=1)i[e].l(n);n.forEach(s),this.h()},h(){c(t,"class",n=T(void 0!==e[0].options[0]&&void 0!==e[0].options[0].type?"talloptions":"options")+" svelte-iqexfp")},m(e,n){d(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null);r=!0},p(e,o){if(17&o[0]){const n=e[0].options;h(),i=V(i,o,y,1,e,n,u,t,G,ot,null,_e),m()}(!r||1&o[0]&&n!==(n=T(void 0!==e[0].options[0]&&void 0!==e[0].options[0].type?"talloptions":"options")+" svelte-iqexfp"))&&c(t,"class",n)},i(e){if(!r){for(let e=0;e<g.length;e+=1)p(i[e]);r=!0}},o(e){for(let e=0;e<i.length;e+=1)f(i[e]);r=!1},d(e){e&&s(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function nt(e){let t,n,r,i,p,u=e[177].name+"";function h(...t){return e[172](e[177],...t)}function f(...t){return e[173](e[177],...t)}return{c(){t=o("div"),n=_(u),r=v(),this.h()},l(e){t=l(e,"DIV",{class:!0});var o=a(t);n=w(o,u),r=z(o),o.forEach(s),this.h()},h(){c(t,"class",i="pass "+("options"==e[0].displayinfo.selectionzone?e[177].selected?"selected":"selectable":"bordered")+" svelte-iqexfp")},m(e,o,i){d(e,t,o),$(t,n),$(t,r),i&&q(p),p=[C(t,"click",h),C(t,"tap",f)]},p(r,o){e=r,1&o[0]&&u!==(u=e[177].name+"")&&E(n,u),1&o[0]&&i!==(i="pass "+("options"==e[0].displayinfo.selectionzone?e[177].selected?"selected":"selectable":"bordered")+" svelte-iqexfp")&&c(t,"class",i)},i:D,o:D,d(e){e&&s(t),q(p)}}}function rt(e){let t,n;const r=new H({props:{planet:e[177],selectable:"options"==e[0].displayinfo.selectionzone}});r.$on("click",function(...t){return e[168](e[177],...t)}),r.$on("tap",function(...t){return e[169](e[177],...t)});const o=new H({props:{planet:{...e[177],settled:!0},selectable:"options"==e[0].displayinfo.selectionzone}});return o.$on("click",function(...t){return e[170](e[177],...t)}),o.$on("tap",function(...t){return e[171](e[177],...t)}),{c(){y(r.$$.fragment),t=v(),y(o.$$.fragment)},l(e){b(r.$$.fragment,e),t=z(e),b(o.$$.fragment,e)},m(e,i){k(r,e,i),d(e,t,i),k(o,e,i),n=!0},p(t,n){e=t;const i={};1&n[0]&&(i.planet=e[177]),1&n[0]&&(i.selectable="options"==e[0].displayinfo.selectionzone),r.$set(i);const l={};1&n[0]&&(l.planet={...e[177],settled:!0}),1&n[0]&&(l.selectable="options"==e[0].displayinfo.selectionzone),o.$set(l)},i(e){n||(p(r.$$.fragment,e),p(o.$$.fragment,e),n=!0)},o(e){f(r.$$.fragment,e),f(o.$$.fragment,e),n=!1},d(e){S(r,e),e&&s(t),S(o,e)}}}function ot(e,t){let n,r,o,i,l;const a=[rt,nt],c=[];function g(e,t){return void 0!==e[177].type?0:1}return r=g(t),o=c[r]=a[r](t),{key:e,first:null,c(){n=u(),o.c(),i=u(),this.h()},l(e){n=u(),o.l(e),i=u(),this.h()},h(){this.first=n},m(e,t){d(e,n,t),c[r].m(e,t),d(e,i,t),l=!0},p(e,t){let n=r;(r=g(e))===n?c[r].p(e,t):(h(),f(c[n],1,1,()=>{c[n]=null}),m(),(o=c[r])||(o=c[r]=a[r](e)).c(),p(o,1),o.m(i.parentNode,i))},i(e){l||(p(o),l=!0)},o(e){f(o),l=!1},d(e){e&&s(n),c[r].d(e),e&&s(i)}}}function it(e){let t,n,r,i=e[174].label+"'s Game";function p(...t){return e[136](e[174],...t)}function u(...t){return e[137](e[174],...t)}return{c(){t=o("p"),n=_(i),this.h()},l(e){t=l(e,"P",{class:!0});var r=a(t);n=w(r,i),r.forEach(s),this.h()},h(){c(t,"class","svelte-iqexfp")},m(e,o,i){d(e,t,o),$(t,n),i&&q(r),r=[C(t,"click",p),C(t,"tap",u)]},p(t,r){e=t,2&r[0]&&i!==(i=e[174].label+"'s Game")&&E(n,i)},d(e){e&&s(t),q(r)}}}function lt(e){let t,n,r=e[2]&&Ee(e);return{c(){r&&r.c(),t=u()},l(e){r&&r.l(e),t=u()},m(e,o){r&&r.m(e,o),d(e,t,o),n=!0},p(e,n){e[2]?r?(r.p(e,n),p(r,1)):((r=Ee(e)).c(),p(r,1),r.m(t.parentNode,t)):r&&(h(),f(r,1,1,()=>{r=null}),m())},i(e){n||(p(r),n=!0)},o(e){f(r),n=!1},d(e){r&&r.d(e),e&&s(t)}}}function at(e,t,n){let r,o,l,a,s,c=!1,d=JSON.stringify,p=JSON.parse,u=console.log;A(()=>{}),N(()=>{console.log($())}),I(()=>{l=[{actn:[S("Choose between Settling or Colonizing a Planet",["colonize"],C(["Colonize","Settle Colonies"])),S("Choose an Unsettled Planet to Settle",["colonize"],()=>ae(!1,!1,["unsettled_planets"],"subchoices"),["Settle Colonies"]),S("Settling your Planet",["colonize"],()=>we(b(),$()),["Settle Colonies"]),S("Choose an Unsettled Planet to Colonize",["colonize"],()=>ae(!1,!1,["unsettled_planets"],"subchoices"),["Colonize"]),S("Colonizing your Planet",["colonize"],()=>{Ie(b(),$().limbo,$().limbo.filter(e=>"colonize"==e.type)[0]),w(!0)},["Colonize"])],lead:[R("Choose between Settling or Colonizing a Planet",["colonize"],C(["Colonize","Settle Colonies"])),R("Choose an Unsettled Planet to Settle",["colonize"],()=>f(),["Settle Colonies"]),R("Settling your Planet",["colonize"],()=>{we(b(),$()),w()},["Settle Colonies"]),R("Choose an Unsettled Planet to Colonize",["colonize"],()=>f(),["Colonize"]),R("Colonizing your Planet",["colonize"],()=>{"Skip"==b().name&&w();let e=b();e.hosted_colonies.reduce((e,t)=>e+t.icons.colonize,0)>=e.settle_cost&&Ie(e,$().limbo,$().limbo.filter(e=>"colonize"==e.type)[0]),w(!0)},["Colonize"])],fllw:[D("Choose between Settling or Colonizing a Planet",["colonize"],()=>{0==$().permanents.filter(e=>"bureaucracy"==e.type).length?(n(0,r.choices=[{name:"Colonize"}],r),w(!0)):q(["Colonize","Settle Colonies"])}),D("Choose an Unsettled Planet to Settle",["colonize"],()=>f(),["Settle Colonies"]),D("Settling your Planet",["colonize"],()=>{we(b(),$()),w(!0)},["Settle Colonies"]),D("Choose an Unsettled Planet to Colonize",["colonize"],()=>f(),["Colonize"]),D("Colonizing your Planet",["colonize"],()=>{let e=z().find(e=>e.hosted_colonies.reduce((e,t)=>e+t.icons.colonize)>=e.settle_cost);Ie(e,$().limbo,$().limbo.filter(e=>"colonize"==e.type)[0]),w(!0)},["Colonize"])],clnp:[]},{actn:[S("Choose between Producing or Trading Resources",["producetrade"],C(["produce","trade"])),S("Choose a Planet to Produce Resources on",["producetrade"],()=>ae(!1,!1,["settled_&_conquered_planets"],"subchoices"),["produce"]),S("Producing a Resource",["producetrade"],()=>{qe(z()),w(!0)},["produce"]),S("Choose a Planet to Trade Resources from",["producetrade"],()=>ae(!1,!1,["settled_&_conquered_planets"],"subchoices"),["trade"]),S("Trading a Resource",["producetrade"],()=>{Ce(z(),$()),w()},["trade"])],lead:[R("Choose between Producing or Trading Resources",["producetrade"],()=>ae(!1,!1,["options",[{name:"produce"},{name:"trade"}]],"choices")),R("Choose a Planet to Produce Resources on",["producetrade"],()=>ae(!0,!0,["settled_&_conquered_planets"],"subchoices"),["produce"]),R("Producing a Resource",["producetrade"],()=>{$().activerole="produce";let e=qe(z(),$().bstIcons.produce);"genetic_engineering"==g()&&e.forEach(e=>e=[...e,{influence:[...e.influence,r.influence.pop()]}]),w(!0)},["produce"]),R("Choose a Planet to Trade Resources from",["producetrade"],()=>ae(!0,!0,["settled_&_conquered_planets"],"subchoices"),["trade"]),R("Trading a Resource",["producetrade"],()=>{$().activerole="trade";let e=Ce(z(),$(),$().bstIcons.trade);if("diverse_markets"==g())for(let t in e)e[t]>1&&$().influence.push(r.influence.pop());if("specialization"==g())for(let t in Array.from(e[$().specialization]))$().influence.push(r.influence.pop());w(!0)},["trade"])],fllw:[D("Choose a Planet to Produce Resources on",["produce"],()=>ae(!0,!0,["settled_&_conquered_planets"],"subchoices")),D("Producing a Resource",["produce"],()=>{let e=r;$().activerole="produce",qe(e.subchoices,e.players[r.acting_player_index].bstIcons.produce),w(!0)}),D("Choose a Planet to Trade Resources from",["trade"],()=>ae(!0,!0,["settled_&_conquered_planets"],"subchoices")),D("Trading a Resource",["trade"],()=>{let e=r;$().activerole="trade",Ce(e.subchoices,$(),$().bstIcons.trade),w(!0)})],clnp:[]},{actn:[S("Choose a Role Card to Replace Politics with",["politics"],()=>ae(!1,!1,["rolecards"],"choices")),S("Swapping the Role Card for your Politics Card",["politics"],()=>{Pe($().limbo.filter(e=>"politics"==e.type)[0],_()[0],$()),w(!0)})],lead:[],fllw:[],clnp:[]},{actn:[S("Choose up to 2 Cards from your Hand to Remove from the Game",["research"],()=>ae(!1,!0,["hand"],"choices")),S("Removing your Cards from the Game",["research"],()=>{xe(_(),$()),w(!0)})],lead:[R("Choose a Technology to Research",["research"],()=>ae(!0,!1,["research"],"choices")),R("Researching your Technology",["research"],()=>{if("Skip"==v())return void w(!0);let e=_()[0],t={advanced:0,metallic:0,fertile:0};[...$().settled_planets,...$().conquered_planets].map(e=>t[e.type]++),Object.values(e.planet_requirements).reduce((e,n,r)=>e?n>t[Object.keys(t)[r]]:e,!0)&&$().bstIcons.research>=e.research_cost&&he(r.research_deck,e.is_permanent?$().permanents:$().limbo,e.is_permanent?"":"discard",e.id),w(!0)})],fllw:[D("Choose a Technology to Research",["research"],()=>ae(!0,!1,["research"],"choices")),D("Researching your Technology",["survey"],()=>{let e=r;if("Skip"!=e.choices[0].name){let t={advanced:0,metallic:0,fertile:0};[...e.players[r.acting_player_index].settled_planets,...e.players[r.acting_player_index].conquered_planets].map(e=>{t[e.type]++});let n=!0;for(let r in e.choices[0].planet_requirements)e.choices[0].planet_requirements[r]>t[r]&&(n=!1);n&&e.players[r.acting_player_index].bstIcons.research>=e.choices[0].research_cost&&he(e.research_deck,e.players[r.acting_player_index].limbo,"discard",e.choices[0].id)}w(!0)})],clnp:[]},{actn:[S("Surveying your Empire",["survey"],()=>{Se($()),w(!0)})],lead:[R("Choose a Planet from your Galaxy to Explore",["survey"],()=>{for(let e=0;e<$().bstIcons.survey;e++)Ne($());ae(!0,!1,["options",r.options],"choices")}),R("Surveying your Empire",["survey"],()=>{"Skip"==v()&&w(),Ve($()),w(!0)})],fllw:[D("Choose a Planet from your Galaxy to Explore",["survey"],()=>{let e=r;for(let t=0;t<e.players[r.acting_player_index].bstIcons.survey-1;t++)Ne(e.players[r.acting_player_index]);ae(!0,!1,["options"],"choices")}),D("Surveying your Empire",["survey"],()=>{"Skip"==v()&&w(),Ve(r.players[r.acting_player_index]),w(!0)})],clnp:[{"":()=>{}}]},{actn:[S("Choose between Collecting a Starfighter or Conquering a Planet",["warfare"],C(["Conquer a Planet","Collect a Starfighter"])),S("Adding a Starfighter to your Fleet",["warfare"],()=>{Re($()),w(!0)},["Collect a Starfighter"]),S("Choose a Planet to Conquer",["warfare"],()=>ae(!1,!1,["unsettled_planets"],"subchoices"),["Conquer a Planet"]),S("Conquering your planet",["warfare"],()=>{De(b(),$()),w(!0)},["Conquer a Planet"])],lead:[R("Choose between Collecting Starfighters or Conquering a Planet",["warfare"],C(["Conquer a Planet","Collect Starfighters"])),R("Adding Starfighters to your Fleet",["warfare"],()=>{ee(1,$().bstIcons.warfare).forEach(()=>Re($())),w(!0)},["Collect Starfighters"]),R("Choose a Planet to Conquer",["warfare"],()=>f(),["Conquer a Planet"]),R("Conquering your planet",["warfare"],()=>{De(b(),$()),w(!0)},["Conquer a Planet"])],fllw:[D("Choose between Collecting Starfighters or Conquering a Planet",["warfare"],()=>{if(0==r.players[r.acting_player_index].permanents.filter(e=>"bureaucracy"==e.type).length){r.choices=[{name:"Collect Starfighters"}],w(!0)}else ae(!1,!1,["options",[{name:"Conquer a Planet"},{name:"Collect Starfighters"}]],"choices")}),D("Adding Starfighters to your Fleet",["warfare"],()=>{for(let e=0;e<r.players[r.acting_player_index].bstIcons.warfare;e++)Re(r.players[r.acting_player_index]);w(!0)},["Collect Starfighters"]),D("Choose a Planet to Conquer",["warfare"],()=>ae(!1,!1,["unsettled_planets"],"subchoices"),["Conquer a Planet"]),D("Conquering your planet",["warfare"],()=>{De(r.subchoices[0],r.players[r.acting_player_index]),w(!0)},["Conquer a Planet"])],clnp:[{"":()=>{}}]}],a=[S("Choose wether or not to Settle a Planet",["improved_colonize"],()=>ae(!0,!1,["options",[{name:"settle"},{name:"Skip"}]],"choices")),S("Choose a Planet to Settle",["improved_colonize"],()=>f(),["settle"]),S("Settling your Planet",["improved_colonize"],()=>{we(b(),getActvPlyr()),w(!0)},["settle"]),S("Choose between Settling or Colonizing a Planet",["improved_colonize"],C(["Colonize","Settle Colonies"])),S("Choose an Unsettled Planet to Settle",["improved_colonize"],()=>f(),["Settle Colonies"]),S("Settling your Planet",["improved_colonize"],()=>{we(b(),$()),w(!0)},["Settle Colonies"]),S("Choose an Unsettled Planet to Colonize",["improved_colonize"],()=>f(),["Colonize"]),S("Colonizing your Planet",["improved_colonize"],()=>{Ie(b(),$().limbo,$().limbo.filter(e=>"improved_colonize"==e.type)[0]),w(!0)},["Colonize"]),S("Choose an empty Production Zone to Produce in",["improved_production"],()=>ae(!0,!1,["settled_&_conquered_planets"],"choices")),S("Producing your Resource",["improved_production"],()=>{"Skip"==v()&&w(),qe(r.choices),w(!0)}),S("Choose an empty Production Zone to Produce in",["improved_production"],()=>ae(!0,!1,["settled_&_conquered_planets"],"choices")),S("Producing your Resource",["improved_production"],()=>{"Skip"==v()&&w(),qe(r.choices),w(!0)}),S("Trading your Stocks and Bonds",["improved_trade"],()=>{r.players[r.acting_player_index].influence.push(r.influence.pop()),w(!0)}),S("Choose up to 3 Cards from your Hand to Remove from the Game",["improved_research"],()=>{ue($()),ae(!1,!0,["hand"],"choices")}),S("Removing your Cards from the Game",["improved_research"],()=>{xe(_(),$(),3),w(!0)}),S("Drawing your Cards",["improved_survey"],()=>{ue($()),ue($()),ue($()),w(!0)}),S("Choose between Collecting a Starfighter or Conquering a Planet",["improved_warfare"],C("Conquer a Planet")),S("Adding a Starfighter to your Fleet",["improved_warfare"],()=>{Re($()),Re($()),w(!0)},["Collect a Starfighter"]),S("Choose a Planet to Conquer",["improved_warfare"],()=>f(),["Conquer a Planet"]),S("Conquering your planet",["improved_warfare"],()=>{De(b(),$()),w(!0)},["Conquer a Planet"]),S("Collecting your Star Fighters",["mobilization"],()=>{Re($()),Re($()),w(!0)}),S("Adding Top Card of the Planet deck to your Empire",["survey_team"],()=>{let{game:e,game:{acting_player:t,planet_deck:n}}=get();t=e.players[e.acting_player_index];let r=n.pop();t.unsettled_planets.push(r),w(!0)}),S("Choose a Planet to Conquer",["war_path"],()=>f()),S("Conquering your planet",["war_path"],()=>{"Skip"==v()&&w(),De(v(),$()),w(!0)}),S("Choose a Planet to Conquer",["war_path"],()=>f()),S("Conquering your planet",["war_path"],()=>{"Skip"==v()&&w(),De(v(),$()),w(!0)}),S("Choose an Unsettled Planet to Terraform",["terraforming"],()=>f()),S("Terraforming your Planet",["terraforming"],()=>{if(Ie(v(),$().limbo,$().limbo.filter(e=>"terraforming"==e.type)[0]),v().hosted_colonies.length>0){v().hosted_colonies.reduce((e,t)=>e+t.icons.colonize,0)>=v().settle_cost&&we(v(),$())}w(!0)},["Colonize"]),S("Engineering Genetics",["genetic_engineering"],w),S("Select a Role Card to take into your Hand",["artificial_intelligence"],()=>ae(!1,!1,["rolecards"],"choices")),S("Adding Role Card to your Machine Learning Model",["artificial_intelligence"],()=>{let{game:e,game:{acting_player:t}}=get();t=e.players[e.acting_player_index],e.stacks.pilecount[e.choices[0].type]>=1&&(t.hand.push(Object.assign({id:Oe()},e.stacks.rolecards[e.stacks[e.choices[0].type]])),e.stacks.pilecount[e.choices[0].type]--),w(!0)}),S("Select a Role Card to take into your Hand",["artificial_intelligence"],()=>ae(!1,!1,["rolecards"],"choices")),S("Adding Role Card to your Machine Learning Model",["artificial_intelligence"],()=>{let{game:e,game:{acting_player:t}}=get();t=e.players[e.acting_player_index],e.stacks.pilecount[e.choices[0].type]>=1&&(t.hand.push(Object.assign({id:Oe()},e.stacks.rolecards[e.stacks[e.choices[0].type]])),e.stacks.pilecount[e.choices[0].type]--),w(!0)}),S("Diversifying Markets",["diverse_markets"],w),S("Choose a Resource to Specialize in",["specialization"],C("red")),S("Specializaing in your Seleted Resource",["specialization"],()=>{$().specialization=v(),w(!0)}),S("Drawing Your Cards",["data_network"],()=>{ue($()),ue($()),w(!0)}),S("Choose any number of Cards from your Hand to Remove from the Game",["data_network"],()=>ae(!0,!0,["hand"],"choices")),S("Removing the Selected Cards from the Game",["data_network"],()=>{"Skip"==v()&&w();let{game:e,game:{choices:t,acting_player:n}}=get();n=e.players[e.acting_player_index],xe(t,n,t.length),w(!0)})];n(0,r={minPlyrs:2,maaxPlyrs:4,passtoplayer:!1,nonce:0,displayinfo:{selectionzone:"",dragged:null,showoptiontoskip:!1,allowformultipleselections:!1,center_or_planets:!0,choicelabel:"choices"},subchoices:[],influence:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],messagetoplayer:["Waiting for other players to join"],options:[],planet_deck:[],currentphase:-4,leading_player_index:0,acting_player_index:0,number_of_players:2,started:!1,gamephases:[{start:[{"set active player":()=>{r.started&&(n(0,r.started=!0,r),n(0,r.passt=!1,r),n(0,r.leading_player_index=(r.leading_player_index+1)%r.number_of_players,r),n(0,r.acting_player_index=r.leading_player_index,r),n(0,r.leadingplayer=r.players[r.leading_player_index],r),n(0,r.acting_player=r.players[r.leading_player_index],r),lt()),void 0!==r.leadingplayer&&n(0,r.players[r.leading_player_index].rounds++,r);let e=[...r.players[r.leading_player_index].settled_planets,...r.players[r.leading_player_index].conquered_planets];for(let t in e)V(r.players[r.leading_player_index],e[t]);for(let e in r.players[r.leading_player_index].permanents)V(r.players[r.leading_player_index],permanents[e]);w(!0)}},{Productivity:()=>{0!=$().permanents.filter(e=>"productivity"==e.type).length&&($().actionrolesequence="aar"),w()}},{"Choose an Order to Perform Your Action and Role Phases":()=>{if(0!=$().permanents.filter(e=>"logistics"==e.type).length){let e=["Action Phase then Role Phase","Role Phase then Action Phase"];0!=$().permanents.filter(e=>"productivity"==e.type).length&&(e.push("Action Phase then another Action Phase then Role Phase"),e.push("Action Phase then Role Phase then another Action Phase"),e.push("Role Phase then Action Phase then another Action Phase")),q(e)}else w()}},{Logistics:()=>{0!=$().permanents.filter(e=>"logistics"==e.type).length?("Action Phase then Role Phase"==v()?$().actionrolesequence="ar":"Role Phase then Action Phase"==v()?$().actionrolesequence="ra":"Action Phase then another Action Phase then Role Phase"==v()?$().actionrolesequence="aar":"Action Phase then Role Phase then another Action Phase"==v()?$().actionrolesequence="ara":"Role Phase then Action Phase then another Action Phase"==v()&&($().actionrolesequence="raa"),w(!0)):w()}}]},{action:[{"Choose an Action to Play":()=>{ae(!0,!1,["hand"],"choices")}},{"Playing your Action":()=>{if("Skip"==v())w();else{let e=_()[0],t=$();t.activeaction=e.type,T(t,e),w(!0)}}},...P(),...m()]},{role:[{"Choose a Role Card to Lead with":()=>{ae(!1,!1,["rolecards"],"choices")}},{"Performing your Role":()=>{let e=_()[0];if(r.stacks.pilecount[e.type]>=1){"producetrade"==e.type?($().bstIcons.produce++,$().bstIcons.trade++):$().bstIcons[e.type]++;let t=Object.assign({id:Oe(),finDest:"discard",selected:!0},r.stacks.rolecards[r.stacks[e.type]]);$().limbo=[...$().limbo,t],n(0,r.stacks.pilecount[e.type]--,r)}else"colonize"!=e.type&&$().bstIcons[e.type]++;$().activerole=e.type,w(!0)}}]},{lead:[{"Choose cards from your hand to Boost the effectiveness of your Role":()=>{ae(!0,!0,["hand"],"choices")}},{"Boosting your Role":()=>{"Skip"==v()?w():(_().forEach(e=>{Y($(),e),e.finDest="discard"}),w(!0))}},...x(),{"Pass the device to the Next Player":()=>{n(0,r.displayinfo.selectionzone="",r),n(0,r.passp=!0,r)}},{"You passed Priority":()=>{n(0,r.passp=!1,r),w(!0)}}]},{follow:[{"Choose between Following or Dissent the Leading Role":()=>{q(["dissent",k().activerole])}},{Dissenting:()=>{if($().activerole=v(),"dissent"!=$().activerole){let e=_()[0];if(r.stacks.pilecount[e.name]>=1){$().bstIcons[e.name]++;let t=Object.assign({id:Oe(),finDest:"discard",selected:!0},r.stacks.rolecards[r.stacks[e.name]]);$().limbo=[...$().limbo,t],n(0,r.stacks.pilecount[e.name]--,r)}else"colonize"!=e.name&&Y($(),e);w(!0)}else ue($()),0!=$().permanents.filter(e=>"dissension"==e.type).length&&ue($()),w(!0)}},{"Choose cards from your hand to Boost the effectiveness of your Role":()=>{"dissent"==$().activerole?w():ae(!0,!0,["hand"],"choices")}},{"Boosting your Role":()=>{if("dissent"==$().activerole)w();else if("Skip"==v())w();else{let e=_;for(let t in e)Y($(),e[t]);w(!0)}}},...E(),{"Pass the device to the Next Player":()=>{n(0,r.displayinfo.selectionzone="",r),n(0,r.passp=!0,r)}},{"You passed Priority":()=>{n(0,r.passp=!1,r),w(!0)}}]},{discard:[{"Would you like to Mobilize against a Planet":()=>{"mobilization"!=$().activeaction?w():ae(!0,!1,["options",[{name:"mobilize"},{name:"skip"}]],"choices")}},{"Choose a Planet to Mobilize Against":()=>{"mobilization"!=$().activeaction||"mobilize"!=v()?w():f()}},{"Mobalizing against your Planet":()=>{"mobilization"!=$().activeaction?w():(De(b(),$()),w(!0))}},{"Would you like to Streamline Your Empire":()=>{0==$().permanents.filter(e=>"streamlining"==e.type).length?w():ae(!1,!1,["options",[{name:"Decline"},{name:"Streamline Empire"}]],"choices")}},{"Choose a Card from Your Hand to Remove from the Game":()=>{0==$().permanents.filter(e=>"streamlining"==e.type).length||"Streamline Empire"!=v()?w():ae(!0,!1,["hand"],"subchoices")}},{"Streamlining Your Empire":()=>{0==$().permanents.filter(e=>"streamlining"==e.type).length||"Streamline Empire"!=v()||"Skip"==v()?w():xe(_(),$(),1)}},{"Would you like to Utilize Your Empire's Hyperefficiency":()=>{0==$().permanents.filter(e=>"hyperefficiency"==e.type).length?w():q(["Decline","Utilize Hyperefficiency"])}},{"Choose a Card from Your Hand to Remove from the Game":()=>{0==$().permanents.filter(e=>"hyperefficiency"==e.type).length||"Utilize Hyperefficiency"!=v()?w():ae(!0,!0,["hand"],"subchoices")}},{"Your Empire is Hyperefficient":()=>{0==$().permanents.filter(e=>"hyperefficiency"==e.type).length||"Utilize Hyperefficiency"!=v()||"Skip"==v()?w():xe(_(),$(),_().length)}},{"Choose any Cards you would like to Discard":()=>{ae(!0,!0,["hand"],"choices")}},{"Discarding your Selected Cards":()=>{"Skip"==v()?w():(_().forEach(e=>{$().discard=[...$().discard,e],$().limbo=$().limbo.filter(t=>t.id!=e.id)}),w(!0))}}]},{cleanup:[{"Drawing up to your Hand Size":()=>{_e();let e=$().handsize;for(let t in $().settled_planets)e+=$().settled_planets[t].handsize_modifier;for(let t in $().conquered_planets)e+=$().conquered_planets[t].handsize_modifier;let t=$().hand.length;t<e&&ue($(),e-t),r.players.forEach(H),r.started&&pe()&&r.players.reduce((e,t)=>e+t.rounds,0)%r.number_of_players==0&&(ce(),n(0,r.nextphase=de,r)),w(!0)}},{"Pass the device to the Next Player":()=>{n(0,r.displayinfo.selectionzone="",r),n(0,r.displayinfo.showoptiontoskip=!1,r),n(0,r.displayinfo.allowformultipleselections=!1,r),n(0,r.passp=!1,r),n(0,r.passt=!0,r)}},{"You passed the Turn":()=>{n(0,r.passt=!1,r),w(!0)}}]}],players:[],winner:!1,stacks:{pilecount:{research:20,producetrade:16,colonize:20,warfare:16,survey:20},survey:0,warfare:1,colonize:2,producetrade:3,research:4,rolecards:[O("survey","Survey",{survey:1}),O("warfare","Warfare",{warfare:1}),O("colonize","Colonize",{colonize:1}),O("producetrade","Produce / Trade",{produce:1,trade:1}),O("research","Research",{research:1},{research_deck:[]})]}});let e=location.origin.replace(/^http/,"ws");n(1,o={screenname:"",url:e,sets:["Base Game"],number_of_players:[2,3,4],existinggames:[]}),n(0,r.nonce=0,r),n(2,c=!0)});let h=()=>n(0,r.options=[],r),f=()=>ae(!1,!1,["unsettled_planets"],"subchoices"),m=()=>a,g=()=>$().activeaction,y=()=>$().activerole,v=()=>r.choices[0].name,_=()=>r.choices,b=()=>z()[0],z=()=>r.subchoices,w=(e=!1)=>Te(e),$=()=>r.players[r.acting_player_index],k=()=>r.players[r.leading_player_index],q=e=>ae(!1,!1,["options",e.reduce((e,t)=>[...e,{name:t}],[])],"choices"),C=e=>()=>q(e),P=()=>l.reduce((e,t)=>[...e,t.actn],[]).reduce((e,t)=>[...e,...t],[]),x=()=>l.reduce((e,t)=>[...e,t.lead],[]).reduce((e,t)=>[...e,...t],[]),E=()=>l.reduce((e,t)=>[...e,t.fllw],[]).reduce((e,t)=>[...e,...t],[]),S=(e,t,n,r=[],o=!1)=>({[e]:()=>{t.includes(g())&&(0==r.length||r.includes(v()))?n():w(o)}}),R=(e,t,n,r=[],o=!1)=>({[e]:()=>{t.includes(y())&&(0==r.length||r.includes(v()))?n():w(o)}}),D=(e,t,n,r=[],o=!1)=>({[e]:()=>{t.includes(y())&&(0==r.length||r.includes(v()))?n():w(o)}}),O=(e,t,n,r={})=>({type:e,selected:!1,name:t,selected:!1,icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:1,...n},image:null,...r}),V=(e,t)=>["survey","warfare","trade","produce","research"].forEach(n=>e.icons[n]+=t.icons[n]),T=(e,t)=>{G("limbo",e,t,"discard"),L("hand",e,t)},M=(e,t)=>{G("hand",e,t,""),L("limbo",e,t)},G=(e,t,n,r)=>t[e]=[...t[e],{...n,finDest:r}],L=(e,t,n)=>t[e]=t[e].filter(e=>n.id!=e.id),Y=(e,t)=>Object.keys(t.icons).forEach(n=>e.bstIcons[n]+=t.icons[n]),H=e=>e.bstIcons={survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0},j=e=>e.forEach(e=>e.selected=!1),U=()=>o.screenname==$().name||!o.online,B=e=>n(0,r[r.displayinfo.choicelabel]=e,r),F=()=>n(0,r.displayinfo.center_or_planets=!1,r),W=()=>n(0,r.displayinfo.center_or_planets=!0,r),J=()=>n(0,r[r.displayinfo.choicelabel]=[],r),K=(e,t,o,i)=>n(0,r.displayinfo={...r.displayinfo,selectionzone:e,allowformultipleselections:t,showoptiontoskip:o,choicelabel:i},r),X=e=>[...e.deck,...e.discard,...e.limbo,...e.hand],Z=e=>"planet"==e.type||"fertile"==e.type||"metallic"==e.type||"advanced"==e.type,Q=e=>0!=$().permanents.filter(t=>t.type==e).length,ee=(e,t)=>e<=t?[...ee(e,t-1),t]:[],te=(e,t,n)=>()=>{n(),document.removeEventListener(t,this),e()},ne=(e,t,n,r=(()=>{}))=>{let o={blue:0,green:0,purple:0,red:0};return t.forEach(t=>t.production_zones.forEach(t=>{!t.filled&&n>0&&(t.filled=e,o[t.type]++,n--,r())})),o},re=(e,t)=>{r.displayinfo.selectionzone==t&&U()&&(r.displayinfo.allowformultipleselections?oe(e):ie([e]))},oe=e=>{U()&&(r[r.displayinfo.choicelabel].includes(e)?(e.selected=!1,Z(e)||"Skip"==e.name||(B(r[r.displayinfo.choicelabel].filter(t=>t.id!=e.id)),M($(),e))):(B([...r[r.displayinfo.choicelabel],e]),e.selected=!0,Z(e)||"Skip"==e.name||T($(),e)))},ie=e=>{U()&&(h(),j(e),B(e),w())},le=e=>{U()&&r[r.displayinfo.choicelabel].includes(e)&&(e.selected=!1,B(r[r.displayinfo.choicelabel].filter(t=>t.id!=e.id)),M($(),e))},ae=(e,t,[n,o],i,l)=>{switch(K(n,t,e,i),n){case"hand":o=$().hand;break;case"research":o=r.research_deck;break;case"discard":o=$().discard;break;case"planets":o=r.planet_deck;break;case"rolecards":o=r.stacks.rolecards,W();break;case"unsettled_planets":o=$().unsettled_planets,F();break;case"settled_planets":o=$().settled_planets,F();break;case"conquered_planets":o=$().conquered_planets,F();break;case"settled_&_conquered_planets":o=[...$().settled_planets,...$().conquered_planets],F()}J(),ze(o),Fe()},se=(e,t,n)=>{let r=e.find(e=>n==e.id);e=e.filter(e=>e.id!=r.id)},ce=()=>{r.players.forEach(e=>{e.influence=e.influence.reduce((e,t)=>e+t,0)+X(e).reduce((e,t)=>e+t.influence)})},de=()=>{let e=r.players.map(e=>e.influence),t="",n=e[0];r.players.map(e=>{n<e.influence&&(t=e.name,n=e.influence)})},pe=()=>{let e=r.stacks.pilecount.reduce((e,t)=>e+(t<1)?1:0,0);return(1==r.number_of_players||2==r.number_of_players?1:2)<=e||0==r.influence.length},ue=(e,t=1)=>{for(let n=0;n<t;n++){if(0==e.deck.length){if(0==e.discard.length)return e;e.deck=et([...e.discard]),e.discard=[]}e.hand=[...e.hand,e.deck.pop()],e.deck=e.deck}return e},he=(e,t,n,r)=>{let o=e.find(e=>r==e.id);e=e.filter(e=>e.id!=o.id)},fe=e=>({name:e,type:e,id:Oe(),icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0},planet_requirements:{advanced:0,metallic:0,fertile:0},research_cost:0,action:()=>{},is_permanent:!1,is_doublesided:!1,imgurl:"/images/",Influence_value:0,img(e){return this.imgurl+=e,this},influence(e){return this.influence_value=e,this},metallic(e){return this.planet_requirements.metallic=e,this},advanced(e){return this.planet_requirements.advanced=e,this},fertile(e){return this.planet_requirements.fertile=e,this},research(e){return this.research_cost=e,this},permanent(){return this.is_permanent=!0,this},doubleside(){return this.is_doublesided=!0,this},icons(e){return this.icons=Object.assign(this.icons,e),this},improved_colonize(){return this.research(3),this.imgurl+="improvedcolonize",this},improved_survey(){return this.research(3),this.imgurl+="improvedsurvey",this},improved_research(){return this.research(3),this.imgurl+="improvedresearch",this},improved_warfare(){return this.research(3),this.imgurl+="improvedwarfare",this},improved_production(){return this.research(3),this.imgurl+="improvedproduction",this},improved_trade(){return this.research(3),this.imgurl+="improvedtrade",this},surveyteam(){return this.research(5).metallic(2).influence(2).icons({survey:2}).img("surveyteam")},warpath(){return this.research(5).metallic(2).influence(2).icons({warfare:2}).img("warpath")},terraforming(){return this.research(5).fertile(2).influence(2).icons({colonize:2}).img("terraforming")},geneticengineering(){return this.research(5).fertile(2).influence(2).icons({produce:2}).img("geneticengineering")},artificialintelligence(){return this.research(5).fertile(2).influence(2).icons({colonize:1,produce:1}).img("artificialintelligence")},diversemarkets(){return this.research(5).advanced(2).influence(2).icons({research:1,trade:1}).img("diversemarkets")},specialization(){return this.research(5).advanced(2).influence(2).icons({trade:2}).img("specialization")},mobilization(){return this.research(5).metallic(2).influence(2).icons({survey:1,warfare:1}).img("mobilization")},datanetwork(){return this.research(5).advanced(2).influence(2).icons({research:2}).img("datanetwork")},abundance(){return this.research(5),this.imgurl+="abundance",this.is_doublesided=!0,this.is_permanent=!0,this.fertile(2).influence(2)},adaptability(){return this.research(7),this.imgurl+="adaptability",this.is_doublesided=!0,this.is_permanent=!0,this.advanced(3).influence(5)},bureaucracy(){return this.research(7),this.imgurl+="bureaucracy",this.is_doublesided=!0,this.is_permanent=!0,this.fertile(3).influence(5)},dissension(){return this.research(7).fertile(3).influence(5).permanent().doubleside().img("dissension")},hyperefficiency(){return this.research(7).advanced(3).influence(5).permanent().doubleside().img("hyperefficiency")},imperialism(){return this.research(5).metallic(2).influence(2).permanent().doubleside().img("imperialism").icons({survey:1,trade:1,warfare:1})},logistics(){return this.research(7).metallic(3).influence(5).permanent().doubleside().img("logistics")},productivity(){return this.research(7).metallic(3).influence(5).permanent().doubleside().img("productivity")},scorchedearthpolicy(){return this.research(5).metallic(2).influence(2).permanent().doubleside().img("scorchedearthpolicy")},streamlining(){return this.research(5).advanced(2).influence(2).permanent().doubleside().img("streamlining")},weaponsemporium(){return this.research(5).advanced(2).influence(2).permanent().doubleside().img("weaponemporium")},fertilegrounds(){return this.research(5).fertile(2).influence(2).permanent().doubleside().img("fertilegrounds").icons({research:1,colonize:1,produce:1})}}),me=()=>{n(0,r.research_deck=[fe("improved_production").metallic(1).icons({warfare:1,produce:1}).improved_production().img("wp.png"),fe("improved_production").metallic(1).icons({survey:1,produce:1}).improved_production().img("sp.png"),fe("improved_trade").metallic(1).icons({survey:1,trade:1}).improved_trade().img("st.png"),fe("improved_trade").metallic(1).icons({warfare:1,trade:1}).improved_trade().img("wt.png"),fe("improved_research").metallic(1).icons({warfare:1,research:1}).improved_research().img("wr.png"),fe("improved_research").metallic(1).icons({survey:1,research:1}).improved_research().img("sr.png"),fe("improved_colonize").metallic(1).icons({warfare:1,colonize:1}).improved_colonize().img("wc.png"),fe("improved_colonize").metallic(1).icons({survey:1,colonize:1}).improved_colonize().img("sc.png"),fe("improved_warfare").fertile(1).icons({produce:1,warfare:1}).improved_warfare().img("pw.png"),fe("improved_warfare").fertile(1).icons({colonize:1,warfare:1}).improved_warfare().img("cw.png"),fe("improved_trade").fertile(1).icons({produce:1,trade:1}).improved_trade().img("pt.png"),fe("improved_trade").fertile(1).icons({colonize:1,trade:1}).improved_trade().img("ct.png"),fe("improved_research").fertile(1).icons({produce:1,research:1}).improved_research().img("pr.png"),fe("improved_research").fertile(1).icons({colonize:1,research:1}).improved_research().img("cr.png"),fe("improved_survey").fertile(1).icons({produce:1,survey:1}).improved_survey().img("ps.png"),fe("improved_survey").fertile(1).icons({colonize:1,survey:1}).improved_survey().img("cs.png"),fe("improved_production").advanced(1).icons({research:1,produce:1}).improved_production().img("rp.png"),fe("improved_production").advanced(1).icons({trade:1,produce:1}).improved_production().img("tp.png"),fe("improved_warfare").advanced(1).icons({warfare:1,trade:1}).improved_warfare().img("tw.png"),fe("improved_warfare").advanced(1).icons({research:1,warfare:1}).improved_warfare().img("rw.png"),fe("improved_colonize").advanced(1).icons({colonize:1,trade:1}).improved_colonize().img("tc.png"),fe("improved_colonize").advanced(1).icons({research:1,colonize:1}).improved_colonize().img("rc.png"),fe("improved_survey").advanced(1).icons({trade:1,survey:1}).improved_survey().img("ts.png"),fe("improved_survey").advanced(1).icons({research:1,survey:1}).improved_survey().img("rs.png"),fe("survey_team").surveyteam().img(".png"),fe("war_path").warpath().img(".png"),fe("terraforming").terraforming().img(".png"),fe("genetic_engineering").geneticengineering().img(".png"),fe("artificial_intelligence").artificialintelligence().img(".png"),fe("diverse_markets").diversemarkets().img(".png"),fe("specialization").specialization().img(".png"),fe("mobilization").mobilization().img(".png"),fe("data_network").datanetwork().img(".png"),fe("abundance").abundance().img(".png"),fe("adaptability").adaptability().img(".png"),fe("bureaucracy").bureaucracy().img(".png"),fe("dissension").dissension().img(".png"),fe("hyperefficiency").hyperefficiency().img(".png"),fe("imperialism").imperialism().img(".png"),fe("logistics").logistics().img(".png"),fe("productivity").productivity().img(".png"),fe("scorched_earth_policy").scorchedearthpolicy().img(".png"),fe("streamlining").streamlining().img(".png"),fe("weapons_emporium").weaponsemporium().img(".png"),fe("fertile_grounds").fertilegrounds().img(".png")],r)},ge=e=>{let t={id:e,actionrolesequence:"ar",specialization:"",available:!0,rounds:0,limbo:[],deck:et(Le()),hand:[],permanents:[],discard:[],handsize:5,activeaction:null,activerole:"",handsize:5,bstIcons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0},unsettled_planets:[r.stacks.startingplanets.pop()],settled_planets:[],conquered_planets:[],starfighters:{small:0,medium:0,large:0},combatvalue:0,influence:[]};ue(t,t.handsize),n(0,r.players=[...r.players,t],r)},ye=e=>({id:Oe(),name:e,type:"planet",settle_cost:2,settled:!1,conquer_cost:2,production_zones:[],influence_value:2,icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0},handsize_modifier:0,hosted_colonies:[],metallic(){return this.type="metallic",this},advanced(){return this.type="advanced",this},fertile(){return this.type="fertile",this},icon(e){return this.icons[e]++,this},handsize(e){return this.handsize_modifier=e,this},influence(e){return this.influence_value=e,this},settle(e){return this.settle_cost=e,this},conquer(e){return this.conquer_cost=e,this},zone(e){return this.production_zones.push({type:e,filled:!1}),this}}),ve=()=>{n(0,r.planet_deck=et([ye("MISHBURR ITO-A").fertile().settle(5).conquer(4).zone("food").influence(3).icon("produce"),ye("STYKU").fertile().settle(4).conquer(5).zone("water").influence(3).icon("colonize"),ye("ANGUS DUFFY").fertile().settle(3).conquer(6).zone("food").zone("water").influence(3),ye("GERDLAND").fertile().settle(4).conquer(5).zone("water").influence(3).icon("produce"),ye("MIK-MIK").fertile().settle(5).conquer(4).zone("food").influence(3).icon("colonize"),ye("NELOS IV").fertile().settle(5).conquer(4).zone("food").influence(2).handsize(1),ye("SPIELBANY VI").fertile().settle(4).conquer(5).zone("water").influence(2).handsize(1),ye("NEW TEXAS").fertile().settle(3).conquer(6).zone("food").zone("water").influence(2).icon("colonize"),ye("ARTIGAS GNS-111").fertile().settle(3).conquer(6).zone("food").zone("water").influence(2).icon("produce"),ye("HANOJ - T").advanced().settle(5).conquer(4).influence(3).zone("silicon").icon("trade"),ye("OKNOW").advanced().settle(4).conquer(5).influence(2).zone("silicon").handsize(1),ye("SROD AVEIN N2").advanced().settle(3).conquer(6).influence(4).icon("research"),ye("RAL GAI'GAW").advanced().settle(4).conquer(5).influence(3).zone("silicon").icon("trade"),ye("ECHO ROSE").advanced().settle(5).conquer(4).influence(3).zone("silicon").icon("research"),ye("SHOLMICAN").advanced().settle(3).conquer(6).influence(4).zone("silicon"),ye("ZEPHAN").advanced().settle(3).conquer(6).influence(4).icon("trade"),ye("SIMA-07C").advanced().settle(5).conquer(4).influence(2).zone("silicon").handsize(1),ye("LYTTLE").advanced().settle(4).conquer(5).influence(3).zone("silicon").icon("research"),ye("KYRIE & JUNO").metallic().settle(3).conquer(6).influence(4).icon("survey"),ye("MARGHANNAH PRIME").metallic().settle(4).conquer(5).influence(3).handsize(1),ye("TANKAHSHIN").metallic().settle(4).conquer(5).influence(3).zone("metallic").icon("warfare"),ye("VOSON").metallic().settle(4).conquer(5).influence(3).zone("metallic").icon("survey"),ye("PINK SONAR").metallic().settle(5).conquer(4).influence(3).zone("metallic").icon("survey"),ye("OVERLORD BETZEL'S DOMAIN").metallic().settle(3).conquer(6).influence(4).icon("warfare"),ye("8910 SPIELEN").metallic().settle(4).conquer(5).influence(2).zone("metallic").handsize(1),ye("IDROYOS").metallic().settle(3).conquer(6).influence(5),ye("ERKAM-W").metallic().settle(5).conquer(4).influence(3).zone("metallic").icon("warfare")]),r),n(0,r.stacks.startingplanets=et([ye("MESIA SEDNIM").fertile().settle(2).conquer(2).influence(2).zone("water"),ye("DRAWDE").fertile().settle(2).conquer(2).influence(2).zone("food"),ye("LIAGIBA").advanced().settle(2).conquer(2).influence(2).zone("silicon"),ye("POMERENE").advanced().settle(2).conquer(2).influence(2).zone("silicon"),ye("CHRISPEN").metallic().settle(2).conquer(2).influence(2).zone("metallic"),ye("PIEDRA SECA").metallic().settle(2).conquer(2).influence(2).zone("metallic")]),r)},_e=()=>{$().limbo.forEach(e=>{$()[e.finDest]=[...$()[e.finDest],e]})},be=(e,t)=>(t.finDest="exile",e.filter(e=>e.id!=t.id)),ze=e=>n(0,r.options=e,r),we=(e,t)=>{let n=[...[...t.settled_planets,...t.conquered_planets],...k().permanents].reduce((e,t)=>e+t.icons.colonize,0);e.settle_cost-n<=e.hosted_colonies.length&&(Q("abundance")&&0!=e.production_zones.length&&(e.production_zones=e.production_zones.map(e=>({type:e.type,filled:!0}))),t.discard=[...t.discard,...e.hosted_colonies],e.hosted_colonies=[],e.settled=!0,se(t.unsettled_planets,t.settled_planets,e.id))},$e=()=>{o.online&&o.screenname!=$().name||(n(0,r.passt=!1,r),n(0,r.acting_player_index=n(0,r.leading_player_index=(r.leading_player_index+1)%r.number_of_players,r),r),n(0,r.leadingplayer=r.players[r.leading_player_index],r),n(0,r.acting_player=r.players[r.leading_player_index],r),w())},ke=()=>{U()&&(n(0,r.passp=!1,r),n(0,r.acting_player_index=(r.acting_player_index+1)%r.number_of_players,r),n(0,r.acting_player=$(),r),w())},qe=(e,t=1)=>ne(!0,e,t),Ce=(e,t,o)=>{let i={blue:0,green:0,purple:0,red:0};if(o<1)return i;for(let l=0;l<e.length;l++)for(let a=0;a<e[l].production_zones.length;a++)o>0&&e[l].production_zones[a].filled&&(1!=r.influence.length&&n(0,r.influence=r.influence.slice(1),r),e[l].production_zones[a].filled=!1,i[e[l].production_zones[a].type]++,t.influence=[...t.influence,1],o--);return i},Pe=(e,t,o)=>{e.finDest="exile",r.stacks.pilecount[t.type]>=1&&(o.hand=[...o.hand,{...r.stacks.rolecards[r.stacks[t.type]],id:Oe()}],n(0,r.stacks.pilecount[t.type]--,r))},xe=(e,t,n=2)=>{for(let t=0;t<e.length&&t<n;t++)$().limbo=be($().limbo,e[t])},Ee=(e,t)=>e.forEach(e=>Y(t,e)),Se=e=>e=ue(e,2),Ie=(e,t,n,r=!1)=>{let o=r?$().bstIcons.colonize:1;for(let r=0;r<o;r++){let r=t.find(e=>n.type==e.type&&"exile"!=e.finDest);e.hosted_colonies=[...e.hosted_colonies,r],t=t.filter((e,t)=>e.id!=r.id)}},Re=e=>e.starfighters.small++,De=(e,t)=>{Q("scorched_earth_policy")&&(e.production_zones=[],e.conquer_cost-=2,e.conquer_cost<0&&(e.conquer_cost=0)),t.starfighters.small>=e.conquer_cost&&(Q("abundance")&&0!=e.production_zones.length&&(e.production_zones=e.production_zones.map(e=>({type:e.type,filled:!0}))),t.starfighters.small-=e.conquer_cost,(e=Ae(t.unsettled_planets,e.id)).conquered=!0,t.conquered_planets.push(e))},Ae=(e,t)=>{let n=e.find(e=>e.id==t);return e=e.filter(e=>e.id!=t),n},Oe=()=>(n(0,r.nonce++,r),r.nonce),Ne=e=>{let t=r.planet_deck.pop();e.limbo=[...e.limbo,{...t,finDest:"planetdeck"}],n(0,r.options=[...r.options,t],r)},Ve=e=>{n(0,r.choices[0].finDest="unsetttled",r),e.unsettled_planets=[...e.unsettled_planets,r.choices[0]],e.limbo=e.limbo.filter(e=>e.id!=r.choices[0].id),e.limbo.filter(e=>"planetdeck"==e.finDest).forEach(t=>se(e.limbo,r.planet_deck,t.id))},Te=(e=!1)=>{n(0,r.currentphase=(r.currentphase+1)%r.gamesequence.length,r);let t,o,i=r.gamesequence[r.currentphase];for(let e in i)o=e,t=i[e];r.nextphase!==de&&(n(0,r.nextphase=t,r),r.messagetoplayer.push(o)),e&&Fe(),r.nextphase()},Me=()=>{let e=[];e=Ge([...r.gamephases[0].start],e),e=Ge([...r.gamephases[1].action],e,()=>"aar"==$().actionrolesequence),e=Ge([...r.gamephases[1].action],e,()=>"aar"==$().actionrolesequence||"ar"==$().actionrolesequence),e=Ge([...r.gamephases[2].role],e),e=Ge([...r.gamephases[3].lead],e);for(let t=1;t<r.number_of_players;t++)e=Ge([...r.gamephases[4].follow],e);e=Ge([...r.gamephases[1].action],e,()=>"raa"==$().actionrolesequence||"ara"==$().actionrolesequence),e=Ge([...r.gamephases[1].action],e,()=>"raa"==$().actionrolesequence),e=Ge([...r.gamephases[5].discard],e),e=Ge([...r.gamephases[6].cleanup],e),n(0,r.gamesequence=e,r)},Ge=(e,t,n=!1)=>{for(let r in e)if(n){let o,i,l=e[r],a={};for(i in l)o=l[i];a[i]=(()=>{n()?o():w()}),t.push(a)}else t.push(e[r]);return t},Le=()=>{return[Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.survey]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.survey]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.warfare]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.producetrade]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.producetrade]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.colonize]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.colonize]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.research]),Object.assign({id:Oe()},r.stacks.rolecards[r.stacks.research]),{id:Oe(),type:"politics",selected:!1,action:e=>{let t=()=>{document.removeEventListener("choicemade",t),Pe($().activeaction,r.choices[0],$()),e()};n(0,r.displayinfo.center_or_planets=!0,r),n(0,r.displayinfo.selectionzone="rolecards",r),n(0,r.displayinfo.allowformultipleselections=!1,r),n(0,r.displayinfo.showoptiontoskip=!1,r),r.messagetoplayer.push("choose a card from the center row to add to your hand"),document.addEventListener("choicemade",t),ze(r.stacks.rolecards)},role:null,icons:{survey:0,warfare:0,colonize:0,produce:0,trade:0,research:0,politics:1},name:"Politics",image:null}]},Ye=()=>n(0,r.currentphase++,r),He=e=>{n(1,o.online=!0,o),Je(e),je(()=>s.emit("message",d({header:"newgame",game:r,sets:o.sets,number_of_players:r.players.length})))},je=e=>{let t=()=>{setTimeout(()=>{s.emit("message",d({header:"ping"})),t()},2e3)};(s=io()).on("connect",()=>{u("connected"),s.on("id",e=>{u("id"),u(p(e)),n(0,r={...r,game_id:p(e),hader:"",currentphase:r.currentphase+1}),n(1,o={...o,existinggames:[...o.existinggames,r],online:!0}),We()}),s.on("fetch",e=>{u("fetch"),u(p(e)),n(0,r.currentphase=-1,r),n(1,o={...o,existinggames:p(e).map(e=>e.game).filter(e=>e.players.filter(e=>e.available).length>0),online:!0})}),s.on("enter",e=>{u("enter"),u(p(e)),n(0,r={...p(e),phasse:r.phases,gamesequence:r.gamesequence}),n(1,o={...o,online:!0,player_id:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10)})}),s.on("join",e=>{u("join"),e=p(e),u(e),n(0,r.players[e.slot]=e.player,r),u("available slots: ",r.players.reduce((e,t)=>e+t.available?1:0,0)),0==r.players.reduce((e,t)=>e+t.available?1:0,0)&&w()}),s.on("set",e=>{u(p(e)),n(0,r={...p(e),phasse:r.phases,gamesequence:r.gamesequence})}),e(),t()})},Ue=()=>je(()=>s.emit("message",d({header:"fetchexisting"}))),Be=e=>{let t=e.players.findIndex(e=>e.available);o.init||Je(e.number_of_players),s.emit("message",d({header:"enterexisting",game_id:e.game_id,player_name:o.screename,slot:t}))},Fe=()=>o.online&&s.emit("message",d({...r,header:"set",sender:o.player_id})),We=()=>s.emit("message",d({...r,header:"register",sender:o.player_id})),Je=e=>{n(0,r.label=o.screenname,r),n(1,o.init=!0,o),ve();for(let t=0;t<e;t++)ge(t);me(),Me(),o.online||(Qe(),Ke())},Ke=()=>r.players.forEach((e,t)=>e.name="Player "+(t+1)),Xe=()=>n(0,r.displayinfo.center_or_planets=!r.displayinfo.center_or_planets,r),Ze=()=>{n(0,r.passtoplayer=!r.passtoplayer,r),lt()},Qe=()=>{n(0,r.game_id="",r),n(0,r.game_id+=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10),r)},et=e=>{let t,n,r=e.length;for(;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e},tt=(e,t)=>()=>n(0,r.displayinfo.dragged=t,r),nt=(e,t)=>()=>{let n=document.getElementById("playedcards").getBoundingClientRect();e.changedTouches[0].clientX>n.left&&e.changedTouches[0].clientX<n.left+n.width&&e.changedTouches[0].clientY<n.top+n.height&&e.changedTouches[0].clientY>n.top&&(null!==r.displayinfo.dragged&&re(r.displayinfo.dragged,t),r.displayinfo.dragged),document.querySelector("#dragged").style.visibility="hidden"},rt=(e,t)=>()=>{let n=e.targetTouches[0],r=document.querySelector("#dragged");r.style.position="absolute",r.style.visibility="visible",r.style.top=n.pageY-75+"px",r.style.left=n.pageX-50+"px",r.style.width="100px",r.style.height="137px",r.style.zIndex="4",r.style.backgroundImage="url('"+t+"')"},ot=()=>{n(1,o.online=!1,o),n(0,r.currentphase=0,r),Je(2),w()},it=e=>{n(1,o.screename=e,o),Ye()},lt=()=>{let e=document.getElementById("screen");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()};return[r,o,c,u,re,ie,le,$e,ke,Ye,He,Ue,Be,Xe,Ze,tt,nt,rt,ot,it,l,a,s,void 0,d,p,h,f,m,g,y,v,_,b,z,w,$,k,q,C,P,x,E,S,R,D,O,V,(e,t)=>{L("limbo",e,t),T(e,t)},T,M,G,L,Y,H,j,U,B,()=>n(0,r.options=[],r),F,W,J,K,X,Z,Q,ee,te,ne,oe,ae,se,ce,de,pe,ue,he,fe,me,ge,ye,ve,_e,(e,t,n,r)=>{let o=e.find(e=>r==e.id);e=e.filter(e=>e.id!=o.id)},be,ze,we,e=>{document.addEventListener("choicemade",te(e,"choicemade",()=>n(0,r.number_of_players=r.choices,r))),ze(ee(r.minPlyrs,r.maxPlyrs))},qe,Ce,Pe,xe,Ee,Se,Ie,Re,De,e=>{n(0,r.displayinfo.selectionzone="hand",r),n(0,r.displayinfo.allowformultipleselections=!0,r),n(0,r.displayinfo.showoptiontoskip=!0,r),ze(e.hand),document.addEventListener("choicemade",te(()=>{},"choicemade",()=>Ee(r.choices,e)))},Ae,(e,t=(()=>{}))=>{"Skip"!=e[0].name&&(e.forEach(e=>{Y($(),e),he($().hand,$().limbo,"discard",cards[i].id)}),t())},Oe,(e=(()=>{}))=>$().activerole.role.role.leader(e),(e=null)=>{$().activerole.set(r.players[r.leading_player_index].activerole.role),$().activerole.role.role.follower(e)},Ne,Ve,(e,t=null)=>{let o=e[0];$().activerole.set(o),r.stacks.pilecount[o.type]>=1&&($().bstIcons[o.type]++,$().limbo.push(Object.assign({id:Oe(),finDest:"discard"},r.stacks.rolecards[r.stacks[o.type]])),n(0,r.stacks.pilecount[o.type]--,r));let[,,...i]=arguments;t(o,i)},(e,t=null)=>{"Skip"!=e[0].name&&e.forEach(e=>se($().hand,$().discard,e.id));let[,,...n]=arguments;t(e,n)},Te,Me,Ge,Le,je,Fe,We,Je,Ke,(e,t)=>r.displayinfo.selectionzone==e?t.selected?"selected":"selectable":"bordered",Qe,et,lt,function(){o.screenname=this.value,n(1,o)},e=>{"Enter"==e.key&&it(o.screenname)},()=>it(o.screenname),()=>it(o.screenname),()=>Ye(),()=>Ye(),()=>Ue(),()=>Ue(),()=>ot(),()=>ot(),e=>He(2),e=>He(2),e=>He(3),e=>He(3),e=>He(4),e=>He(4),e=>Be(e),e=>Be(e),()=>Ze(),()=>Ze(),()=>Xe(),()=>Xe(),e=>re(e,"research"),e=>re(e,"research"),e=>re(e,"rolecards"),e=>re(e,"rolecards"),(e,t)=>rt(t,"/images/"+e.type+".png"),(e,t)=>tt(0,e),e=>nt(e,"rolecards"),e=>re(e,"unsettled_planets"),e=>re(e,"unsettled_planets"),e=>re(e,"settled_&_conquered_planets"),e=>re(e,"settled_&_conquered_planets"),()=>ie([{name:"Skip"}]),()=>ie([{name:"Skip"}]),e=>le(e),e=>le(e),()=>ke(),()=>ke(),()=>$e(),()=>$e(),()=>ie(r[r.displayinfo.choicelabel]),()=>ie(r[r.displayinfo.choicelabel]),(e,t)=>tt(0,e),e=>nt(e,"hand"),(e,t)=>rt(t,e.imgurl),e=>{u(e),re(e,"hand")},e=>re(e,"hand"),e=>re(e,"options"),e=>re(e,"options"),e=>re(e,"options"),e=>re(e,"options"),e=>re(e,"options"),e=>re(e,"options")]}class st extends e{constructor(e){super(),t(this,e,at,lt,n,{},[-1,-1,-1,-1,-1,-1,-1])}}function ct(e){let t;const n=new st({});return{c(){y(n.$$.fragment)},l(e){b(n.$$.fragment,e)},m(e,r){k(n,e,r),t=!0},p:D,i(e){t||(p(n.$$.fragment,e),t=!0)},o(e){f(n.$$.fragment,e),t=!1},d(e){S(n,e)}}}export default class extends e{constructor(e){super(),t(this,e,null,ct,n,{})}}
